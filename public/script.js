function hasConsentFor(e){return void 0!==window.CookieConsent&&window.CookieConsent.validConsent(e)}function withConsent(e,t){hasConsentFor(e)?t():console.log(`[WARNING] Skipping ${e} code - no user consent`)}document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",function(e){const t=e.target.closest('a[href^="#"]');if(t&&"#"!==t.getAttribute("href")){e.preventDefault();const a=t.getAttribute("href"),n=document.querySelector(a);n&&n.scrollIntoView({behavior:"smooth",block:"start"})}});const e=document.querySelector("nav, .navbar, header");let t=0;function a(){const a=window.pageYOffset||document.documentElement.scrollTop;e&&(a>50?e.classList.add("scrolled"):e.classList.remove("scrolled")),t=a}window.addEventListener("scroll",a,{passive:!0}),a();const n=document.querySelector(".contact-form");n&&(n.addEventListener("submit",function(e){e.preventDefault();let t=!0;const a=n.elements;n.querySelectorAll(".error-message").forEach(e=>e.remove());n.querySelectorAll(".error").forEach(e=>e.classList.remove("error"));for(let e=0;e<a.length;e++){const n=a[e];if(n.hasAttribute("required")&&!n.value.trim()){t=!1,n.classList.add("error");const e=document.createElement("span");e.className="error-message",e.textContent="This field is required",e.style.color="red",e.style.fontSize="0.875rem",e.style.marginTop="0.25rem",e.style.display="block",n.parentNode.insertBefore(e,n.nextSibling)}if("email"===n.type&&n.value.trim()){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.value.trim())){t=!1,n.classList.add("error");const e=document.createElement("span");e.className="error-message",e.textContent="Please enter a valid email address",e.style.color="red",e.style.fontSize="0.875rem",e.style.marginTop="0.25rem",e.style.display="block",n.parentNode.insertBefore(e,n.nextSibling)}}}t&&n.submit()}),n.addEventListener("input",function(e){if(e.target.classList.contains("error")){e.target.classList.remove("error");const t=e.target.parentNode.querySelector(".error-message");t&&t.remove()}}));const o=document.querySelectorAll('.fade-in, [data-animate="fade-in"]');function r(){const e=window.innerHeight,t=window.pageYOffset||document.documentElement.scrollTop;o.forEach(function(a){a.getBoundingClientRect().top+t-t<e-100&&!a.classList.contains("animated")&&(a.classList.add("animated"),a.style.opacity="1",a.style.transform="translateY(0)")})}o.forEach(function(e){e.classList.contains("animated")||(e.style.transform="translateY(20px)",e.style.transition="opacity 0.6s ease, transform 0.6s ease")}),window.addEventListener("scroll",r,{passive:!0}),r()}),function(){"use strict";let e=0;function t(){if(e++,void 0===window.CookieConsent)return void(e<50&&setTimeout(t,100));const a=window.CookieConsent;try{function n(){"function"!=typeof gtag&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)});var e=a.acceptedCategory("analytics"),t=a.acceptedCategory("marketing");gtag("consent","update",{analytics_storage:e?"granted":"denied",ad_storage:t?"granted":"denied",ad_user_data:t?"granted":"denied",ad_personalization:t?"granted":"denied"})}a.run({autoShow:!0,mode:"opt-in",revision:0,categories:{necessary:{enabled:!0,readOnly:!0},analytics:{enabled:!1,readOnly:!1,autoClear:{cookies:[{name:"_ga"},{name:"_ga_*"},{name:"_gid"},{name:"_gat"}]}},marketing:{enabled:!1,readOnly:!1,autoClear:{cookies:[{name:"_fbp"},{name:"_fbc"},{name:"fr"}]}}},language:{default:"he",translations:{he:{consentModal:{title:"×× ×—× ×• ××©×ª××©×™× ×‘×¢×•×’×™×•×ª ğŸª",description:"×¡× ×˜×¨ ×§×•×“×© ××©×ª××© ×‘×¢×•×’×™×•×ª ×›×“×™ ×œ×©×¤×¨ ××ª ×”×—×•×•×™×” ×©×œ×š, ×œ× ×ª×— ×©×™××•×© ×‘××ª×¨ ×•×œ×¡×™×™×¢ ×‘××××¦×™ ×”×©×™×•×•×§ ×©×œ× ×•.",acceptAllBtn:"××©×¨ ×”×›×œ",acceptNecessaryBtn:"×¨×§ ×”×›×¨×—×™",showPreferencesBtn:"× ×”×œ ×”×¢×“×¤×•×ª",footer:'<a href="#privacy-policy">××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª</a> | <a href="#terms-conditions">×ª× ××™ ×©×™××•×©</a>'},preferencesModal:{title:"×”×¢×“×¤×•×ª ×¢×•×’×™×•×ª",acceptAllBtn:"××©×¨ ×”×›×œ",acceptNecessaryBtn:"×¨×§ ×”×›×¨×—×™",savePreferencesBtn:"×©××•×¨ ×”×¢×“×¤×•×ª",closeIconLabel:"×¡×’×•×¨",sections:[{title:"×¢×•×’×™×•×ª ×—×™×•× ×™×•×ª",description:"×¢×•×’×™×•×ª ××œ×” ×”×›×¨×—×™×•×ª ×œ×ª×¤×§×•×“ ×”××ª×¨ ×•×œ× × ×™×ª×Ÿ ×œ×”×©×‘×™×ª ××•×ª×Ÿ.",linkedCategory:"necessary"},{title:"×¢×•×’×™×•×ª × ×™×ª×•×—",description:"×¢×•×’×™×•×ª ××œ×” ×¢×•×–×¨×•×ª ×œ× ×• ×œ×”×‘×™×Ÿ ××™×š ×”××‘×§×¨×™× ××ª×§×©×¨×™× ×¢× ×”××ª×¨ ×©×œ× ×•.",linkedCategory:"analytics"},{title:"×¢×•×’×™×•×ª ×©×™×•×•×§×™×•×ª",description:"×¢×•×’×™×•×ª ××œ×” ××©××©×•×ª ×œ×”×¦×’×ª ×¤×¨×¡×•××•×ª ××•×ª×××•×ª ××™×©×™×ª.",linkedCategory:"marketing"}]}}}},guiOptions:{consentModal:{layout:"box",position:"bottom right",equalWeightButtons:!0,flipButtons:!1},preferencesModal:{layout:"box",equalWeightButtons:!0,flipButtons:!1}}}),n(),"function"==typeof a.onChange&&a.onChange(function(e,t){n()})}catch(o){}}"loading"===document.readyState?(document.addEventListener("DOMContentLoaded",t),setTimeout(t,1e3)):"interactive"===document.readyState||"complete"===document.readyState?t():setTimeout(t,500),"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("load",t,{once:!0})}(),window.onload=function(){try{window.micAccessTool=new MicAccessTool({buttonPosition:"left",forceLang:"he-IL",icon:{position:{bottom:{size:50,units:"px"},left:{size:20,units:"px"},type:"fixed"},backgroundColor:"transparent",color:"transparent",img:"accessible",circular:!1},menu:{dimensions:{width:{size:300,units:"px"},height:{size:"auto",units:"px"}}}})}catch(e){}document.addEventListener("keydown",function(e){var t=e.altKey,a="KeyA"===e.code||65===e.keyCode||65===e.which||e.key&&("a"===e.key.toLowerCase()||"Ã¥"===e.key||"Ã…"===e.key);t&&a&&(window.innerWidth>768&&(e.preventDefault(),e.stopPropagation(),document.body.classList.contains("accessibility-widget-visible")?document.body.classList.remove("accessibility-widget-visible"):(document.body.classList.add("accessibility-widget-visible"),setTimeout(function(){var e=document.getElementById("mic-access-tool-general-button");e&&e.click()},200))))},!0)},function(){function e(){console.log("ğŸ“§ Zappy: Initializing contact form API integration...");const e=document.querySelector(".contact-form")||document.querySelector('form[action*="contact"]')||document.querySelector("form#contact")||document.querySelector("form#contactForm")||document.getElementById("contactForm")||document.querySelector("section.contact form")||document.querySelector("section#contact form")||document.querySelector("form");if(!e)return void console.log("âš ï¸ Zappy: No contact form found on page");console.log("âœ… Zappy: Contact form found:",e.className||e.id||"unnamed form");e.onsubmit;e.addEventListener("submit",async function(e){const t=new FormData(this),a=Object.fromEntries(t);try{console.log("ğŸ“§ Zappy: Sending contact form to backend API...");const e=await fetch("https://api.zappy5.com/api/email/contact-form",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({websiteId:"fee8bae9-93dc-47a9-bcad-fb2d86a59123",name:a.name||"",email:a.email||"",subject:a.subject||"Contact Form Submission",message:a.message||"",phone:a.phone||null})}),t=await e.json();t.success?console.log("âœ… Zappy: Contact form data sent successfully to backend"):console.log("âš ï¸ Zappy: Backend returned error:",t.error)}catch(e){console.error("âŒ Zappy: Failed to send to backend API:",e)}},!0),console.log("âœ… Zappy: Contact form API integration initialized")}window.zappyContactFormLoaded?console.log("ğŸ“§ Zappy contact form already loaded"):(window.zappyContactFormLoaded=!0,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e())}(),function(){try{document.documentElement.setAttribute("data-zappy-site-type","ecommerce")}catch(e){}try{document.body&&document.body.setAttribute("data-zappy-site-type","ecommerce")}catch(e){}const e=window.ZAPPY_WEBSITE_ID;function t(){const e=document.querySelector(".zappy-announcement-bar"),t=document.querySelector(".zappy-catalog-menu"),a=e?Math.ceil(e.getBoundingClientRect().height):0,n=function(){const e=["nav#navbar","nav.navbar",".navbar:not(.zappy-catalog-menu)",'nav[class*="nav"]',"header.navbar",'header:not([class*="gallery"]):not([class*="hero"]):not([class*="section"])'];for(const t of e){const e=document.querySelector(t);if(e&&!(e.classList&&e.classList.contains("zappy-catalog-menu")||"zappy-catalog-menu"===e.id||e.classList&&e.classList.contains("mobile-search-panel")||"HEADER"===e.tagName&&e.closest("section")||e.classList&&(e.classList.contains("lookbook-gallery-header")||e.classList.contains("hero-header")||e.classList.contains("section-header")||e.classList.contains("page-header"))))return e}return null}();if(n){n.style.marginBottom="0",n.style.setProperty("position","fixed","important"),n.style.setProperty("top",a+"px","important"),n.style.setProperty("left","0","important"),n.style.setProperty("right","0","important"),n.style.setProperty("z-index","100000","important");const e=Math.ceil(n.getBoundingClientRect().height||n.offsetHeight||0);let o=a+e;if(t&&"none"!==t.style.display){t.style.marginTop="0";const n=a+e;t.style.setProperty("top",n+"px","important");o=n+Math.ceil(t.getBoundingClientRect().height||t.offsetHeight||0)}document.documentElement.style.setProperty("--header-height",e+"px"),document.documentElement.style.setProperty("--total-header-height",o+"px"),document.body.style.setProperty("padding-top",o+"px","important")}else a>0&&document.body.style.setProperty("padding-top",a+"px","important")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t(),window.addEventListener("resize",t),setTimeout(t,50),setTimeout(t,200),setTimeout(t,500);const a=function(e){"/"!==e.charAt(0)&&(e="/"+e);const t=function(){const e=(window.ZAPPY_API_BASE||"").replace(/\/$/,""),t=window.location?window.location.pathname:"";return-1!==t.indexOf("/preview")||-1!==t.indexOf("/preview-fullscreen")?window.location.origin:e}();return t?t+e:e};if(!e)return;const n={products:"××•×¦×¨×™×",ourProducts:"×”××•×¦×¨×™× ×©×œ× ×•",featuredProducts:"××•×¦×¨×™× ××•××œ×¦×™×",noFeaturedProducts:"×¢×•×“ ×œ× × ×‘×—×¨×• ××•×¦×¨×™× ××•××œ×¦×™×. ×¦×¤×• ×‘×›×œ ×”××•×¦×¨×™× ×©×œ× ×•!",featuredCategories:"×§× ×• ×œ×¤×™ ×§×˜×’×•×¨×™×”",all:"×”×›×œ",featured:"××•××œ×¦×™×",new:"×—×“×©×™×",sale:"××‘×¦×¢×™×",loadingProducts:"×˜×•×¢×Ÿ ××•×¦×¨×™×...",cart:"×¢×’×œ×ª ×§× ×™×•×ª",yourCart:"×¢×’×œ×ª ×”×§× ×™×•×ª ×©×œ×š",emptyCart:"×”×¢×’×œ×” ×¨×™×§×”",total:'×¡×”"×›',proceedToCheckout:"×”××©×š ×œ×ª×©×œ×•×",checkout:"×ª×©×œ×•×",customerInfo:"×¤×¨×˜×™ ×œ×§×•×—",fullName:"×©× ××œ×",email:"××™××™×™×œ",phone:"×˜×œ×¤×•×Ÿ",shippingAddress:"×›×ª×•×‘×ª ×œ××©×œ×•×—",street:"×¨×—×•×‘ ×•××¡×¤×¨",apartment:"×“×™×¨×”, ×§×•××”, ×›× ×™×¡×”",city:"×¢×™×¨",zip:"××™×§×•×“",saveAddressForNextTime:"×©××•×¨ ××ª ×”×›×ª×•×‘×ª ×œ×¤×¢× ×”×‘××”",shippingMethod:"×©×™×˜×ª ××©×œ×•×—",loadingShipping:"×˜×•×¢×Ÿ ×©×™×˜×•×ª ××©×œ×•×—...",payment:"×ª×©×œ×•×",loadingPayment:"×˜×•×¢×Ÿ ××¤×©×¨×•×™×•×ª ×ª×©×œ×•×...",orderSummary:"×¡×™×›×•× ×”×–×× ×”",subtotal:"×¡×›×•× ×‘×™× ×™×™×",vat:'××¢"×',vatIncluded:'×›×•×œ×œ ××¢"×',shipping:"××©×œ×•×—",discount:"×”× ×—×”",totalToPay:'×¡×”"×› ×œ×ª×©×œ×•×',placeOrder:"×‘×¦×¢ ×”×–×× ×”",login:"×”×ª×—×‘×¨×•×ª",customerLogin:"×”×ª×—×‘×¨×•×ª ×œ×§×•×—×•×ª",enterEmail:"×”×–×Ÿ ××ª ×›×ª×•×‘×ª ×”××™××™×™×œ ×©×œ×š ×•× ×©×œ×— ×œ×š ×§×•×“ ×”×ª×—×‘×¨×•×ª",emailAddress:"×›×ª×•×‘×ª ××™××™×™×œ",sendCode:"×©×œ×— ×§×•×“",enterCode:"×”×–×Ÿ ××ª ×”×§×•×“ ×©× ×©×œ×— ×œ××™××™×™×œ ×©×œ×š",verificationCode:"×§×•×“ ××™××•×ª",verify:"×××ª",returnPolicy:"××“×™× ×™×•×ª ×”×—×–×¨×•×ª",addToCart:"×”×•×¡×£ ×œ×¢×’×œ×”",startingAt:"×”×—×œ ×",addedToCart:"×”××•×¦×¨ × ×•×¡×£ ×œ×¢×’×œ×”!",remove:"×”×¡×¨",noProducts:"××™×Ÿ ××•×¦×¨×™× ×œ×”×¦×’×” ×›×¨×’×¢",errorLoading:"×©×’×™××” ×‘×˜×¢×™× ×”",days:"×™××™×",currency:"â‚ª",free:"×—×™× ×",freeAbove:"××©×œ×•×— ×—×™× × ××¢×œ",noShippingMethods:"××™×Ÿ ××¤×©×¨×•×™×•×ª ××©×œ×•×— ×–××™× ×•×ª",viewAllResults:"×”×¦×’ ××ª ×›×œ ×”×ª×•×¦××•×ª",searchProducts:"×—×™×¤×•×© ××•×¦×¨×™×",productDetails:"×¤×¨×˜×™ ×”××•×¦×¨",viewDetails:"×œ×¤×¨×˜×™× × ×•×¡×¤×™×",inStock:"×‘××œ××™",outOfStock:"××–×œ ××”××œ××™",pleaseSelect:"× × ×œ×‘×—×•×¨",sku:'××§"×˜',category:"×§×˜×’×•×¨×™×”",relatedProducts:"××•×¦×¨×™× ×“×•××™×",productNotFound:"×”××•×¦×¨ ×œ× × ××¦×",backToProducts:"×—×–×¨×” ×œ××•×¦×¨×™×",home:"×‘×™×ª",quantity:"×›××•×ª",unitLabels:{piece:"×™×—'",kg:'×§"×’',gram:"×’×¨×",liter:"×œ×™×˜×¨",ml:'×"×œ'},perUnit:"/",couponCode:"×§×•×“ ×§×•×¤×•×Ÿ",enterCouponCode:"×”×–×Ÿ ×§×•×“ ×§×•×¤×•×Ÿ",applyCoupon:"×”×—×œ",removeCoupon:"×”×¡×¨",couponApplied:"×”×§×•×¤×•×Ÿ ×”×•×—×œ ×‘×”×¦×œ×—×”!",invalidCoupon:"×§×•×“ ×§×•×¤×•×Ÿ ×œ× ×ª×§×™×Ÿ",couponExpired:"×”×§×•×¤×•×Ÿ ×¤×’ ×ª×•×§×£",couponMinOrder:"×¡×›×•× ×”×–×× ×” ××™× ×™××œ×™",alreadyHaveAccount:"×›×‘×¨ ×™×© ×œ×š ×—×©×‘×•×Ÿ?",loginHere:"×”×ª×—×‘×¨ ×›××Ÿ",loggedInAs:"××—×•×‘×¨ ×›:",logout:"×”×ª× ×ª×§",haveCouponCode:"×™×© ×œ×™ ×§×•×“ ×§×•×¤×•×Ÿ",agreeToTerms:"×× ×™ ××¡×›×™×/×” ×œ",termsAndConditions:"×ª× ××™ ×”×©×™××•×©",pleaseAcceptTerms:"× × ×œ××©×¨ ××ª ×ª× ××™ ×”×©×™××•×©",nameRequired:"× × ×œ×”×–×™×Ÿ ×©× ××œ×",emailRequired:"× × ×œ×”×–×™×Ÿ ×›×ª×•×‘×ª ××™××™×™×œ",emailInvalid:"×›×ª×•×‘×ª ××™××™×™×œ ×œ× ×ª×§×™× ×”",phoneRequired:"× × ×œ×”×–×™×Ÿ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ",shippingRequired:"× × ×œ×‘×—×•×¨ ×©×™×˜×ª ××©×œ×•×—",streetRequired:"× × ×œ×”×–×™×Ÿ ×¨×—×•×‘ ×•××¡×¤×¨",cityRequired:"× × ×œ×”×–×™×Ÿ ×¢×™×¨",cartEmpty:"×”×¢×’×œ×” ×¨×™×§×”",paymentNotConfigured:"×ª×©×œ×•× ××§×•×•×Ÿ ×œ× ××•×’×“×¨",orderSuccess:"×”×”×–×× ×” ×”×ª×§×‘×œ×”!",thankYouOrder:"×ª×•×“×” ×¢×œ ×”×”×–×× ×”",orderNumber:"××¡×¤×¨ ×”×–×× ×”",orderConfirmation:"××™×©×•×¨ ×”×–×× ×” × ×©×œ×— ×œ××™××™×™×œ ×©×œ×š",orderProcessing:"×”×”×–×× ×” ×©×œ×š ×‘×˜×™×¤×•×œ. × ×¢×“×›×Ÿ ××•×ª×š ×›×©×”××©×œ×•×— ×™×¦× ×œ×“×¨×š.",continueShopping:"×œ×”××©×š ×§× ×™×•×ª",next:"×”×‘×",contactInformation:"×¤×¨×˜×™ ×”×ª×§×©×¨×•×ª",items:"×¤×¨×™×˜×™×",continueToHomePage:"×”××©×š ×œ×“×£ ×”×‘×™×ª",transactionDate:"×ª××¨×™×š ×¢×¡×§×”",paymentMethod:"×××¦×¢×™ ×ª×©×œ×•×",orderDetails:"×¤×¨×˜×™ ×”×”×–×× ×”",loadingOrder:"×˜×•×¢×Ÿ ×¤×¨×˜×™ ×”×–×× ×”...",orderNotFound:"×œ× × ××¦××” ×”×–×× ×”",orderItems:"×¤×¨×™×˜×™× ×‘×”×–×× ×”",paidAmount:"×¡×›×•× ×©×©×•×œ×",myAccount:"×”×—×©×‘×•×Ÿ ×©×œ×™",accountWelcome:"×‘×¨×•×š ×”×‘×",yourOrders:"×”×”×–×× ×•×ª ×©×œ×š",noOrders:"××™×Ÿ ×¢×“×™×™×Ÿ ×”×–×× ×•×ª",orderDate:"×ª××¨×™×š",orderStatus:"×¡×˜×˜×•×¡",orderTotal:'×¡×”"×›',viewOrder:"×¦×¤×” ×‘×”×–×× ×”",statusPending:"×××ª×™×Ÿ ×œ×ª×©×œ×•×",statusPaid:"×©×•×œ×",statusProcessing:"×‘×˜×™×¤×•×œ",statusShipped:"× ×©×œ×—",statusDelivered:"× ××¡×¨",statusCancelled:"×‘×•×˜×œ",notLoggedIn:"×œ× ××—×•×‘×¨",pleaseLogin:"×™×© ×œ×”×ª×—×‘×¨ ×›×“×™ ×œ×¦×¤×•×ª ×‘×—×©×‘×•×Ÿ",personalDetails:"×¤×¨×˜×™× ××™×©×™×™×",editProfile:"×¢×¨×™×›×ª ×¤×¨×•×¤×™×œ",name:"×©×",saveChanges:"×©××•×¨ ×©×™× ×•×™×™×",cancel:"×‘×™×˜×•×œ",addresses:"×›×ª×•×‘×•×ª",addAddress:"×”×•×¡×£ ×›×ª×•×‘×ª",editAddress:"×¢×¨×•×š ×›×ª×•×‘×ª",deleteAddress:"××—×§ ×›×ª×•×‘×ª",setAsDefault:"×”×’×“×¨ ×›×‘×¨×™×¨×ª ××—×“×œ",defaultAddress:"×›×ª×•×‘×ª ×‘×¨×™×¨×ª ××—×“×œ",addressLabel:"×©× ×”×›×ª×•×‘×ª",work:"×¢×‘×•×“×”",other:"××—×¨",noAddresses:"××™×Ÿ ×›×ª×•×‘×•×ª ×©××•×¨×•×ª",confirmDelete:"×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§?",profileUpdated:"×”×¤×¨×•×¤×™×œ ×¢×•×“×›×Ÿ ×‘×”×¦×œ×—×”",addressSaved:"×”×›×ª×•×‘×ª × ×©××¨×” ×‘×”×¦×œ×—×”",addressDeleted:"×”×›×ª×•×‘×ª × ××—×§×”",saving:"×©×•××¨...",saveToFavorites:"×©××•×¨ ×œ××•×¢×“×¤×™×",removeFromFavorites:"×”×¡×¨ ×××•×¢×“×¤×™×",shareProduct:"×©×ª×£ ××•×¦×¨",linkCopied:"×”×§×™×©×•×¨ ×”×•×¢×ª×§!",myFavorites:"×”××•×¢×“×¤×™× ×©×œ×™",noFavorites:"××™×Ÿ ×¢×“×™×™×Ÿ ××•×¦×¨×™× ××•×¢×“×¤×™×",addedToFavorites:"× ×•×¡×£ ×œ××•×¢×“×¤×™×",removedFromFavorites:"×”×•×¡×¨ ××”××•×¢×“×¤×™×",loginToFavorite:"×™×© ×œ×”×ª×—×‘×¨ ×›×“×™ ×œ×©××•×¨ ××•×¢×“×¤×™×",browseFavorites:"×’×œ×• ××ª ×›×œ ×”××•×¦×¨×™× ×©×œ× ×•",selectVariant:"×‘×—×¨ ××¤×©×¨×•×ª",variantUnavailable:"×œ× ×–××™×Ÿ",color:"×¦×‘×¢",size:"××™×“×”",material:"×—×•××¨",style:"×¡×’× ×•×Ÿ",weight:"××©×§×œ",capacity:"×§×™×‘×•×œ×ª",length:"××•×¨×š",inquiryAbout:"×¤× ×™×™×” ×‘× ×•×©×",sendInquiry:"×©×œ×— ×¤× ×™×™×”",callNow:"×”×ª×§×©×¨ ×¢×›×©×™×•",specifications:"××¤×¨×˜ ×˜×›× ×™",businessPhone:"[business_phone]",businessEmail:"[business_email]"};function o(e,t){if("undefined"!=typeof zappyI18n&&"function"==typeof zappyI18n.t){var a=zappyI18n.t("ecom_"+e);if(a&&a!=="ecom_"+e)return a}return t}function r(e){if(!e)return"";var t=document.createElement("div");t.innerHTML=e,t.innerHTML=t.innerHTML.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<\/li>/gi," ").replace(/<br\s*\/?>/gi," ").replace(/<\/h[1-6]>/gi," ");var a=t.textContent||t.innerText||"";return a=a.replace(/\s+/g," ").trim()}const i=document.documentElement.lang||"",s=["he","ar","iw"].includes(i.toLowerCase().substring(0,2))||"rtl"===document.documentElement.dir||"rtl"===document.body.dir;let c=JSON.parse(localStorage.getItem("zappy_cart_"+e)||"[]"),d=.18,l="standard",u=!1,p={},m={},g=!0,f="popularity",y=localStorage.getItem("zappy_view_mode_"+e)||"grid",v={categories:[],brands:[],tags:[],priceMin:null,priceMax:null,sale:!1};async function h(){if(!u)try{const t=await fetch(a("/api/ecommerce/storefront/settings?websiteId="+e)),n=await t.json();n.success&&n.data&&(n.data.taxRate&&n.data.taxRate>0&&(d=n.data.taxRate),n.data.productLayout&&(l=n.data.productLayout),n.data.sidebarFiltersConfig&&(p=n.data.sidebarFiltersConfig),n.data.sortingConfig&&(m=n.data.sortingConfig),null!=n.data.viewToggleEnabled&&(g=n.data.viewToggleEnabled),u=!0)}catch(e){console.warn("Failed to fetch store settings, using defaults:",e)}}function b(e){return(e||"").replace(/[â€â€â€ª-â€®â¦-â©â€‹-â€ï»¿]/g,"").trim()}function w(){localStorage.setItem("zappy_cart_"+e,JSON.stringify(c)),C(),T()}function C(){const e=c.length;document.querySelectorAll(".cart-count").forEach(function(t){t.textContent=e})}function E(e){var t=function(e){var t=e.quantityUnit||e.quantity_unit||"piece";return"piece"===t?"":"custom"===t?e.customUnitLabel||e.custom_unit_label||"":(n.unitLabels||{})[t]||t}(e);return t?e.quantity+" "+t:e.quantity}function k(e){if(!e.show_price_per_unit)return"";var t,a,o,r=e.quantity_unit||"piece",i=parseInt(e.variant_count||0,10),s=parseInt(e.variant_price_count||0,10),c=parseFloat(e.variant_min_price),d=parseFloat(e.variant_max_price),l=i>1&&s>1&&Number.isFinite(c)&&Number.isFinite(d)&&c!==d?c:parseFloat(e.sale_price)&&parseFloat(e.sale_price)<parseFloat(e.price)?parseFloat(e.sale_price):parseFloat(e.price);if(!l)return"";if("piece"===r){var u=e.piece_unit_type,p=parseFloat(e.piece_unit_value);if(!u||!p)return"";if("gram"===u)t=100,a="100"+(n.unitLabels&&n.unitLabels.gram||"g");else if("ml"===u)t=100,a="100"+(n.unitLabels&&n.unitLabels.ml||"ml");else if("kg"===u)t=1,a=n.unitLabels&&n.unitLabels.kg||"kg";else{if("liter"!==u)return"";t=1,a=n.unitLabels&&n.unitLabels.liter||"L"}o=l/p*t}else{var m=parseFloat(e.quantity_step)||1;if(!m)return"";if("gram"===r)t=100,a="100"+(n.unitLabels&&n.unitLabels.gram||"g");else if("ml"===r)t=100,a="100"+(n.unitLabels&&n.unitLabels.ml||"ml");else if("kg"===r)t=1,a=n.unitLabels&&n.unitLabels.kg||"kg";else if("liter"===r)t=1,a=n.unitLabels&&n.unitLabels.liter||"L";else{if("custom"!==r)return"";t=1,a=e.custom_unit_label||""}o=l/m*t}return'<div class="price-per-unit-info">'+n.currency+o.toFixed(2)+" / "+a+"</div>"}function L(e){return e.sale_price&&parseFloat(e.sale_price)<parseFloat(e.price)?parseFloat(e.sale_price):parseFloat(e.price)}function x(e){var t=L(e),a=parseFloat(e.quantityStep)||1;return"piece"===(e.quantityUnit||e.quantity_unit||"piece")?t*e.quantity:t*(e.quantity/a)}function S(e){const t=e.selectedVariant?e.selectedVariant.id:null,a=t?e.id+"-"+t:e.id,n=c.find(e=>{const t=e.selectedVariant?e.selectedVariant.id:null;return(t?e.id+"-"+t:e.id)===a}),o=parseFloat(e.quantityStep||e.quantity_step)||1,r=e.quantity||o;if(n){n.quantity+=r;var i=(o.toString().split(".")[1]||"").length;n.quantity=parseFloat(n.quantity.toFixed(i))}else c.push({...e,quantity:r,quantityUnit:e.quantityUnit||e.quantity_unit||"piece",quantityStep:o,customUnitLabel:e.customUnitLabel||e.custom_unit_label||null});w(),q()}h();var I=[],_="all";async function P(){if(!document.getElementById("zappy-product-grid"))return;await h();const t=new URLSearchParams(window.location.search),a=t.get("page");let o=t.get("category");if(a){const e=new URL(a,window.location.origin);o=e.searchParams.get("category")||o}if(o)try{const t=await fetch(buildApiUrlWithLang("/api/ecommerce/storefront/categories?websiteId="+e)),a=await t.json();if(a.success&&a.data){const e=a.data.find(function(e){return e.id===o});if(e){const t=document.querySelector(".products-section"),a=t?t.querySelector("h1"):null;a&&(a.textContent=e.name),document.title=e.name+" - "+document.title.split(" - ").pop()}}}catch(e){console.warn("Failed to fetch category name",e)}!async function(t){const a=document.getElementById("zappy-product-grid");if(!a)return;_=t||"all",document.querySelectorAll(".filter-btn").forEach(function(e){e.classList.remove("active"),e.getAttribute("data-category")===_&&e.classList.add("active")});try{const t=new URLSearchParams(window.location.search),o=t.get("page");let r=(t.get("search")||"").trim(),i=t.get("category");if(o){const e=new URL(o,window.location.origin);i=e.searchParams.get("category")||i,r||(r=(e.searchParams.get("search")||"").trim())}let c=buildApiUrlWithLang("/api/ecommerce/storefront/products?websiteId="+e);i&&(c+="&categoryId="+i),r&&r.length>=2&&(c+="&search="+encodeURIComponent(r));const d=await fetch(c),l=await d.json();if(!l.success||!l.data?.length)return a.innerHTML='<div class="empty-cart">'+n.noProducts+"</div>",void(I=[]);I=l.data,window._zappyToolbarInitialized||(window._zappyToolbarInitialized=!0,function(t,a,n,o,r,i){var c=document.getElementById(t);if(!c)return;var d=!1;if(m.enabled&&m.options&&m.options.length>0){d=!0;var l=document.getElementById(o),u=document.getElementById(n);if(l&&u){l.style.display="";var h={popularity:s?"×¤×•×¤×•×œ×¨×™×•×ª":"Popularity",price_asc:s?"××—×™×¨: × ××•×š ×œ×’×‘×•×”":"Price: Low to High",price_desc:s?"××—×™×¨: ×’×‘×•×” ×œ× ××•×š":"Price: High to Low",name_asc:s?"×©×: ×-×ª":"Name: A to Z",name_desc:s?"×©×: ×ª-×":"Name: Z to A",newest:s?"×—×“×© ×‘×™×•×ª×¨":"Newest First"};["popularity","price_asc","price_desc","name_asc","name_desc","newest"].forEach(function(e){if(m.options.includes(e)&&h[e]){var t=document.createElement("option");t.value=e,t.textContent=h[e],u.appendChild(t)}}),u.value=f,u.addEventListener("change",function(){f=u.value,A()})}}if(g){d=!0;var b=document.getElementById(r);if(b){b.style.display="";var w=b.querySelectorAll(".view-btn");w.forEach(function(t){t.classList.toggle("active",t.getAttribute("data-view")===y),t.addEventListener("click",function(){y=t.getAttribute("data-view"),localStorage.setItem("zappy_view_mode_"+e,y),w.forEach(function(e){e.classList.toggle("active",e.getAttribute("data-view")===y)}),A()})})}}p.enabled&&p.filters&&p.filters.length>0&&(d=!0,function(e,t){var a=document.getElementById(e);if(!a)return;var n=p.filters||[],o="",r=s?"â‚ª":"$";if(o+='<div class="sidebar-header"><span class="sidebar-title">'+(s?"×¡×™× ×•×Ÿ":"Filters")+"</span>",o+='<div class="sidebar-header-actions">',o+='<button class="sidebar-clear-btn" id="'+e+'-clear" title="'+(s?"× ×§×” ×”×›×œ":"Clear all")+'">'+(s?"× ×§×” ×”×›×œ":"Clear all")+"</button>",o+='<button class="sidebar-mobile-close" id="'+e+'-mobile-close" title="'+(s?"×¡×’×•×¨":"Close")+'">&times;</button>',o+="</div></div>",n.includes("category")){var i={};I.forEach(function(e){e.category_id&&e.category_name&&(i[e.category_id]||(i[e.category_id]={name:e.category_name,count:0}),i[e.category_id].count++)});var c=Object.keys(i);c.length>0&&(o+='<div class="sidebar-section"><div class="sidebar-section-title">'+(s?"×§×˜×’×•×¨×™×•×ª":"Categories")+"</div>",c.forEach(function(e){o+='<label class="sidebar-item"><input type="checkbox" data-filter="category" value="'+e+'"> '+i[e].name+' <span class="count">('+i[e].count+")</span></label>"}),o+="</div>")}if(n.includes("brand")){var d={};I.forEach(function(e){e.brand&&(d[e.brand]=(d[e.brand]||0)+1)});var l=Object.keys(d);l.length>0&&(l.sort(),o+='<div class="sidebar-section"><div class="sidebar-section-title">'+(s?"××•×ª×’":"Brand")+"</div>",l.forEach(function(e){o+='<label class="sidebar-item"><input type="checkbox" data-filter="brand" value="'+e+'"> '+e+' <span class="count">('+d[e]+")</span></label>"}),o+="</div>")}if(n.includes("tags")){var u={};I.forEach(function(e){e.tags&&e.tags.length&&e.tags.forEach(function(e){u[e]=(u[e]||0)+1})});var m=Object.keys(u);m.length>0&&(m.sort(),o+='<div class="sidebar-section"><div class="sidebar-section-title">'+(s?"×ª×’×™×•×ª":"Tags")+"</div>",m.forEach(function(e){o+='<label class="sidebar-item"><input type="checkbox" data-filter="tag" value="'+e+'"> '+e+' <span class="count">('+u[e]+")</span></label>"}),o+="</div>")}if(n.includes("price")){var g=function(e){if(!e||0===e.length)return[];var t=Math.min.apply(null,e),a=Math.max.apply(null,e);if(t===a)return[];var n,o=a-t;n=o<=50?10:o<=200?25:o<=500?50:o<=1e3?100:o<=5e3?500:1e3;var r=Math.floor(t/n)*n,i=[];for(;r<a;){var s=r+n,c=e.filter(function(e){return e>=r&&e<s}).length;r+n>=a&&(c=e.filter(function(e){return e>=r}).length),c>0&&i.push({min:r,max:s,count:c}),r=s}return i}(I.map(function(e){return parseFloat(e.price)||0}).filter(function(e){return e>0}));g.length>0&&(o+='<div class="sidebar-section"><div class="sidebar-section-title">'+(s?"×˜×•×•×— ××—×™×¨×™×":"Price Range")+"</div>",g.forEach(function(t,a){var n=r+F(t.min)+" â€“ "+r+F(t.max);o+='<label class="sidebar-item"><input type="radio" name="'+e+'-price-range" data-filter="price-range" data-min="'+t.min+'" data-max="'+t.max+'" value="'+a+'"> '+n+' <span class="count">('+t.count+")</span></label>"}),o+="</div>")}if(n.includes("sale")){var f=I.filter(function(e){return e.sale_price&&parseFloat(e.sale_price)<parseFloat(e.price)}).length;f>0&&(o+='<div class="sidebar-section"><div class="sidebar-section-title">'+(s?"××‘×¦×¢×™×":"On Sale")+"</div>",o+='<label class="sidebar-item"><input type="checkbox" data-filter="sale"> '+(s?"×”×¦×’ ××•×¦×¨×™× ×‘××‘×¦×¢":"Show sale items")+' <span class="count">('+f+")</span></label>",o+="</div>")}a.innerHTML=o,a.style.display="";var y=document.getElementById(t),h=document.createElement("div");h.className="sidebar-overlay",h.id=e+"-overlay",a.parentNode.insertBefore(h,a),y&&(y.style.display="",y.addEventListener("click",function(){a.classList.add("open"),h.classList.add("active")}));function b(){a.classList.remove("open"),h.classList.remove("active")}h.addEventListener("click",b);var w=document.getElementById(e+"-mobile-close");w&&w.addEventListener("click",b);a.querySelectorAll('input[data-filter="category"]').forEach(function(e){e.addEventListener("change",function(){v.categories=Array.from(a.querySelectorAll('input[data-filter="category"]:checked')).map(function(e){return e.value}),A()})}),a.querySelectorAll('input[data-filter="brand"]').forEach(function(e){e.addEventListener("change",function(){v.brands=Array.from(a.querySelectorAll('input[data-filter="brand"]:checked')).map(function(e){return e.value}),A()})}),a.querySelectorAll('input[data-filter="tag"]').forEach(function(e){e.addEventListener("change",function(){v.tags=Array.from(a.querySelectorAll('input[data-filter="tag"]:checked')).map(function(e){return e.value}),A()})}),a.querySelectorAll('input[data-filter="sale"]').forEach(function(e){e.addEventListener("change",function(){v.sale=e.checked,A()})}),a.querySelectorAll('input[data-filter="price-range"]').forEach(function(e){e.addEventListener("change",function(){v.priceMin=parseFloat(e.getAttribute("data-min")),v.priceMax=parseFloat(e.getAttribute("data-max")),A()})});var C=document.getElementById(e+"-clear");C&&C.addEventListener("click",function(){v={categories:[],brands:[],tags:[],priceMin:null,priceMax:null,sale:!1},a.querySelectorAll('input[type="checkbox"]').forEach(function(e){e.checked=!1}),a.querySelectorAll('input[type="radio"]').forEach(function(e){e.checked=!1}),A()})}(a,i));d&&(c.style.display="")}("products-toolbar","product-sidebar","sort-select","sort-control","view-toggle","sidebar-toggle-btn")),A(a),"function"==typeof _syncCardFavorites&&_syncCardFavorites()}catch(e){console.error("Failed to load products",e),a.innerHTML='<div class="empty-cart">'+n.errorLoading+"</div>"}}("all")}function A(e){if(e||(e=document.getElementById("zappy-product-grid")),e){var t=I.slice();p.enabled&&(v.categories.length>0&&(t=t.filter(function(e){return v.categories.includes(e.category_id)})),v.brands&&v.brands.length>0&&(t=t.filter(function(e){return e.brand&&v.brands.includes(e.brand)})),v.tags.length>0&&(t=t.filter(function(e){return e.tags&&e.tags.some(function(e){return v.tags.includes(e)})})),null!=v.priceMin&&(t=t.filter(function(e){return parseFloat(e.price)>=v.priceMin})),null!=v.priceMax&&(t=t.filter(function(e){return parseFloat(e.price)<=v.priceMax})),v.sale&&(t=t.filter(function(e){return e.sale_price&&parseFloat(e.sale_price)<parseFloat(e.price)}))),f&&"default"!==f&&(t=t.slice().sort(function(e,t){switch(f){case"popularity":return(parseInt(t.purchase_count)||0)-(parseInt(e.purchase_count)||0);case"price_asc":return parseFloat(e.price)-parseFloat(t.price);case"price_desc":return parseFloat(t.price)-parseFloat(e.price);case"name_asc":return(e.name||"").localeCompare(t.name||"");case"name_desc":return(t.name||"").localeCompare(e.name||"");case"newest":return new Date(t.created_at)-new Date(e.created_at);default:return 0}}));var a=document.getElementById("products-count");if(a){var i=s?t.length+" ××•×¦×¨×™×":"Showing "+t.length+" products";a.textContent=i}0!==t.length?function(e,t){var a="list"===y?" view-list":"";e.className="product-grid layout-"+l+a,e.setAttribute("data-zappy-auto-grid","true"),e.innerHTML=t.map(function(e){var t=!1!==e.custom_fields?.showPrice,a=e.sale_price&&parseFloat(e.sale_price)<parseFloat(e.price),i=parseInt(e.variant_count||0,10),s=parseInt(e.variant_price_count||0,10),c=parseFloat(e.variant_min_price),d=parseFloat(e.variant_max_price),u=i>1&&s>1&&Number.isFinite(c)&&Number.isFinite(d)&&c!==d,p=o("startingAt",n.startingAt||"Starting at"),m=t?u?p+" "+n.currency+c.toFixed(2):a?n.currency+parseFloat(e.sale_price).toFixed(2)+' <span class="original-price">'+n.currency+parseFloat(e.price).toFixed(2)+"</span>":n.currency+parseFloat(e.price).toFixed(2):"",g=e.images&&e.images[0]?B(e.images[0]):"",f=[];e.tags&&e.tags.length&&e.tags.forEach(function(e){var t=e.toLowerCase();"sale"===t||"××‘×¦×¢"===t?f.push('<span class="product-tag tag-sale">'+e+"</span>"):"new"===t||"×—×“×©"===t?f.push('<span class="product-tag tag-new">'+e+"</span>"):"featured"===t||"××•××œ×¥"===t?f.push('<span class="product-tag tag-featured">'+e+"</span>"):f.push('<span class="product-tag">'+e+"</span>")});var y=f.length>0?'<div class="product-tags">'+f.join("")+"</div>":"",v="",h=g?'<img src="'+g+'" alt="'+e.name+'">':'<div class="no-image-placeholder">ğŸ“¦</div>',b=o("addToCart",n.addToCart),w=(o("viewDetails",n.viewDetails),k(e)),C=t?'<div class="price">'+m+"</div>"+w:"",E='<button class="card-favorite-btn" data-product-id="'+e.id+'" onclick="event.preventDefault(); event.stopPropagation(); toggleCardFavorite(this, \''+e.id+'\')" title="×©××•×¨ ×œ××•×¢×“×¤×™×"><svg class="heart-outline" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none"><path d="M14.7917 0.833C12.705 0.833 10.811 2.376 10 4.462C9.189 2.375 7.295 0.833 5.208 0.833C2.337 0.833 0 3.17 0 6.042C0 11.675 8.128 17.767 9.758 18.93L10 19.104L10.243 18.93C11.873 17.767 20 11.674 20 6.042C20 3.17 17.663 0.833 14.792 0.833ZM10 18.078C5.716 14.965 0.833 10.019 0.833 6.042C0.833 3.629 2.796 1.667 5.208 1.667C7.498 1.667 9.583 4.05 9.583 6.667H10.417C10.417 4.05 12.502 1.667 14.792 1.667C17.204 1.667 19.167 3.629 19.167 6.042C19.167 10.019 14.284 14.965 10 18.078Z" fill="currentColor"/></svg><svg class="heart-filled" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20"><path d="M14.7917 0.833C12.705 0.833 10.811 2.376 10 4.462C9.189 2.375 7.295 0.833 5.208 0.833C2.337 0.833 0 3.17 0 6.042C0 11.675 8.128 17.767 9.758 18.93L10 19.104L10.243 18.93C11.873 17.767 20 11.674 20 6.042C20 3.17 17.663 0.833 14.792 0.833Z" fill="#e74c3c"/></svg></button>';if("compact"===l)v=y+'<a href="/product/'+(e.slug||e.id)+'" class="product-card-link">'+h+'<div class="card-content"><h3>'+e.name+"</h3>"+C+"</div></a>"+E;else if("detailed"===l){var L=r(e.description||""),x='<button class="add-to-cart" onclick="event.stopPropagation(); window.zappyHandleAddToCart('+JSON.stringify(e).replace(/"/g,"&quot;")+')">'+b+"</button>";v=y+'<a href="/product/'+(e.slug||e.id)+'" class="product-card-link">'+h+'<div class="card-content"><h3>'+e.name+"</h3><p>"+L+"</p>"+C+"</div></a>"+x+E}else{var S=r(e.description||"");v=y+'<a href="/product/'+(e.slug||e.id)+'" class="product-card-link">'+h+'<div class="card-content"><h3>'+e.name+"</h3><p>"+S+"</p>"+C+"</div></a>"+E}return'<div class="product-card '+l+'" data-product-id="'+e.id+'">'+v+"</div>"}).join("")}(e,t):e.innerHTML='<div class="empty-cart">'+n.noProducts+"</div>"}}function F(e){return e%1==0?e.toString():e.toFixed(2)}function B(e){if(!e)return"";if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("data:"))return e;if(e.startsWith("/api/website/preview"))return e;if(e.startsWith("/preview-fullscreen/"))return"/api/website"+e;if(e.startsWith("/preview/"))return"/api/website"+e;var t=function(){var e=window.ZAPPY_WEBSITE_ID||window.ZAPPY_CONFIG&&window.ZAPPY_CONFIG.websiteId,t=window.location&&window.location.pathname?window.location.pathname:"";return e&&t?-1!==t.indexOf("/api/website/preview-fullscreen/")?"/api/website/preview-fullscreen/"+e+"/assets/":-1!==t.indexOf("/api/website/preview/")?"/api/website/preview/"+e+"/assets/":-1!==t.indexOf("/preview-fullscreen/")?"/api/website/preview-fullscreen/"+e+"/assets/":-1!==t.indexOf("/preview/")?"/api/website/preview/"+e+"/assets/":"":""}(),a=e.replace(/^\/?assets\//,"");return t?t+a:e.startsWith("/")?e:"/"+e}function T(){const e=document.getElementById("cart-drawer-items"),t=document.getElementById("cart-drawer-total");if(!e)return;if(0===c.length)return e.innerHTML='<div class="empty-cart"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/></svg><p>'+n.emptyCart+"</p></div>",void(t&&(t.textContent=n.currency+"0"));let a=0;e.innerHTML=c.map(e=>{const t=x(e);a+=t;var o="";if(e.selectedVariant&&e.selectedVariant.attributes&&"object"==typeof e.selectedVariant.attributes){var r={color:n.color||"Color",size:n.size||"Size",material:n.material||"Material",style:n.style||"Style",weight:n.weight||"Weight",capacity:n.capacity||"Capacity",length:n.length||"Length"},i=[];Object.entries(e.selectedVariant.attributes).forEach(function(e){var t=e[0],a=e[1];if(a){var n=r[t.toLowerCase()]||t;if("color"===t.toLowerCase()){var o=/^#[0-9A-Fa-f]{3,6}$/.test(a)?a:a.toLowerCase();i.push('<span class="cart-item-attr"><span class="cart-item-attr-label">'+n+':</span> <span class="cart-item-color-swatch" title="'+a+'" style="display:inline-block;width:14px;height:14px;border-radius:50%;background-color:'+o+";border:1px solid rgba(0,0,0,0.15);vertical-align:middle;margin-"+("rtl"===document.documentElement.dir?"right":"left")+':4px;"></span></span>')}else i.push('<span class="cart-item-attr"><span class="cart-item-attr-label">'+n+":</span> "+a+"</span>")}}),i.length>0&&(o='<div class="cart-item-variant">'+i.join(' <span class="cart-item-attr-sep">â€¢</span> ')+"</div>")}else e.variantName&&(o='<div class="cart-item-variant">'+e.variantName+"</div>");var s=e.id+(e.selectedVariant?"-"+e.selectedVariant.id:"");return'<div class="cart-item" data-item-id="'+s+'"><img src="'+(B(e.images?.[0])||"data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%2270%22 height=%2270%22 viewBox=%220 0 70 70%22%3E%3Crect fill=%22%23f3f4f6%22 width=%2270%22 height=%2270%22/%3E%3Cpath fill=%22%239ca3af%22 d=%22M28 25h14v14H28z%22/%3E%3C/svg%3E")+'" alt="'+e.name+'"><div class="cart-item-info"><div class="cart-item-name">'+e.name+"</div>"+o+'<div class="cart-item-price">'+n.currency+t.toFixed(2)+'</div><div class="cart-item-qty"><button onclick="window.zappyUpdateQty(\''+s+"', -1)\">âˆ’</button><span>"+E(e)+"</span><button onclick=\"window.zappyUpdateQty('"+s+'\', 1)">+</button></div></div><button class="cart-item-remove" onclick="window.zappyRemoveFromCart(\''+s+'\')"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg></button></div>'}).join(""),t&&(t.textContent=n.currency+a.toFixed(2))}function q(){var e=document.getElementById("cart-drawer"),t=document.getElementById("cart-drawer-overlay");if(!e){var a='<div class="cart-drawer-overlay" id="cart-drawer-overlay"></div><aside class="cart-drawer" id="cart-drawer"><div class="cart-drawer-header"><h2>'+n.yourCart+'</h2><button type="button" class="cart-drawer-close" id="cart-drawer-close"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg></button></div><div class="cart-drawer-body" id="cart-drawer-items"><div class="empty-cart">'+n.emptyCart+'</div></div><div class="cart-drawer-footer"><div class="cart-drawer-total"><span>'+n.total+':</span><span id="cart-drawer-total">'+n.currency+'0</span></div><a href="/checkout" class="cart-drawer-checkout">'+n.proceedToCheckout+"</a></div></aside>";document.body.insertAdjacentHTML("beforeend",a),e=document.getElementById("cart-drawer"),t=document.getElementById("cart-drawer-overlay");var o=document.getElementById("cart-drawer-close");o&&o.addEventListener("click",z),t&&t.addEventListener("click",z)}e&&(e.classList.add("active"),document.body.style.overflow="hidden"),t&&t.classList.add("active"),T()}function z(){var e=document.getElementById("cart-drawer"),t=document.getElementById("cart-drawer-overlay");e&&e.classList.remove("active"),t&&t.classList.remove("active"),document.body.style.overflow=""}function M(){const e=document.getElementById("cart-items"),t=document.getElementById("cart-total");if(!e)return;if(0===c.length)return e.innerHTML='<div class="empty-cart">'+n.emptyCart+"</div>",void(t&&(t.textContent=n.currency+"0"));let a=0;e.innerHTML=c.map(e=>{const t=x(e);a+=t;const o=L(e),r=e.variantName?'<br><span style="font-size:12px;color:#6b7280;">'+e.variantName+"</span>":"",i=e.selectedVariant?e.id+"-"+e.selectedVariant.id:e.id;return'<div class="cart-item"><img src="'+(B(e.images?.[0])||"")+'" alt="'+e.name+'"><div><strong>'+e.name+"</strong>"+r+"<br>"+n.currency+o.toFixed(2)+" x "+E(e)+"</div><button onclick=\"window.zappyRemoveFromCart('"+i+"')\">"+n.remove+"</button></div>"}).join(""),t&&(t.textContent=n.currency+a.toFixed(2))}window.resolveProductImageUrl=B,window.getPricePerUnitHtml=k,window.zappyUpdateQty=function(e,t){const a=c.find(t=>{const a=t.selectedVariant?t.selectedVariant.id:null;return(a?t.id+"-"+a:t.id)===e});if(a){const o=parseFloat(a.quantityStep)||1;a.quantity+=t*o;var n=(o.toString().split(".")[1]||"").length;a.quantity=parseFloat(a.quantity.toFixed(n)),a.quantity<=0&&(c=c.filter(t=>{const a=t.selectedVariant?t.selectedVariant.id:null;return(a?t.id+"-"+a:t.id)!==e})),w(),T()}};let N=null,O=[];let D=null,R=[],U=!1;function H(e,t,a){var n=document.getElementById(e),o=document.getElementById(t);n&&n.classList.add("input-error"),o&&(o.textContent=a,o.classList.add("visible"))}function j(e,t){var a=document.getElementById(e),n=document.getElementById(t);a&&a.classList.remove("input-error"),n&&(n.textContent="",n.classList.remove("visible"))}function V(){document.querySelectorAll(".field-error").forEach(function(e){e.textContent="",e.classList.remove("visible")}),document.querySelectorAll(".input-error").forEach(function(e){e.classList.remove("input-error")}),document.querySelectorAll(".has-error").forEach(function(e){e.classList.remove("has-error")})}function W(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function Z(){const t=document.getElementById("place-order-btn");if(t){["customer-name","customer-email","customer-phone","shipping-street","shipping-city"].forEach(function(e){var t=document.getElementById(e);t&&t.addEventListener("input",function(){j(e,e+"-error")})});var r=document.getElementById("terms-checkbox");r&&r.addEventListener("change",function(){var e=document.querySelector(".terms-checkbox-wrapper");e&&e.classList.remove("has-error"),j("","terms-checkbox-error")}),t.addEventListener("click",async function(r){r.preventDefault(),V();var i=!1,d=null;if(!c||0===c.length)return void alert(n.cartEmpty||(s?"×”×¢×’×œ×” ×¨×™×§×”":"Your cart is empty"));const l=document.getElementById("customer-name")?.value?.trim()||"",u=document.getElementById("customer-email")?.value||"",p=b(u),m=document.getElementById("customer-phone")?.value?.trim()||"";if(l||(H("customer-name","customer-name-error",o("nameRequired",n.nameRequired||(s?"× × ×œ×”×–×™×Ÿ ×©× ××œ×":"Please enter your full name"))),i=!0,d||(d="customer-name")),u.trim()?W(u.trim())||(H("customer-email","customer-email-error",o("emailInvalid",n.emailInvalid||(s?"×›×ª×•×‘×ª ××™××™×™×œ ×œ× ×ª×§×™× ×”":"Please enter a valid email address"))),i=!0,d||(d="customer-email")):(H("customer-email","customer-email-error",o("emailRequired",n.emailRequired||(s?"× × ×œ×”×–×™×Ÿ ×›×ª×•×‘×ª ××™××™×™×œ":"Please enter your email address"))),i=!0,d||(d="customer-email")),m||(H("customer-phone","customer-phone-error",o("phoneRequired",n.phoneRequired||(s?"× × ×œ×”×–×™×Ÿ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ":"Please enter your phone number"))),i=!0,d||(d="customer-phone")),!N){var g=document.getElementById("shipping-method-error");g&&(g.textContent=o("shippingRequired",n.shippingRequired||(s?"× × ×œ×‘×—×•×¨ ×©×™×˜×ª ××©×œ×•×—":"Please select a shipping method")),g.classList.add("visible")),i=!0,d||(d="shipping-methods")}const f=document.getElementById("shipping-street")?.value?.trim()||"",y=document.getElementById("shipping-apartment")?.value?.trim()||"",v=document.getElementById("shipping-city")?.value?.trim()||"",h=document.getElementById("shipping-zip")?.value?.trim()||"";if(N&&!N.is_pickup&&(f||(H("shipping-street","shipping-street-error",o("streetRequired",n.streetRequired||(s?"× × ×œ×”×–×™×Ÿ ×¨×—×•×‘ ×•××¡×¤×¨":"Please enter your street address"))),i=!0,d||(d="shipping-street")),v||(H("shipping-city","shipping-city-error",o("cityRequired",n.cityRequired||(s?"× × ×œ×”×–×™×Ÿ ×¢×™×¨":"Please enter your city"))),i=!0,d||(d="shipping-city"))),!U||!D)return void alert(n.paymentNotConfigured||(s?"×ª×©×œ×•× ××§×•×•×Ÿ ×œ× ××•×’×“×¨. ×¦×¨×• ×§×©×¨ ×¢× ×‘×¢×œ ×”××ª×¨.":"Online payment not configured. Please contact the store owner."));var w=document.getElementById("terms-checkbox");if(!w||!w.checked){var C=document.querySelector(".terms-checkbox-wrapper");C&&C.classList.add("has-error");var E=document.getElementById("terms-checkbox-error");E&&(E.textContent=o("pleaseAcceptTerms",n.pleaseAcceptTerms||(s?"× × ×œ××©×¨ ××ª ×ª× ××™ ×”×©×™××•×©":"Please accept the terms and conditions")),E.classList.add("visible")),i=!0,d||(d="terms-checkbox")}if(i){if(d){var k=document.getElementById(d);k&&(k.scrollIntoView({behavior:"smooth",block:"center"}),k.focus&&k.focus())}return void console.log("[E-COMMERCE] Validation failed, stopping checkout")}t.disabled=!0,t.innerHTML=s?"××¢×‘×“...":"Processing...";const L=document.getElementById("save-address-checkbox"),x="zappy_customer_token_"+e,S=localStorage.getItem(x);if(L&&L.checked&&S&&f&&v)try{const t=await fetch(a("/api/ecommerce/customers/me?websiteId="+encodeURIComponent(e)),{headers:{Authorization:"Bearer "+S}});if(t.ok){const n=await t.json();if(n.success&&n.data){const t=n.data.addresses||[],o={id:"addr_"+Date.now(),label:"home",street:f,apartment:y||"",city:v,zip:h||"",isDefault:!0},r=t.map(function(e){return Object.assign({},e,{isDefault:!1})}),i=r.findIndex(function(e){return e.street===o.street&&e.city===o.city});i>=0?r[i]=Object.assign({},r[i],{apartment:o.apartment,zip:o.zip,isDefault:!0}):r.unshift(o),await fetch(a("/api/ecommerce/customers/me"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+S},body:JSON.stringify({websiteId:e,addresses:r})}),console.log("[E-COMMERCE] Address saved for next time")}}}catch(e){console.warn("[E-COMMERCE] Failed to save address:",e)}try{let t=localStorage.getItem("zappy_session_id");t||(t="sess_"+Math.random().toString(36).substr(2,9)+"_"+Date.now(),localStorage.setItem("zappy_session_id",t));const n=await fetch(a("/api/ecommerce/checkout/init"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({websiteId:e,sessionId:t,customerEmail:p,customerName:l,customerPhone:m,shippingAddress:{street:f,apartment:y,city:v,zip:h},shippingMethodId:N.id,shippingCost:N.price||0,shippingMethodName:N.name||"××©×œ×•×—",cart:c,couponCode:G?G.code:null,couponDiscount:Q,paymentMethodId:D?D.id:null})}),o=await n.json();if(!o.success||!o.data?.checkoutUrl)throw new Error(o.error||"Checkout initialization failed");const r=o.data.reference;if(r){const e=K(),t=parseFloat(N.price)||0,a=parseFloat(Q)||0,n={cartItems:c,subtotal:e,shippingCost:t,discount:a,total:e+t-a,shippingMethodName:N.name||"",shippingIsPickup:N.is_pickup||!1,paymentMethodName:D?s?D.name:D.nameEn:"",customerName:l,customerEmail:p,orderDate:(new Date).toISOString()};localStorage.setItem("zappy_pending_order_"+r,JSON.stringify(n))}if("greeninvoice"===o.data.provider){const e=document.getElementById("checkout-payment-section"),t=document.getElementById("greeninvoice-iframe-container"),a=document.getElementById("greeninvoice-iframe");if(e&&t&&a)return e.classList.add("fade-out"),t.style.display="block",t.querySelector(".greeninvoice-iframe-wrapper").innerHTML='<div class="greeninvoice-loading"><div class="greeninvoice-loading-spinner"></div><span>'+(s?"×˜×•×¢×Ÿ ×¢××•×“ ×ª×©×œ×•×...":"Loading payment page...")+"</span></div>",window.addEventListener("message",function(e){e.data&&"zappy_order_success"===e.data.type&&e.data.url&&(window.location.href=e.data.url)}),void setTimeout(function(){e.style.display="none",t.querySelector(".greeninvoice-iframe-wrapper").innerHTML='<iframe id="greeninvoice-iframe" src="'+o.data.checkoutUrl+'" frameborder="0" allowpaymentrequest="true" style="width: 100%; height: 600px; border: none;"></iframe>'},300)}window.location.href=o.data.checkoutUrl}catch(e){console.error("Checkout failed:",e),alert(s?"×©×’×™××” ×‘×ª×”×œ×™×š ×”×ª×©×œ×•×. × ×¡×• ×©×•×‘.":"Checkout failed. Please try again."),t.disabled=!1,t.innerHTML=n.placeOrder||(s?"×‘×¦×¢ ×”×–×× ×”":"Place Order")}}),function(){const t=document.getElementById("customer-name"),n=document.getElementById("customer-email"),o=document.getElementById("customer-phone");if(!t||!n)return;const r="zappy_customer_token_"+e,i="zappy_customer_email_"+e,s=localStorage.getItem(r),c=localStorage.getItem(i),d=document.getElementById("checkout-login-prompt"),l=document.getElementById("checkout-login-link"),u=document.getElementById("checkout-logged-in"),p=document.getElementById("checkout-logged-in-name"),m=document.getElementById("checkout-logged-in-email"),g=document.getElementById("checkout-logout-btn");l&&l.addEventListener("click",function(){sessionStorage.setItem("zappy_login_return","/checkout")});const f=(e,t)=>{d&&(d.style.display="none"),u&&(u.style.display="flex"),p&&(p.textContent=e||""),m&&(m.textContent=t?"("+t+")":"")},y=()=>{u&&(u.style.display="none"),d&&(d.style.display="flex"),p&&(p.textContent=""),m&&(m.textContent="")};c&&!n.value&&(n.value=c);if(!s)return void y();fetch(a("/api/ecommerce/customers/me?websiteId="+encodeURIComponent(e)),{headers:{Authorization:"Bearer "+s}}).then(function(e){if(!e.ok)throw new Error("Unauthorized");return e.json()}).then(function(e){if(!e.success||!e.data)throw new Error("Invalid response");const a=e.data,r=a.name||a.email||c||"";if(f(r,a.email||c||""),a.name&&!t.value&&(t.value=a.name),a.email&&!n.value&&(n.value=a.email),a.phone&&o&&!o.value&&(o.value=a.phone),a.addresses&&a.addresses.length>0){const e=a.addresses.find(function(e){return e.isDefault})||a.addresses[0],t=document.getElementById("shipping-street"),n=document.getElementById("shipping-apartment"),o=document.getElementById("shipping-city"),r=document.getElementById("shipping-zip");e.street&&t&&!t.value&&(t.value=e.street),e.apartment&&n&&!n.value&&(n.value=e.apartment),e.city&&o&&!o.value&&(o.value=e.city),e.zip&&r&&!r.value&&(r.value=e.zip)}}).catch(function(){localStorage.removeItem(r),localStorage.removeItem(i),y()}),g&&g.addEventListener("click",function(){localStorage.removeItem(r),localStorage.removeItem(i),y()})}(),document.querySelectorAll(".checkout-next-btn").forEach(function(e){e.addEventListener("click",function(){var t=e.closest(".checkout-accordion-panel");if(t){var a=t.dataset.step,r=e.dataset.next;if(function(e){V();var t=!1,a=null;if("contact"===e){var r=(document.getElementById("customer-name")||{}).value||"",i=(document.getElementById("customer-email")||{}).value||"",s=(document.getElementById("customer-phone")||{}).value||"";r.trim()||(H("customer-name","customer-name-error",o("nameRequired",n.nameRequired)),t=!0,a||(a="customer-name")),i.trim()?W(i.trim())||(H("customer-email","customer-email-error",o("emailInvalid",n.emailInvalid)),t=!0,a||(a="customer-email")):(H("customer-email","customer-email-error",o("emailRequired",n.emailRequired)),t=!0,a||(a="customer-email")),s.trim()||(H("customer-phone","customer-phone-error",o("phoneRequired",n.phoneRequired)),t=!0,a||(a="customer-phone"))}if("shipping"===e){if(!N){var c=document.getElementById("shipping-method-error");c&&(c.textContent=o("shippingRequired",n.shippingRequired),c.classList.add("visible")),t=!0,a||(a="shipping-methods")}if(N&&!N.is_pickup){var d=(document.getElementById("shipping-street")||{}).value||"",l=(document.getElementById("shipping-city")||{}).value||"";d.trim()||(H("shipping-street","shipping-street-error",o("streetRequired",n.streetRequired)),t=!0,a||(a="shipping-street")),l.trim()||(H("shipping-city","shipping-city-error",o("cityRequired",n.cityRequired)),t=!0,a||(a="shipping-city"))}}if(!("payment"!==e||U&&D))return alert(n.paymentNotConfigured||"Online payment not configured"),!1;if(t&&a){var u=document.getElementById(a);u&&(u.scrollIntoView({behavior:"smooth",block:"center"}),u.focus&&u.focus())}return!t}(a)){if(J[a]=!0,t.classList.add("completed"),t.classList.remove("expanded"),"done"===r)$();else{var i=document.querySelector('.checkout-accordion-panel[data-step="'+r+'"]');i&&(document.querySelectorAll(".checkout-accordion-panel").forEach(function(e){"items"!==e.dataset.step&&e.classList.remove("expanded")}),i.classList.add("expanded"),setTimeout(function(){i.scrollIntoView({behavior:"smooth",block:"start"})},100))}$()}}})}),Y()}}window.zappySelectPayment=function(e){D=R.find(t=>t.id===e),document.querySelectorAll(".payment-option").forEach(t=>{t.classList.toggle("selected",t.dataset.methodId===e)})};var J={contact:!1,shipping:!1,payment:!1};function $(){var e=document.getElementById("place-order-btn");if(e){var t=J.contact&&J.shipping&&J.payment;e.disabled=!t}}function Y(){var e=document.getElementById("checkout-items-count");if(e&&c){var t=c.reduce(function(e,t){return e+(t.quantity||1)},0);e.textContent="("+t+")"}var a=document.getElementById("checkout-items-thumbs");a&&c&&c.length>0&&(a.innerHTML=c.slice(0,5).map(function(e){var t=e.image||e.images&&e.images[0]||"";return'<div class="checkout-thumb-item">'+(t?'<img src="'+t+'" alt="'+(e.name||"")+'">':'<div class="checkout-thumb-placeholder"></div>')+"</div>"}).join("")+(c.length>5?'<div class="checkout-thumb-more">+'+(c.length-5)+"</div>":""))}window.zappyToggleAccordion=function(e){var t=document.querySelectorAll(".checkout-accordion-panel"),a=document.querySelector('.checkout-accordion-panel[data-step="'+e+'"]');if(a){var n=a.classList.contains("expanded");"items"!==e&&t.forEach(function(e){"items"!==e.dataset.step&&e.classList.remove("expanded")}),n?"items"===e&&a.classList.remove("expanded"):a.classList.add("expanded")}},window.zappyCheckoutQty=function(e,t){c&&c[e]&&(c[e].quantity=Math.max(1,(c[e].quantity||1)+t),w(),C(),X(),Y())},window.zappyCheckoutRemove=function(e){c&&(c.splice(e,1),w(),C(),X(),Y())};let G=null,Q=0;function K(){return c.reduce((e,t)=>e+x(t),0)}function X(){const e=document.getElementById("subtotal"),t=document.getElementById("vat-amount"),a=document.getElementById("shipping-cost"),o=document.getElementById("discount"),r=document.getElementById("discount-row"),i=document.getElementById("order-total"),s=document.getElementById("order-items"),l=K();let u=function(){if(!N)return 0;const e=K();return N.conditions?.freeAbove&&e>=N.conditions.freeAbove?0:parseFloat(N.price)||0}();G&&("percentage"===G.type?Q=l*G.value/100:"fixed"===G.type?Q=G.value:"free_shipping"===G.type&&(Q=0,u=0),Q>l&&(Q=l));const p=l+u-Q,m=p*d/(1+d);e&&(e.textContent=n.currency+l.toFixed(2)),t&&(t.textContent=n.currency+m.toFixed(2)),a&&(a.textContent=0===u?n.free||"FREE":n.currency+u.toFixed(2)),r&&o&&(Q>0?(r.style.display="flex",o.textContent="-"+n.currency+Q.toFixed(2)):r.style.display="none"),i&&(i.textContent=n.currency+p.toFixed(2)),s&&(s.innerHTML=c.map(function(e,t){var a=x(e),o=e.variantName?'<span class="checkout-item-variant">'+e.variantName+"</span>":"",r=e.image||e.images&&e.images[0]||"";return'<div class="order-item checkout-cart-item" data-item-index="'+t+'">'+(r?'<img class="checkout-item-thumb" src="'+r+'" alt="'+(e.name||"")+'">':'<div class="checkout-item-thumb checkout-item-thumb-empty"></div>')+'<div class="checkout-item-info"><div class="checkout-item-name">'+e.name+"</div>"+o+'<div class="checkout-item-qty-control"><button type="button" class="checkout-qty-btn" onclick="window.zappyCheckoutQty('+t+', -1)">âˆ’</button><span class="checkout-qty-value">'+E(e)+'</span><button type="button" class="checkout-qty-btn" onclick="window.zappyCheckoutQty('+t+', 1)">+</button></div></div><div class="checkout-item-price">'+n.currency+a.toFixed(2)+'</div><button type="button" class="checkout-item-remove" onclick="window.zappyCheckoutRemove('+t+')" title="'+(n.remove||"Remove")+'"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg></button></div>'}).join("")),Y()}window.zappySelectShipping=function(e){N=O.find(t=>t.id===e),document.querySelectorAll(".shipping-option").forEach(t=>{t.classList.toggle("selected",t.dataset.methodId===e)});var t=document.getElementById("shipping-method-error");t&&(t.textContent="",t.classList.remove("visible"));const a=document.getElementById("shipping-address-section");a&&(N&&N.is_pickup?a.style.display="none":a.style.display="block"),X()},window.zappyAddToCart=S,window.zappyHandleAddToCart=function(t){if(parseInt(t.variant_count||0)>0){const a="/product/"+(t.slug||t.id),n=window.location.href;if(n.includes("/api/website/preview")){const t=n.includes("preview-fullscreen")?"preview-fullscreen":"preview";window.location.href="/api/website/"+t+"/"+e+"?page="+encodeURIComponent(a)}else window.location.href=a}else S(t)},window.zappyRemoveFromCart=function(e){c=c.filter(t=>{const a=t.selectedVariant?t.selectedVariant.id:null;return(a?t.id+"-"+a:t.id)!==e}),w(),M(),T()};let ee=[],te=null;async function ae(){try{const t=await fetch(buildApiUrlWithLang("/api/ecommerce/storefront/products?websiteId="+e)),a=await t.json();a.success&&a.data&&(ee=a.data)}catch(e){console.error("Failed to load products for search",e)}}function ne(e){if(!e||e.length<2)return[];const t=e.toLowerCase();return ee.filter(e=>e.name?.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t)||e.sku?.toLowerCase().includes(t)||e.tags?.some(e=>e.toLowerCase().includes(t))).slice(0,6)}function oe(){const e=document.getElementById("nav-search-input"),t=document.getElementById("nav-search-btn"),a=document.getElementById("nav-search-results");if(e&&(ae(),e.addEventListener("input",function(){const e=this.value.trim();clearTimeout(te),e.length<2?a&&a.classList.remove("active"):te=setTimeout(function(){!function(e,t){const a=document.getElementById("nav-search-results");if(!a)return;if(0===e.length)return a.innerHTML='<div class="search-no-results">'+(n.noProducts||"No products found")+"</div>",void a.classList.add("active");var o=window.location.pathname.includes("preview-fullscreen");let r=e.map(function(e){var t;if(o){var a=new URL(window.location.href);a.searchParams.set("page","/product/"+(e.slug||e.id)),a.searchParams.delete("search"),t=a.toString()}else t="/product/"+(e.slug||e.id);return'<a href="'+t+'" class="search-result-item">'+(e.images?.[0]?'<img src="'+B(e.images[0])+'" alt="'+e.name+'" class="search-result-img">':'<div class="search-result-img"></div>')+'<div class="search-result-info"><div class="search-result-name">'+e.name+'</div><div class="search-result-price">'+n.currency+e.price+"</div></div></a>"}).join("");if(ee.filter(e=>e.name?.toLowerCase().includes(t.toLowerCase())).length>6){var i;if(window.location.pathname.includes("preview-fullscreen")){var s=new URL(window.location.href);s.searchParams.set("page","/products"),s.searchParams.set("search",t),i=s.toString()}else i="/products?search="+encodeURIComponent(t);r+='<a href="'+i+'" class="search-view-all">'+(n.viewAllResults||"View all results")+" â†’</a>"}a.innerHTML=r,a.classList.add("active")}(ne(e),e)},200)}),t&&t.addEventListener("click",function(){const t=e.value.trim();if(t.length>=2){if(window.location.pathname.includes("preview-fullscreen")){const e=new URL(window.location.href);e.searchParams.set("page","/products"),e.searchParams.set("search",t),window.location.href=e.toString()}else window.location.href="/products?search="+encodeURIComponent(t)}}),e.addEventListener("keypress",function(e){if("Enter"===e.key){const e=this.value.trim();if(e.length>=2){if(window.location.pathname.includes("preview-fullscreen")){const t=new URL(window.location.href);t.searchParams.set("page","/products"),t.searchParams.set("search",e),window.location.href=t.toString()}else window.location.href="/products?search="+encodeURIComponent(e)}}}),document.addEventListener("click",function(e){a&&!e.target.closest(".nav-search-box")&&a.classList.remove("active")}),"/products"===window.location.pathname)){const t=new URLSearchParams(window.location.search).get("search");t&&(e.value=t,function(e){const t=document.getElementById("zappy-product-grid");if(!t)return;setTimeout(function(){const a=t.querySelectorAll(".product-card"),o=e.toLowerCase();let r=0;if(a.forEach(function(e){const t=e.querySelector("h3")?.textContent?.toLowerCase()||"",a=e.querySelector("p")?.textContent?.toLowerCase()||"",n=t.includes(o)||a.includes(o);e.style.display=n?"":"none",n&&r++}),0===r){const e=document.createElement("div");e.className="empty-cart",e.textContent=n.noProducts||"No products found",e.id="search-no-results",t.appendChild(e)}},500)}(t))}}function re(){const e=[".nav-menu",".mobile-menu",".mobile-nav",'[class*="mobile-menu"]','[class*="nav-menu"]',".menu-items",".nav-links","nav ul"],t=[".hamburger",".menu-toggle",".nav-toggle",".mobile-toggle",'[class*="hamburger"]','[class*="menu-toggle"]',".menu-btn",'button[aria-label*="menu"]',".mobile-menu-btn"];let a=null,n=null;for(const t of e)if(a=document.querySelector(t),a)break;for(const e of t)if(n=document.querySelector(e),n)break;function o(){return!!a&&(a.classList.contains("active")||a.classList.contains("open")||a.classList.contains("show")||a.classList.contains("visible")||a.classList.contains("is-open"))}function r(){if(!a)return;a.classList.remove("active","open","show","visible","is-open","menu-open"),document.body.classList.remove("menu-open","nav-open","mobile-menu-open");const e=a.closest("nav")||a.closest("header");e&&e.classList.remove("active","open","show","menu-open","is-open"),n&&(n.classList.remove("active","open","is-active"),n.setAttribute("aria-expanded","false"));const t=document.querySelector(".mobile-menu-overlay");t&&t.remove()}let i=o();setInterval(function(){const e=o();if(e!==i)if(i=e,e){if(!document.querySelector(".mobile-menu-overlay")){const e=document.createElement("div");e.className="mobile-menu-overlay",e.style.cssText="position:fixed;inset:0;background:rgba(0,0,0,0.3);z-index:998;",e.addEventListener("click",function(){n?n.click():r()}),document.body.appendChild(e)}}else{const e=document.querySelector(".mobile-menu-overlay");e&&e.remove()}},100),document.querySelectorAll("nav a, .nav-menu a, .mobile-menu a").forEach(function(e){e.addEventListener("click",function(){setTimeout(r,100)})}),document.querySelectorAll(".nav-ecommerce-icons a, .cart-link, .login-link").forEach(function(e){e.addEventListener("click",function(){r()})}),document.addEventListener("click",function(e){if(a&&n&&o()){const t=a.contains(e.target),o=n.contains(e.target);t||o||r()}}),document.addEventListener("keydown",function(e){"Escape"===e.key&&r()}),window.zappyCloseMobileMenu=r}function ie(){const e=document.getElementById("mobile-search-toggle")||document.querySelector(".nav-search-toggle"),t=document.getElementById("mobile-search-panel"),a=document.getElementById("close-mobile-search"),n=document.getElementById("mobile-search-input"),o=document.getElementById("mobile-search-results");if(e&&t){!function(){try{const e=t.querySelector(".search-wrapper");if(!e)return;if(e.querySelector("#mobile-search-submit, .search-submit"))return;const a="rtl"===(document.documentElement.getAttribute("dir")||"").toLowerCase(),n=document.createElement("button");n.className="search-submit",n.id="mobile-search-submit",n.title=a?"×—×™×¤×•×©":"Search",n.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="M21 21l-4.35-4.35"></path></svg>';const o=e.querySelector("#close-mobile-search, .close-search");o?e.insertBefore(n,o):e.appendChild(n)}catch(e){}}(),e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();try{const e=function(){try{const e=getComputedStyle(document.documentElement).getPropertyValue("--total-header-height").trim();if(e){const t=parseFloat(e);if(Number.isFinite(t)&&t>0)return Math.ceil(t)}}catch(e){}const e=document.querySelector(".zappy-announcement-bar"),t=document.querySelector("nav.navbar, .navbar"),a=(e?Math.ceil(e.getBoundingClientRect().height):0)+(t?Math.ceil(t.getBoundingClientRect().height):0);return a>0?a:112}();t.style.setProperty("top",e+"px","important")}catch(e){}t.classList.add("active"),setTimeout(function(){n&&n.focus()},100)}),a&&a.addEventListener("click",s),document.addEventListener("click",function(a){t.classList.contains("active")&&(t.contains(a.target)||e.contains(a.target)||s())});var r=document.querySelector('.nav-menu-toggle, .hamburger, .menu-toggle, .mobile-toggle, #mobileToggle, [aria-label="×ª×¤×¨×™×˜"], [aria-label="Menu"]');r&&r.addEventListener("click",function(){t.classList.contains("active")&&s()});var i=document.querySelector(".mobile-menu-overlay, .nav-mobile-menu, .mobile-nav");if(i)new MutationObserver(function(e){e.forEach(function(e){"class"===e.attributeName&&(i.classList.contains("active")||i.classList.contains("open"))&&s()})}).observe(i,{attributes:!0});if(n){n.addEventListener("input",function(){const e=this.value.trim();clearTimeout(te),e.length<2?o&&(o.innerHTML=""):te=setTimeout(async function(){try{const t=window.ZAPPY_WEBSITE_ID;if(!t)throw new Error("Missing websiteId");let a=buildApiUrlWithLang("/api/ecommerce/storefront/products?websiteId="+t+"&search="+encodeURIComponent(e)+"&limit=8");const n=await fetch(a),o=await n.json();se(o&&o.success&&Array.isArray(o.data)?o.data:[],e)}catch(t){try{se(ne(e),e)}catch(t){se([],e)}}},200)}),n.addEventListener("keypress",function(e){if("Enter"===e.key){const e=this.value.trim();if(e.length>=2){if(window.location.pathname.includes("preview-fullscreen")){const t=new URL(window.location.href);t.searchParams.set("page","/products"),t.searchParams.set("search",e),window.location.href=t.toString()}else window.location.href="/products?search="+encodeURIComponent(e)}}});const e=document.getElementById("mobile-search-submit");e&&e.addEventListener("click",function(e){e.preventDefault();const t=n.value.trim();if(t.length>=2){if(window.location.pathname.includes("preview-fullscreen")){const e=new URL(window.location.href);e.searchParams.set("page","/products"),e.searchParams.set("search",t),window.location.href=e.toString()}else window.location.href="/products?search="+encodeURIComponent(t)}})}document.addEventListener("click",function(e){!t.classList.contains("active")||e.target.closest("#mobile-search-panel")||e.target.closest("#mobile-search-toggle")||t.classList.remove("active")})}function s(){t.classList.remove("active"),n&&(n.value=""),o&&(o.innerHTML="")}}function se(e,t){const a=document.getElementById("mobile-search-results");if(!a)return;if(0===e.length)return void(a.innerHTML='<div class="search-no-results">'+(n.noProducts||"No products found")+"</div>");var o=window.location.pathname.includes("preview-fullscreen");let r=e.slice(0,8).map(function(e){const t=function(e){const t=n&&n.currency?n.currency:"â‚ª",a=parseFloat(e);return Number.isFinite(a)?t+a.toFixed(2):""}(e&&e.price),a=e.images&&e.images[0]?B(e.images[0]):"";var r;if(o){var i=new URL(window.location.href);i.searchParams.set("page","/product/"+(e.slug||e.id)),i.searchParams.delete("search"),r=i.toString()}else r="/product/"+(e.slug||e.id);return'<a href="'+r+'" class="search-result-item">'+(a?'<img src="'+a+'" alt="'+e.name+'" class="search-result-img">':"")+'<div class="search-result-info"><div class="search-result-name">'+e.name+"</div>"+(t?'<div class="search-result-price">'+t+"</div>":"")+"</div></a>"}).join("");if(t&&t.length>=2){var i;if(window.location.pathname.includes("preview-fullscreen")){var s=new URL(window.location.href);s.searchParams.set("page","/products"),s.searchParams.set("search",t),i=s.toString()}else i="/products?search="+encodeURIComponent(t);r+='<a href="'+i+'" class="search-view-all">'+(n.viewAllResults||"View all results")+"</a>"}a.innerHTML=r}function ce(){const t=document.getElementById("account-not-logged-in"),o=document.getElementById("account-logged-in"),r=document.getElementById("account-email"),i=document.getElementById("logout-btn"),c=document.getElementById("orders-loading"),d=document.getElementById("orders-empty"),l=document.getElementById("orders-list"),u=document.getElementById("profile-display"),p=document.getElementById("profile-form"),m=document.getElementById("edit-profile-btn"),g=document.getElementById("save-profile-btn"),f=document.getElementById("cancel-profile-btn"),y=document.getElementById("profile-name"),v=document.getElementById("profile-phone"),h=document.getElementById("edit-name"),b=document.getElementById("edit-phone"),w=document.getElementById("addresses-list"),C=(document.getElementById("addresses-empty"),document.getElementById("add-address-btn")),E=document.getElementById("address-modal-overlay"),k=document.getElementById("address-modal-title"),L=document.getElementById("address-modal-close"),x=document.getElementById("save-address-btn"),S=document.getElementById("cancel-address-btn"),I=document.getElementById("address-edit-id"),_=document.getElementById("address-label"),P=document.getElementById("address-street"),A=document.getElementById("address-apartment"),F=document.getElementById("address-city"),B=document.getElementById("address-zip"),T=document.getElementById("address-default");if(!t||!o)return;const q="zappy_customer_token_"+e,z="zappy_customer_email_"+e,M=localStorage.getItem(q),N=localStorage.getItem(z);let O={name:"",phone:"",addresses:[]};if(!M)return t.style.display="block",void(o.style.display="none");function D(e,t){const a=document.querySelector(".toast");a&&a.remove();const n=document.createElement("div");n.className="toast "+(t||""),n.textContent=e,document.body.appendChild(n),setTimeout(function(){n.classList.add("show")},10),setTimeout(function(){n.classList.remove("show"),setTimeout(function(){n.remove()},300)},3e3)}function R(){if(!w)return;if(!O.addresses||0===O.addresses.length)return void(w.innerHTML='<div class="addresses-empty" id="addresses-empty"><p>'+(n.noAddresses||"No saved addresses")+"</p></div>");const t={home:n.home||"Home",work:n.work||"Work",other:n.other||"Other"};w.innerHTML=O.addresses.map(function(e){const a=t[e.label]||e.label||n.other||"Other",o=e.isDefault;return'<div class="address-card'+(o?" default":"")+'" data-id="'+e.id+'"><div class="address-card-header"><span class="address-label-tag">'+a+"</span>"+(o?'<span class="address-default-badge">'+(n.defaultAddress||"Default")+"</span>":"")+'</div><div class="address-card-body"><div>'+(e.street||"")+(e.apartment?", "+e.apartment:"")+"</div><div>"+(e.city||"")+(e.zip?" "+e.zip:"")+'</div></div><div class="address-card-actions"><button class="btn-icon btn-edit-address" data-id="'+e.id+'"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg><span>'+(n.editAddress||"Edit")+"</span></button>"+(o?"":'<button class="btn-icon btn-default-address" data-id="'+e.id+'"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg><span>'+(n.setAsDefault||"Set as Default")+"</span></button>")+'<button class="btn-icon btn-delete btn-delete-address" data-id="'+e.id+'"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg><span>'+(n.deleteAddress||"Delete")+"</span></button></div></div>"}).join(""),w.querySelectorAll(".btn-edit-address").forEach(function(e){e.addEventListener("click",function(){U(this.getAttribute("data-id"))})}),w.querySelectorAll(".btn-default-address").forEach(function(t){t.addEventListener("click",function(){!async function(t){const o=O.addresses.map(function(e){return Object.assign({},e,{isDefault:e.id===t})});try{const t=await fetch(a("/api/ecommerce/customers/me"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+M},body:JSON.stringify({websiteId:e,addresses:o})});(await t.json()).success&&(O.addresses=o,R(),D(n.addressSaved||"Default address updated","success"))}catch(e){console.error("Failed to set default address:",e),D("Error updating default address","error")}}(this.getAttribute("data-id"))})}),w.querySelectorAll(".btn-delete-address").forEach(function(t){t.addEventListener("click",function(){!async function(t){if(!confirm(n.confirmDelete||"Are you sure you want to delete this address?"))return;const o=O.addresses.filter(function(e){return e.id!==t});try{const t=await fetch(a("/api/ecommerce/customers/me"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+M},body:JSON.stringify({websiteId:e,addresses:o})});(await t.json()).success&&(O.addresses=o,R(),D(n.addressDeleted||"Address deleted","success"))}catch(e){console.error("Failed to delete address:",e),D("Error deleting address","error")}}(this.getAttribute("data-id"))})})}function U(e){const t=!!e;if(k&&(k.textContent=t?n.editAddress||"Edit Address":n.addAddress||"Add Address"),I&&(I.value=e||""),_&&(_.value="home"),P&&(P.value=""),A&&(A.value=""),F&&(F.value=""),B&&(B.value=""),T&&(T.checked=!1),t&&O.addresses){const t=O.addresses.find(function(t){return t.id===e});t&&(_&&(_.value=t.label||"home"),P&&(P.value=t.street||""),A&&(A.value=t.apartment||""),F&&(F.value=t.city||""),B&&(B.value=t.zip||""),T&&(T.checked=!!t.isDefault))}E&&(E.style.display="flex")}function H(){E&&(E.style.display="none")}t.style.display="none",o.style.display="block",r&&N&&(r.textContent=N),i&&i.addEventListener("click",function(){localStorage.removeItem(q),localStorage.removeItem(z);const t=window.location.href;if(t.includes("/api/website/preview")){const a=t.includes("preview-fullscreen")?"preview-fullscreen":"preview";window.location.href="/api/website/"+a+"/"+e+"?page="+encodeURIComponent("/")}else window.location.href="/"}),async function(){try{const t=await fetch(a("/api/ecommerce/customers/me?websiteId="+encodeURIComponent(e)),{headers:{Authorization:"Bearer "+M}}),n=await t.json();n.success&&n.data&&(O={name:n.data.name||"",phone:n.data.phone||"",addresses:n.data.addresses||[]},y&&(y.textContent=O.name||n.data.email||"-"),v&&(v.textContent=O.phone||"-"),r&&(r.textContent=O.name||n.data.email||""),R())}catch(e){console.error("Failed to load profile:",e)}}(),m&&m.addEventListener("click",function(){h&&(h.value=O.name||""),b&&(b.value=O.phone||""),u&&(u.style.display="none"),p&&(p.style.display="flex"),m&&(m.style.display="none")}),f&&f.addEventListener("click",function(){u&&(u.style.display="flex"),p&&(p.style.display="none"),m&&(m.style.display="inline-flex")}),g&&g.addEventListener("click",async function(){const t=h?h.value.trim():"",o=b?b.value.trim():"";g.disabled=!0,g.textContent=n.saving||"Saving...";try{const r=await fetch(a("/api/ecommerce/customers/me"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+M},body:JSON.stringify({websiteId:e,name:t,phone:o})}),i=await r.json();if(!i.success)throw new Error(i.error||"Failed to update profile");O.name=t,O.phone=o,y&&(y.textContent=t||"-"),v&&(v.textContent=o||"-"),u&&(u.style.display="flex"),p&&(p.style.display="none"),m&&(m.style.display="inline-flex"),D(n.profileUpdated||"Profile updated successfully","success")}catch(e){console.error("Failed to save profile:",e),D(e.message||"Error saving profile","error")}finally{g.disabled=!1,g.textContent=n.saveChanges||"Save Changes"}}),C&&C.addEventListener("click",function(){U(null)}),L&&L.addEventListener("click",H),S&&S.addEventListener("click",H),E&&E.addEventListener("click",function(e){e.target===E&&H()}),x&&x.addEventListener("click",async function(){const t=P?P.value.trim():"",o=F?F.value.trim():"";if(!t||!o)return void D(s?"× × ×œ××œ× ×¨×—×•×‘ ×•×¢×™×¨":"Please fill in street and city","error");const r=I?I.value:"",i=!!r,c=!!T&&T.checked,d={id:i?r:"addr_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),label:_?_.value:"home",street:t,apartment:A?A.value.trim():"",city:o,zip:B?B.value.trim():"",isDefault:c};let l=O.addresses?O.addresses.slice():[];i?l=l.map(function(e){return e.id===r?d:e}):l.push(d),c&&(l=l.map(function(e){return e.id!==d.id?Object.assign({},e,{isDefault:!1}):e})),x.disabled=!0,x.textContent=n.saving||"Saving...";try{const t=await fetch(a("/api/ecommerce/customers/me"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+M},body:JSON.stringify({websiteId:e,addresses:l})}),o=await t.json();if(!o.success)throw new Error(o.error||"Failed to save address");O.addresses=l,R(),H(),D(n.addressSaved||"Address saved successfully","success")}catch(e){console.error("Failed to save address:",e),D(e.message||"Error saving address","error")}finally{x.disabled=!1,x.textContent=n.saveChanges||"Save Changes"}}),async function(){var t=document.getElementById("favorites-loading"),o=document.getElementById("favorites-empty"),r=document.getElementById("favorites-grid");if(!t||!r)return;try{var i=new AbortController,s=setTimeout(function(){i.abort()},8e3),c=await fetch(a("/api/ecommerce/customers/me/favorites?websiteId="+encodeURIComponent(e)),{headers:{Authorization:"Bearer "+M},signal:i.signal});if(clearTimeout(s),!c.ok)throw new Error("HTTP "+c.status);var d=await c.json();if(t.style.display="none",!d.success||!d.data||0===d.data.length)return void(o&&(o.style.display="block"));r.style.cssText="display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:16px;",r.innerHTML=d.data.map(function(e){var t="";if(e.images)try{var a="string"==typeof e.images?JSON.parse(e.images):e.images;t=Array.isArray(a)&&a.length>0?a[0]:""}catch(e){}var o=e.sale_price&&parseFloat(e.sale_price)<parseFloat(e.price)?n.currency+parseFloat(e.sale_price).toFixed(2)+' <span style="text-decoration:line-through;color:var(--text-secondary,#6b7280);font-weight:400;font-size:0.8em;">'+n.currency+parseFloat(e.price).toFixed(2)+"</span>":n.currency+parseFloat(e.price).toFixed(2);return'<div class="favorite-card" style="background:transparent;border:1px solid var(--border-color,rgba(128,128,128,0.2));border-radius:12px;overflow:hidden;position:relative;transition:box-shadow 0.2s;" data-product-id="'+e.id+'"><button class="favorite-remove-btn" style="position:absolute;top:8px;right:8px;width:28px;height:28px;border-radius:50%;border:none;background:rgba(128,128,128,0.3);color:inherit;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:16px;z-index:2;line-height:1;" onclick="removeFavoriteFromAccount(\''+e.id+'\', this)" title="'+(n.removeFromFavorites||"Remove")+'">&times;</button><a href="/product/'+(e.slug||e.id)+'" style="text-decoration:none;color:inherit;display:block;">'+(t?'<img src="'+t+'" alt="'+(e.name||"").replace(/'/g,"&apos;")+'" style="width:100%;aspect-ratio:1;object-fit:contain;display:block;border-radius:8px 8px 0 0;">':'<div style="width:100%;aspect-ratio:1;display:flex;align-items:center;justify-content:center;color:#999;font-size:32px;">ğŸ“¦</div>')+'<div style="padding:12px;"><h4 style="font-size:0.875rem;font-weight:500;color:var(--text-color,var(--text,inherit));margin:0 0 6px 0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">'+(e.name||"")+'</h4><div style="font-weight:600;color:var(--primary-color,var(--primary,inherit));font-size:0.9rem;">'+o+"</div></div></a></div>"}).join("")}catch(e){console.error("Failed to load favorites:",e),t.style.display="none",o&&(o.style.display="block")}}(),async function(){if(!c||!l)return;try{const t=await fetch(a("/api/ecommerce/customers/me/orders?websiteId="+encodeURIComponent(e)),{headers:{Authorization:"Bearer "+M}}),o=await t.json();if(c.style.display="none",!o.success||!o.data||0===o.data.length)return void(d&&(d.style.display="block"));l.style.display="block",l.innerHTML=o.data.map(function(e){const t="status"+(e.payment_status||e.status||"pending").charAt(0).toUpperCase()+(e.payment_status||e.status||"pending").slice(1),a=n[t]||e.payment_status||e.status||"pending",o=new Date(e.created_at).toLocaleDateString(s?"he-IL":"en-US");let r=e.items;if("string"==typeof r)try{r=JSON.parse(r)}catch(e){r=[]}r=r||[];const i=parseFloat(e.total||e.total_amount||0);return'<div class="order-card"><div class="order-card-header"><span class="order-number">#'+(e.order_number||e.id.slice(0,8))+'</span><span class="order-status status-'+(e.payment_status||e.status)+'">'+a+'</span></div><div class="order-card-body"><div class="order-info-row"><span class="order-label">'+(n.orderDate||"Date")+':</span><span class="order-value">'+o+'</span></div><div class="order-info-row"><span class="order-label">'+(n.orderTotal||"Total")+':</span><span class="order-value">'+n.currency+i.toFixed(2)+"</span></div>"+(r.length>0?'<div class="order-items-summary">'+r.slice(0,3).map(function(e){const t=e.name||e.productName||"Item";var a=e.quantity>1||e.quantityUnit&&"piece"!==e.quantityUnit?" x"+e.quantity:"";a&&e.quantityUnit&&"piece"!==e.quantityUnit&&(a+=" "+(e.customUnitLabel||n.unitLabels&&n.unitLabels[e.quantityUnit]||e.quantityUnit));return'<span class="order-item-name">'+t+a+"</span>"}).join(", ")+(r.length>3?"...":"")+"</div>":"")+"</div></div>"}).join("")}catch(e){console.error("Failed to load orders:",e),c.style.display="none",d&&(d.querySelector("p").textContent=n.errorLoading||"Error loading orders",d.style.display="block")}}()}function de(){C(),P(),M(),async function(){const t=document.getElementById("shipping-methods");if(t)try{const o=await fetch(a("/api/ecommerce/storefront/shipping?websiteId="+e)),r=await o.json();if(O=r.data||[],!O.length)return void(t.innerHTML='<div class="no-shipping">'+(n.noShippingMethods||"No shipping options available")+"</div>");if(t.innerHTML=O.map((e,t)=>{const a=e.is_pickup,o=0===parseFloat(e.price),r=e.conditions?.freeAbove&&K()>=e.conditions.freeAbove,i=o||r?n.free||"FREE":n.currency+e.price,s=e.estimated_days?" ("+e.estimated_days+" "+n.days+")":"",c=a?"ğŸ“ ":"ğŸšš ",d=a&&e.pickup_address?.street?'<div class="shipping-address">'+e.pickup_address.street+", "+(e.pickup_address.city||"")+"</div>":"",l=e.conditions?.freeAbove&&!r?'<div class="shipping-free-note">'+(n.freeAbove||"Free above")+" "+n.currency+e.conditions.freeAbove+"</div>":"";return'<label class="shipping-option'+(0===t?" selected":"")+'" data-method-id="'+e.id+'"><input type="radio" name="shipping" value="'+e.id+'"'+(0===t?" checked":"")+' onchange="window.zappySelectShipping(this.value)"><div class="shipping-info"><div class="shipping-name">'+c+e.name+s+"</div>"+(e.description?'<div class="shipping-desc">'+e.description+"</div>":"")+d+l+'</div><div class="shipping-price'+(o||r?" free":"")+'">'+i+"</div></label>"}).join(""),O.length>0){N=O[0];const e=document.getElementById("shipping-address-section");e&&(e.style.display=N.is_pickup?"none":"block"),X()}}catch(e){console.error("Failed to load shipping methods",e),t.innerHTML='<div class="error">'+(n.errorLoading||"Error loading options")+"</div>"}}(),async function(){const t=document.getElementById("payment-container");if(t)try{const n=await fetch(a("/api/ecommerce/storefront/payment-status?websiteId="+e)),o=await n.json();if(U=o.data?.isConfigured||!1,R=o.data?.methods||[],!U||!R.length)return void(t.innerHTML='<div class="payment-not-configured"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg><span>'+(s?"×ª×©×œ×•× ××§×•×•×Ÿ ×œ× ××•×’×“×¨. ×¦×¨×• ×§×©×¨ ×¢× ×‘×¢×œ ×”××ª×¨.":"Online payment not configured. Please contact the store owner.")+"</span></div>");t.innerHTML=R.map((e,t)=>{const a=s?e.name:e.nameEn,n="credit-card"===e.icon?'<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/></svg>':"";return'<label class="payment-option'+(0===t?" selected":"")+'" data-method-id="'+e.id+'"><input type="radio" name="payment" value="'+e.id+'"'+(0===t?" checked":"")+' onchange="window.zappySelectPayment(this.value)"><div class="payment-info"><div class="payment-icon">'+n+'</div><div class="payment-name">'+a+"</div></div></label>"}).join(""),R.length>0&&(D=R[0])}catch(e){console.error("Failed to load payment methods",e),t.innerHTML='<div class="error">'+(n.errorLoading||"Error loading options")+"</div>"}}(),X(),oe(),ie(),re(),function(){try{const e=document.getElementById("mobileToggle")||document.querySelector(".mobile-toggle"),t=document.getElementById("navMenu")||document.querySelector(".nav-menu");if(!e||!t)return;const a=function(){t.classList.contains("active")||t.classList.contains("open")||t.classList.contains("show")?e.classList.add("active"):e.classList.remove("active")};a(),new MutationObserver(function(e){for(var t=0;t<e.length;t++)if("class"===e[t].attributeName){a();break}}).observe(t,{attributes:!0})}catch(e){}}(),function(){if(window.innerWidth>768)return;const e=document.querySelectorAll('a[href="/products"], a[href*="/products"]');if(!e.length)return;const t=document.getElementById("zappy-category-links");let n=[];if(t){t.querySelectorAll("a").forEach(function(e){n.push({name:e.textContent.trim(),href:e.href})})}if(0===n.length){const t=window.ZAPPY_WEBSITE_ID;t&&fetch(a("/api/ecommerce/"+t+"/categories")).then(function(e){return e.json()}).then(function(t){t.categories&&t.categories.length>0&&(n=t.categories.map(function(e){return{name:e.name,href:"/category/"+(e.slug||e.id)}}),le(e,n))}).catch(function(){})}else le(e,n)}(),function(){document.querySelectorAll("#cart-drawer-toggle, [data-cart-toggle], .cart-link.nav-cart, a.nav-cart").forEach(function(e){e.hasAttribute("data-cart-init")||(e.setAttribute("data-cart-init","true"),e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),q()}))});var e=document.getElementById("cart-drawer-close");e&&e.addEventListener("click",z);var t=document.getElementById("cart-drawer-overlay");t&&t.addEventListener("click",z),document.addEventListener("keydown",function(e){"Escape"===e.key&&z()}),T()}(),Z(),function(){const t=document.getElementById("coupon-toggle-btn"),o=document.getElementById("coupon-input-wrapper"),r=document.getElementById("coupon-close-btn"),i=document.getElementById("apply-coupon-btn"),s=document.getElementById("remove-coupon-btn"),c=document.getElementById("coupon-code-input"),d=document.getElementById("coupon-applied-row");t&&o&&(t.addEventListener("click",function(){"none"===o.style.display&&(o.style.display="block",t.style.display="none",c&&c.focus())}),r&&r.addEventListener("click",function(){o.style.display="none",t.style.display="flex",c&&(c.value="");const e=document.getElementById("coupon-error");e&&(e.style.display="none")}),i&&c&&(i.addEventListener("click",async function(){const r=c.value.trim();if(r){i.disabled=!0,i.textContent="...";try{const i=K(),s=await fetch(a("/api/ecommerce/storefront/validate-coupon"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({websiteId:e,code:r,subtotal:i})}),c=await s.json();if(!c.success||!c.data?.valid){const e=document.getElementById("coupon-error");let t=n.invalidCoupon||"Invalid coupon code";return"expired"===c.data?.error?t=n.couponExpired||"Coupon has expired":"min_order"===c.data?.error&&(t=(n.couponMinOrder||"Minimum order amount")+": "+n.currency+c.data.minOrderAmount),void(e&&(e.textContent=t,e.style.display="block",setTimeout(function(){e.style.display="none"},5e3)))}G=c.data.coupon,Q=G.discountAmount||0,o.style.display="none",t.style.display="none",d.style.display="flex",document.getElementById("applied-coupon-code").textContent=G.code,document.getElementById("coupon-error").style.display="none",X()}catch(e){console.error("Failed to validate coupon",e);const t=document.getElementById("coupon-error");t&&(t.textContent=n.errorLoading||"Error",t.style.display="block")}finally{i.disabled=!1,i.textContent=n.applyCoupon||"Apply"}}}),c.addEventListener("keypress",function(e){"Enter"===e.key&&(e.preventDefault(),i.click())}),s&&s.addEventListener("click",function(){G=null,Q=0,d.style.display="none",t.style.display="flex",c&&(c.value=""),X()})))}(),async function(){const e=window.location.pathname,t=(window.location.search.includes("page="),new URLSearchParams(window.location.search).get("page"));if("/order-success"!==e&&!e.endsWith("/order-success")&&"/order-success"!==t&&"order-success"!==t)return;try{if(window.self!==window.top)return void(window.top.location.href=window.location.href)}catch(e){try{window.parent.postMessage({type:"zappy_order_success",url:window.location.href},"*")}catch(e){console.warn("Could not communicate with parent frame:",e)}}const o=document.getElementById("order-number-value"),r=document.getElementById("order-details-section"),i=document.getElementById("order-items-list"),d=document.getElementById("order-totals-summary");if(!o)return;const l=new URLSearchParams(window.location.search).get("ref");if(!l)return void(o.textContent=n.orderNotFound||"Order not found");const u=l.split("_"),p=u.length>=3?u[2]:l;o.textContent="#"+p;const m=window.ZAPPY_WEBSITE_ID;if(m)try{const e=await fetch(a("/api/ecommerce/confirm-order/"+encodeURIComponent(l)),{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();t.success?(console.log("âœ… Order confirmed:",t.data),t.data.orderNumber&&(o.textContent="#"+t.data.orderNumber)):console.warn("Order confirmation response:",t)}catch(e){console.error("Failed to confirm order:",e)}if(m&&r&&i){const e="zappy_pending_order_"+l;let t=localStorage.getItem(e);if(!t)try{const e=await fetch(a("/api/ecommerce/pending-order/"+encodeURIComponent(l))),n=await e.json();n.success&&n.data&&(t=JSON.stringify(n.data))}catch(e){console.error("Failed to fetch pending order from API:",e)}if(t)try{const a=JSON.parse(t);var g=document.getElementById("order-date-value"),f=document.getElementById("order-payment-value"),y=document.getElementById("order-shipping-value"),v=document.getElementById("order-confirmation-email");if(g){var h=a.orderDate?new Date(a.orderDate):new Date,b=s?["×¨××©×•×Ÿ","×©× ×™","×©×œ×™×©×™","×¨×‘×™×¢×™","×—××™×©×™","×©×™×©×™","×©×‘×ª"]:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];g.textContent=b[h.getDay()]+" "+h.getDate()+"/"+(h.getMonth()+1)+"/"+h.getFullYear()}if(f&&a.paymentMethodName&&(f.textContent=a.paymentMethodName),y&&a.shippingMethodName){var k=a.shippingMethodName;a.shippingIsPickup&&(k+=". "+(s?"××™×¡×•×£ ×¢×¦××™":"Store pickup")),y.textContent=k}if(v&&a.customerEmail&&(v.textContent=(n.orderConfirmation||"A confirmation email has been sent to")+" "+a.customerEmail),r&&(r.style.display="block"),i&&a.cartItems&&a.cartItems.length>0&&(i.innerHTML=a.cartItems.map(function(e){var t=x(e),a=e.variantName?" ("+e.variantName+")":"";return'<div class="order-success-item"><span>'+e.name+a+" x "+E(e)+"</span><span>"+n.currency+t.toFixed(2)+"</span></div>"}).join("")),d){let e="<div><span>"+(n.subtotal||"Subtotal")+":</span><span>"+n.currency+parseFloat(a.subtotal||0).toFixed(2)+"</span></div>";a.shippingCost>0&&(e+="<div><span>"+(n.shipping||"Shipping")+":</span><span>"+n.currency+parseFloat(a.shippingCost).toFixed(2)+"</span></div>"),a.discount>0&&(e+="<div><span>"+(n.discount||"Discount")+":</span><span>-"+n.currency+parseFloat(a.discount).toFixed(2)+"</span></div>"),e+='<div class="order-total-final"><span>'+(n.paidAmount||"Amount Paid")+":</span><span>"+n.currency+parseFloat(a.total||0).toFixed(2)+"</span></div>",d.innerHTML=e}localStorage.removeItem(e)}catch(e){console.error("Error parsing pending order data:",e)}}c=[],w(),C()}(),function(){const t=document.getElementById("send-otp-btn"),o=document.getElementById("verify-otp-btn"),r=document.getElementById("login-email"),i=document.getElementById("otp-code"),c=document.querySelector(".login-form"),d=document.querySelector(".otp-form");if(!t||!r)return;let l="";t.addEventListener("click",async function(o){o.preventDefault();const i=b(r.value);if(i)if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)){t.disabled=!0,t.textContent=s?"×©×•×œ×—...":"Sending...";try{const t=await fetch(a("/api/ecommerce/customers/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({websiteId:e,email:i})}),n=await t.json();if(!n.success)throw new Error(n.error||"Failed to send code");l=i,c&&(c.style.display="none"),d&&(d.style.display="block"),alert(s?"×§×•×“ ××™××•×ª × ×©×œ×— ×œ××™××™×™×œ ×©×œ×š":"Verification code sent to your email")}catch(e){console.error("Send OTP failed:",e),alert(s?"×©×’×™××” ×‘×©×œ×™×—×ª ×”×§×•×“. × ×¡×” ×©×•×‘.":"Failed to send code. Please try again.")}finally{t.disabled=!1,t.textContent=n.sendCode||(s?"×©×œ×— ×§×•×“":"Send Code")}}else alert(s?"× × ×œ×”×–×™×Ÿ ×›×ª×•×‘×ª ××™××™×™×œ ×ª×§×™× ×”":"Please enter a valid email address");else alert(s?"× × ×œ×”×–×™×Ÿ ×›×ª×•×‘×ª ××™××™×™×œ":"Please enter an email address")}),o&&i&&o.addEventListener("click",async function(t){t.preventDefault();const r=i.value.trim();if(r)if(6===r.length){o.disabled=!0,o.textContent=s?"××××ª...":"Verifying...";try{const t=await fetch(a("/api/ecommerce/customers/verify-otp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({websiteId:e,email:l,code:r})}),n=await t.json();if(!n.success)throw new Error(n.error||"Invalid code");localStorage.setItem("zappy_customer_token_"+e,n.token),localStorage.setItem("zappy_customer_email_"+e,l),alert(s?"×”×ª×—×‘×¨×ª ×‘×”×¦×œ×—×”!":"Successfully logged in!");const o=sessionStorage.getItem("zappy_login_return");sessionStorage.removeItem("zappy_login_return");let i=o&&"/login"!==o?o:"/products";const c=window.location.href;if(c.includes("/api/website/preview")){const t="/api/website/"+(c.includes("preview-fullscreen")?"preview-fullscreen":"preview")+"/"+e+"?page="+encodeURIComponent(i);window.location.href=t}else window.location.href=i}catch(e){console.error("Verify OTP failed:",e),alert(s?"×§×•×“ ×©×’×•×™ ××• ×¤×’ ×ª×•×§×£. × ×¡×” ×©×•×‘.":"Invalid or expired code. Please try again.")}finally{o.disabled=!1,o.textContent=n.verify||(s?"×××ª":"Verify")}}else alert(s?"×”×§×•×“ ×—×™×™×‘ ×œ×”×™×•×ª 6 ×¡×¤×¨×•×ª":"Code must be 6 digits");else alert(s?"× × ×œ×”×–×™×Ÿ ××ª ×§×•×“ ×”××™××•×ª":"Please enter the verification code")})}(),ce(),function(){const t=localStorage.getItem("zappy_customer_token_"+e),a=document.querySelectorAll('a[href="/login"]'),n=document.querySelectorAll('a[href="/account"]');t?a.forEach(function(e){e.href="/account"}):n.forEach(function(e){e.href="/login",e.addEventListener("click",function(){var e=window.location.pathname+window.location.search;if(window.location.href.includes("/api/website/preview")){var t=new URLSearchParams(window.location.search).get("page")||"/";sessionStorage.setItem("zappy_login_return",t)}else"/login"!==e&&sessionStorage.setItem("zappy_login_return",e)})})}()}function le(e,t){t.length&&e.forEach(function(e){if(e.parentElement.querySelector(".mobile-categories-submenu"))return;if(!e.closest('.nav-menu, .mobile-menu, .mobile-nav, [class*="mobile"], [class*="nav-menu"]'))return;const a=document.createElement("div");a.className="mobile-categories-submenu",a.innerHTML=t.map(function(e){return'<a href="'+e.href+'">'+e.name+"</a>"}).join("");const n=e.innerHTML;e.innerHTML='<span class="products-menu-toggle">'+n+"</span>",e.classList.add("products-menu-item"),e.parentElement.insertBefore(a,e.nextSibling),e.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();const n=e.querySelector(".products-menu-toggle");n&&n.classList.toggle("active"),a.classList.toggle("active")})})}window.removeFavoriteFromAccount=function(t,n){var o="zappy_customer_token_"+e,r=localStorage.getItem(o);if(r){var i=n.closest(".favorite-card");i&&(i.style.opacity="0.5"),fetch(a("/api/ecommerce/customers/me/favorites/"+t+"?websiteId="+encodeURIComponent(e)),{method:"DELETE",headers:{Authorization:"Bearer "+r}}).then(function(e){return e.json()}).then(function(e){if(e.success&&i){i.remove();var t=document.getElementById("favorites-grid");if(t&&0===t.children.length){t.style.display="none";var a=document.getElementById("favorites-empty");a&&(a.style.display="block")}}}).catch(function(){i&&(i.style.opacity="1")})}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",de):de(),"undefined"!=typeof zappyI18n&&"function"==typeof zappyI18n.onLanguageChange&&(zappyI18n.onLanguageChange(function(e,t){console.log("[E-COMMERCE MAIN] Language changed from "+t+" to "+e+", refreshing products..."),P(),ae()}),console.log("[E-COMMERCE MAIN] Registered language change callback for products refresh"))}();const isCatalogMode=!1;function getApiBase(){var e=(window.ZAPPY_API_BASE||"").replace(/\/$/,""),t=window.location?window.location.pathname:"";return-1!==t.indexOf("/preview")||-1!==t.indexOf("/preview-fullscreen")?window.location.origin:e}function buildApiUrl(e){"/"!==e.charAt(0)&&(e="/"+e);var t=getApiBase();return t?t+e:e}function getCurrentLanguage(){if("undefined"!=typeof i18next&&i18next.language)return i18next.language;var e=document.documentElement.getAttribute("lang");return e||null}function buildApiUrlWithLang(e){var t=buildApiUrl(e),a=getCurrentLanguage();return a&&(t+=(-1===t.indexOf("?")?"?":"&")+"lang="+encodeURIComponent(a)),t}let additionalJsProductLayout="standard",additionalJsSettingsFetched=!1,additionalJsAllProductsLabel=null,additionalJsSidebarFiltersConfig={},additionalJsSortingConfig={},additionalJsViewToggleEnabled=!0,catCurrentSortKey="popularity",catCurrentViewMode=localStorage.getItem("zappy_view_mode_"+(window.ZAPPY_WEBSITE_ID||""))||"grid",catActiveSidebarFilters={categories:[],brands:[],tags:[],priceMin:null,priceMax:null,sale:!1},catCurrentFilter="all",catProductsCache=[];async function fetchAdditionalJsSettings(e){if(additionalJsSettingsFetched&&!e)return;const t=window.ZAPPY_WEBSITE_ID;if(t)try{const e=await fetch(buildApiUrlWithLang("/api/ecommerce/storefront/settings?websiteId="+t)),c=await e.json();if(c.success&&c.data){if(c.data.productLayout&&(additionalJsProductLayout=c.data.productLayout),c.data.allProductsLabel){additionalJsAllProductsLabel=c.data.allProductsLabel;var a=document.querySelector(".catalog-menu-all");a&&(a.textContent=c.data.allProductsLabel);var n=document.getElementById("zappy-nav-category-links");if(n){var o=n.querySelector("li:first-child a"),r=o?o.getAttribute("href"):"";!o||"/products"!==r&&-1===r.indexOf("/products")&&-1===r.indexOf("%2Fproducts")||(o.textContent=c.data.allProductsLabel)}}if(c.data.productsMenuLabel){var i=document.querySelector(".zappy-products-dropdown > a");if(i){var s=i.querySelector("svg");i.textContent="",i.appendChild(document.createTextNode(c.data.productsMenuLabel+" ")),s&&i.appendChild(s)}}c.data.sidebarFiltersConfig&&(additionalJsSidebarFiltersConfig=c.data.sidebarFiltersConfig),c.data.sortingConfig&&(additionalJsSortingConfig=c.data.sortingConfig),null!=c.data.viewToggleEnabled&&(additionalJsViewToggleEnabled=c.data.viewToggleEnabled),handleDynamicAnnouncementBar(c.data.announcementBar),additionalJsSettingsFetched=!0}}catch(e){console.warn("Failed to fetch store settings:",e)}}function handleDynamicAnnouncementBar(e){if(!document.body.classList.contains("zappy-focused-page")){var t=document.querySelector(".zappy-announcement-bar");if(e){if(e.enabled){if(e.messages){if(0!==e.messages.length){for(var a=[],n=0;n<e.messages.length;n++){var o=e.messages[n];if(o)""!==o.trim()&&a.push(o)}if(0!==a.length){var r=e.bgColor||"#000000",i=e.textColor||"#ffffff",s=e.interval||4e3;if(t)t.style.backgroundColor=r,t.style.color=i;else{if(!document.getElementById("zappy-announcement-bar-style")){var c=document.createElement("style");c.id="zappy-announcement-bar-style",c.textContent=".zappy-announcement-bar { background-color: "+r+"; color: "+i+"; position: fixed; top: 0; left: 0; right: 0; width: 100%; text-align: center; padding: 10px 20px; font-size: 14px; font-weight: 500; line-height: 1.4; box-sizing: border-box; z-index: 1001; min-height: 40px; display: flex; align-items: center; justify-content: center; } .zappy-announcement-bar .zappy-announcement-message { position: absolute; opacity: 0; transition: opacity 0.5s ease-in-out; width: 100%; left: 0; right: 0; padding: 0 20px; box-sizing: border-box; } .zappy-announcement-bar .zappy-announcement-message.active { opacity: 1; }",document.head.appendChild(c)}var d=document.createElement("div");d.className="zappy-announcement-bar";for(var l="",u=0;u<a.length;u++){l+='<span class="zappy-announcement-message'+(0===u?" active":"")+'">'+a[u].replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</span>"}if(d.innerHTML=l,document.body.insertBefore(d,document.body.firstChild),a.length>1){var p=0;setInterval(function(){var e=d.querySelectorAll(".zappy-announcement-message");e[p].classList.remove("active"),e[p=(p+1)%e.length].classList.add("active")},s)}"function"==typeof setupFixedHeaders&&setTimeout(setupFixedHeaders,100)}}else t&&t.remove()}else if(t){t.remove();var m=document.getElementById("zappy-announcement-bar-style");m&&m.remove()}}else if(t){t.remove();var g=document.getElementById("zappy-announcement-bar-style");g&&g.remove()}}else if(t){t.remove();var f=document.getElementById("zappy-announcement-bar-style");f&&f.remove()}}else if(t){t.remove();var y=document.getElementById("zappy-announcement-bar-style");y&&y.remove()}}}async function loadFeaturedProducts(){const e=document.getElementById("zappy-featured-products");if(!e)return;const t=window.ZAPPY_WEBSITE_ID;if(!t)return;await fetchAdditionalJsSettings();const a={products:"××•×¦×¨×™×",ourProducts:"×”××•×¦×¨×™× ×©×œ× ×•",featuredProducts:"××•×¦×¨×™× ××•××œ×¦×™×",noFeaturedProducts:"×¢×•×“ ×œ× × ×‘×—×¨×• ××•×¦×¨×™× ××•××œ×¦×™×. ×¦×¤×• ×‘×›×œ ×”××•×¦×¨×™× ×©×œ× ×•!",featuredCategories:"×§× ×• ×œ×¤×™ ×§×˜×’×•×¨×™×”",all:"×”×›×œ",featured:"××•××œ×¦×™×",new:"×—×“×©×™×",sale:"××‘×¦×¢×™×",loadingProducts:"×˜×•×¢×Ÿ ××•×¦×¨×™×...",cart:"×¢×’×œ×ª ×§× ×™×•×ª",yourCart:"×¢×’×œ×ª ×”×§× ×™×•×ª ×©×œ×š",emptyCart:"×”×¢×’×œ×” ×¨×™×§×”",total:'×¡×”"×›',proceedToCheckout:"×”××©×š ×œ×ª×©×œ×•×",checkout:"×ª×©×œ×•×",customerInfo:"×¤×¨×˜×™ ×œ×§×•×—",fullName:"×©× ××œ×",email:"××™××™×™×œ",phone:"×˜×œ×¤×•×Ÿ",shippingAddress:"×›×ª×•×‘×ª ×œ××©×œ×•×—",street:"×¨×—×•×‘ ×•××¡×¤×¨",apartment:"×“×™×¨×”, ×§×•××”, ×›× ×™×¡×”",city:"×¢×™×¨",zip:"××™×§×•×“",saveAddressForNextTime:"×©××•×¨ ××ª ×”×›×ª×•×‘×ª ×œ×¤×¢× ×”×‘××”",shippingMethod:"×©×™×˜×ª ××©×œ×•×—",loadingShipping:"×˜×•×¢×Ÿ ×©×™×˜×•×ª ××©×œ×•×—...",payment:"×ª×©×œ×•×",loadingPayment:"×˜×•×¢×Ÿ ××¤×©×¨×•×™×•×ª ×ª×©×œ×•×...",orderSummary:"×¡×™×›×•× ×”×–×× ×”",subtotal:"×¡×›×•× ×‘×™× ×™×™×",vat:'××¢"×',vatIncluded:'×›×•×œ×œ ××¢"×',shipping:"××©×œ×•×—",discount:"×”× ×—×”",totalToPay:'×¡×”"×› ×œ×ª×©×œ×•×',placeOrder:"×‘×¦×¢ ×”×–×× ×”",login:"×”×ª×—×‘×¨×•×ª",customerLogin:"×”×ª×—×‘×¨×•×ª ×œ×§×•×—×•×ª",enterEmail:"×”×–×Ÿ ××ª ×›×ª×•×‘×ª ×”××™××™×™×œ ×©×œ×š ×•× ×©×œ×— ×œ×š ×§×•×“ ×”×ª×—×‘×¨×•×ª",emailAddress:"×›×ª×•×‘×ª ××™××™×™×œ",sendCode:"×©×œ×— ×§×•×“",enterCode:"×”×–×Ÿ ××ª ×”×§×•×“ ×©× ×©×œ×— ×œ××™××™×™×œ ×©×œ×š",verificationCode:"×§×•×“ ××™××•×ª",verify:"×××ª",returnPolicy:"××“×™× ×™×•×ª ×”×—×–×¨×•×ª",addToCart:"×”×•×¡×£ ×œ×¢×’×œ×”",startingAt:"×”×—×œ ×",addedToCart:"×”××•×¦×¨ × ×•×¡×£ ×œ×¢×’×œ×”!",remove:"×”×¡×¨",noProducts:"××™×Ÿ ××•×¦×¨×™× ×œ×”×¦×’×” ×›×¨×’×¢",errorLoading:"×©×’×™××” ×‘×˜×¢×™× ×”",days:"×™××™×",currency:"â‚ª",free:"×—×™× ×",freeAbove:"××©×œ×•×— ×—×™× × ××¢×œ",noShippingMethods:"××™×Ÿ ××¤×©×¨×•×™×•×ª ××©×œ×•×— ×–××™× ×•×ª",viewAllResults:"×”×¦×’ ××ª ×›×œ ×”×ª×•×¦××•×ª",searchProducts:"×—×™×¤×•×© ××•×¦×¨×™×",productDetails:"×¤×¨×˜×™ ×”××•×¦×¨",viewDetails:"×œ×¤×¨×˜×™× × ×•×¡×¤×™×",inStock:"×‘××œ××™",outOfStock:"××–×œ ××”××œ××™",pleaseSelect:"× × ×œ×‘×—×•×¨",sku:'××§"×˜',category:"×§×˜×’×•×¨×™×”",relatedProducts:"××•×¦×¨×™× ×“×•××™×",productNotFound:"×”××•×¦×¨ ×œ× × ××¦×",backToProducts:"×—×–×¨×” ×œ××•×¦×¨×™×",home:"×‘×™×ª",quantity:"×›××•×ª",unitLabels:{piece:"×™×—'",kg:'×§"×’',gram:"×’×¨×",liter:"×œ×™×˜×¨",ml:'×"×œ'},perUnit:"/",couponCode:"×§×•×“ ×§×•×¤×•×Ÿ",enterCouponCode:"×”×–×Ÿ ×§×•×“ ×§×•×¤×•×Ÿ",applyCoupon:"×”×—×œ",removeCoupon:"×”×¡×¨",couponApplied:"×”×§×•×¤×•×Ÿ ×”×•×—×œ ×‘×”×¦×œ×—×”!",invalidCoupon:"×§×•×“ ×§×•×¤×•×Ÿ ×œ× ×ª×§×™×Ÿ",couponExpired:"×”×§×•×¤×•×Ÿ ×¤×’ ×ª×•×§×£",couponMinOrder:"×¡×›×•× ×”×–×× ×” ××™× ×™××œ×™",alreadyHaveAccount:"×›×‘×¨ ×™×© ×œ×š ×—×©×‘×•×Ÿ?",loginHere:"×”×ª×—×‘×¨ ×›××Ÿ",loggedInAs:"××—×•×‘×¨ ×›:",logout:"×”×ª× ×ª×§",haveCouponCode:"×™×© ×œ×™ ×§×•×“ ×§×•×¤×•×Ÿ",agreeToTerms:"×× ×™ ××¡×›×™×/×” ×œ",termsAndConditions:"×ª× ××™ ×”×©×™××•×©",pleaseAcceptTerms:"× × ×œ××©×¨ ××ª ×ª× ××™ ×”×©×™××•×©",nameRequired:"× × ×œ×”×–×™×Ÿ ×©× ××œ×",emailRequired:"× × ×œ×”×–×™×Ÿ ×›×ª×•×‘×ª ××™××™×™×œ",emailInvalid:"×›×ª×•×‘×ª ××™××™×™×œ ×œ× ×ª×§×™× ×”",phoneRequired:"× × ×œ×”×–×™×Ÿ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ",shippingRequired:"× × ×œ×‘×—×•×¨ ×©×™×˜×ª ××©×œ×•×—",streetRequired:"× × ×œ×”×–×™×Ÿ ×¨×—×•×‘ ×•××¡×¤×¨",cityRequired:"× × ×œ×”×–×™×Ÿ ×¢×™×¨",cartEmpty:"×”×¢×’×œ×” ×¨×™×§×”",paymentNotConfigured:"×ª×©×œ×•× ××§×•×•×Ÿ ×œ× ××•×’×“×¨",orderSuccess:"×”×”×–×× ×” ×”×ª×§×‘×œ×”!",thankYouOrder:"×ª×•×“×” ×¢×œ ×”×”×–×× ×”",orderNumber:"××¡×¤×¨ ×”×–×× ×”",orderConfirmation:"××™×©×•×¨ ×”×–×× ×” × ×©×œ×— ×œ××™××™×™×œ ×©×œ×š",orderProcessing:"×”×”×–×× ×” ×©×œ×š ×‘×˜×™×¤×•×œ. × ×¢×“×›×Ÿ ××•×ª×š ×›×©×”××©×œ×•×— ×™×¦× ×œ×“×¨×š.",continueShopping:"×œ×”××©×š ×§× ×™×•×ª",next:"×”×‘×",contactInformation:"×¤×¨×˜×™ ×”×ª×§×©×¨×•×ª",items:"×¤×¨×™×˜×™×",continueToHomePage:"×”××©×š ×œ×“×£ ×”×‘×™×ª",transactionDate:"×ª××¨×™×š ×¢×¡×§×”",paymentMethod:"×××¦×¢×™ ×ª×©×œ×•×",orderDetails:"×¤×¨×˜×™ ×”×”×–×× ×”",loadingOrder:"×˜×•×¢×Ÿ ×¤×¨×˜×™ ×”×–×× ×”...",orderNotFound:"×œ× × ××¦××” ×”×–×× ×”",orderItems:"×¤×¨×™×˜×™× ×‘×”×–×× ×”",paidAmount:"×¡×›×•× ×©×©×•×œ×",myAccount:"×”×—×©×‘×•×Ÿ ×©×œ×™",accountWelcome:"×‘×¨×•×š ×”×‘×",yourOrders:"×”×”×–×× ×•×ª ×©×œ×š",noOrders:"××™×Ÿ ×¢×“×™×™×Ÿ ×”×–×× ×•×ª",orderDate:"×ª××¨×™×š",orderStatus:"×¡×˜×˜×•×¡",orderTotal:'×¡×”"×›',viewOrder:"×¦×¤×” ×‘×”×–×× ×”",statusPending:"×××ª×™×Ÿ ×œ×ª×©×œ×•×",statusPaid:"×©×•×œ×",statusProcessing:"×‘×˜×™×¤×•×œ",statusShipped:"× ×©×œ×—",statusDelivered:"× ××¡×¨",statusCancelled:"×‘×•×˜×œ",notLoggedIn:"×œ× ××—×•×‘×¨",pleaseLogin:"×™×© ×œ×”×ª×—×‘×¨ ×›×“×™ ×œ×¦×¤×•×ª ×‘×—×©×‘×•×Ÿ",personalDetails:"×¤×¨×˜×™× ××™×©×™×™×",editProfile:"×¢×¨×™×›×ª ×¤×¨×•×¤×™×œ",name:"×©×",saveChanges:"×©××•×¨ ×©×™× ×•×™×™×",cancel:"×‘×™×˜×•×œ",addresses:"×›×ª×•×‘×•×ª",addAddress:"×”×•×¡×£ ×›×ª×•×‘×ª",editAddress:"×¢×¨×•×š ×›×ª×•×‘×ª",deleteAddress:"××—×§ ×›×ª×•×‘×ª",setAsDefault:"×”×’×“×¨ ×›×‘×¨×™×¨×ª ××—×“×œ",defaultAddress:"×›×ª×•×‘×ª ×‘×¨×™×¨×ª ××—×“×œ",addressLabel:"×©× ×”×›×ª×•×‘×ª",work:"×¢×‘×•×“×”",other:"××—×¨",noAddresses:"××™×Ÿ ×›×ª×•×‘×•×ª ×©××•×¨×•×ª",confirmDelete:"×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§?",profileUpdated:"×”×¤×¨×•×¤×™×œ ×¢×•×“×›×Ÿ ×‘×”×¦×œ×—×”",addressSaved:"×”×›×ª×•×‘×ª × ×©××¨×” ×‘×”×¦×œ×—×”",addressDeleted:"×”×›×ª×•×‘×ª × ××—×§×”",saving:"×©×•××¨...",saveToFavorites:"×©××•×¨ ×œ××•×¢×“×¤×™×",removeFromFavorites:"×”×¡×¨ ×××•×¢×“×¤×™×",shareProduct:"×©×ª×£ ××•×¦×¨",linkCopied:"×”×§×™×©×•×¨ ×”×•×¢×ª×§!",myFavorites:"×”××•×¢×“×¤×™× ×©×œ×™",noFavorites:"××™×Ÿ ×¢×“×™×™×Ÿ ××•×¦×¨×™× ××•×¢×“×¤×™×",addedToFavorites:"× ×•×¡×£ ×œ××•×¢×“×¤×™×",removedFromFavorites:"×”×•×¡×¨ ××”××•×¢×“×¤×™×",loginToFavorite:"×™×© ×œ×”×ª×—×‘×¨ ×›×“×™ ×œ×©××•×¨ ××•×¢×“×¤×™×",browseFavorites:"×’×œ×• ××ª ×›×œ ×”××•×¦×¨×™× ×©×œ× ×•",selectVariant:"×‘×—×¨ ××¤×©×¨×•×ª",variantUnavailable:"×œ× ×–××™×Ÿ",color:"×¦×‘×¢",size:"××™×“×”",material:"×—×•××¨",style:"×¡×’× ×•×Ÿ",weight:"××©×§×œ",capacity:"×§×™×‘×•×œ×ª",length:"××•×¨×š",inquiryAbout:"×¤× ×™×™×” ×‘× ×•×©×",sendInquiry:"×©×œ×— ×¤× ×™×™×”",callNow:"×”×ª×§×©×¨ ×¢×›×©×™×•",specifications:"××¤×¨×˜ ×˜×›× ×™",businessPhone:"[business_phone]",businessEmail:"[business_email]"};try{const n=await fetch(buildApiUrlWithLang("/api/ecommerce/storefront/products?websiteId="+t+"&featured=true")),o=await n.json();if(!o.success||!o.data?.length)return void(e.innerHTML='<div class="no-featured-products">'+(a.noFeaturedProducts||"No featured products yet. Check out all our products!")+"</div>");renderProductGrid(e,o.data,a,!0)}catch(t){console.error("Failed to load featured products",t),e.innerHTML='<div class="empty-cart">'+a.errorLoading+"</div>"}}async function loadFeaturedCategories(){const e=document.getElementById("zappy-featured-categories");if(!e)return;const t=window.ZAPPY_WEBSITE_ID;if(t)try{const a=await fetch(buildApiUrlWithLang("/api/ecommerce/storefront/featured-categories?websiteId="+t)),n=await a.json();if(!n.success||!n.data?.length){const e=document.getElementById("featured-categories");return void(e&&e.remove())}e.innerHTML=n.data.map(function(e){const t=resolveProductImageUrl(e.image)||"";return'<a href="'+("/category/"+(e.slug||e.id))+'" class="category-block" data-category-id="'+e.id+'" data-category-slug="'+(e.slug||"")+'"><div class="category-block-bg" style="background-image: url(\''+t+'\')"></div><div class="category-block-overlay"></div><div class="category-block-content"><span class="category-block-name">'+e.name+"</span></div></a>"}).join("")}catch(e){console.error("Failed to load featured categories",e);const t=document.getElementById("featured-categories");t&&t.remove()}}function getEcomText(e,t){if("undefined"!=typeof zappyI18n&&"function"==typeof zappyI18n.t){var a=zappyI18n.t("ecom_"+e);if(a&&a!=="ecom_"+e)return a}return t}function stripHtmlToText(e){if(!e)return"";var t=document.createElement("div");t.innerHTML=e,t.innerHTML=t.innerHTML.replace(/<\/p>/gi," ").replace(/<\/div>/gi," ").replace(/<\/li>/gi," ").replace(/<br\s*\/?>/gi," ").replace(/<\/h[1-6]>/gi," ");var a=t.textContent||t.innerText||"";return a=a.replace(/\s+/g," ").trim()}function renderProductGrid(e,t,a,n,o){var r=additionalJsProductLayout||"standard";if(!n){var i="list"===o?" view-list":"";e.className="product-grid layout-"+r+i,e.setAttribute("data-zappy-auto-grid","true")}var s=getEcomText("addToCart",a.addToCart);getEcomText("viewDetails",a.viewDetails);e.innerHTML=t.map(e=>{const t=!1!==e.custom_fields?.showPrice,n=e.sale_price&&parseFloat(e.sale_price)<parseFloat(e.price),o=parseInt(e.variant_count||0,10),r=parseInt(e.variant_price_count||0,10),i=parseFloat(e.variant_min_price),c=parseFloat(e.variant_max_price),d=o>1&&r>1&&Number.isFinite(i)&&Number.isFinite(c)&&i!==c,l=getEcomText("startingAt",a.startingAt||"Starting at"),u=t?d?l+" "+a.currency+i.toFixed(2):n?a.currency+parseFloat(e.sale_price).toFixed(2)+' <span class="original-price">'+a.currency+parseFloat(e.price).toFixed(2)+"</span>":a.currency+parseFloat(e.price).toFixed(2):"";var p=e.images&&e.images[0]?window.resolveProductImageUrl?window.resolveProductImageUrl(e.images[0]):e.images[0]:"",m=[];e.tags&&e.tags.length&&e.tags.forEach(function(e){var t=e.toLowerCase();"sale"===t||"××‘×¦×¢"===t?m.push('<span class="product-tag tag-sale">'+e+"</span>"):"new"===t||"×—×“×©"===t?m.push('<span class="product-tag tag-new">'+e+"</span>"):"featured"===t||"××•××œ×¥"===t?m.push('<span class="product-tag tag-featured">'+e+"</span>"):m.push('<span class="product-tag">'+e+"</span>")});var g=m.length>0?'<div class="product-tags">'+m.join("")+"</div>":"",f="",y=p?'<img src="'+p+'" alt="'+e.name+'">':'<div class="no-image-placeholder">ğŸ“¦</div>',v=additionalJsProductLayout||"standard",h=getPricePerUnitHtml(e),b=t?'<div class="price">'+u+"</div>"+h:"",w='<button class="card-favorite-btn" data-product-id="'+e.id+'" onclick="event.preventDefault(); event.stopPropagation(); toggleCardFavorite(this, \''+e.id+'\')" title="×©××•×¨ ×œ××•×¢×“×¤×™×"><svg class="heart-outline" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none"><path d="M14.7917 0.833C12.705 0.833 10.811 2.376 10 4.462C9.189 2.375 7.295 0.833 5.208 0.833C2.337 0.833 0 3.17 0 6.042C0 11.675 8.128 17.767 9.758 18.93L10 19.104L10.243 18.93C11.873 17.767 20 11.674 20 6.042C20 3.17 17.663 0.833 14.792 0.833ZM10 18.078C5.716 14.965 0.833 10.019 0.833 6.042C0.833 3.629 2.796 1.667 5.208 1.667C7.498 1.667 9.583 4.05 9.583 6.667H10.417C10.417 4.05 12.502 1.667 14.792 1.667C17.204 1.667 19.167 3.629 19.167 6.042C19.167 10.019 14.284 14.965 10 18.078Z" fill="currentColor"/></svg><svg class="heart-filled" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20"><path d="M14.7917 0.833C12.705 0.833 10.811 2.376 10 4.462C9.189 2.375 7.295 0.833 5.208 0.833C2.337 0.833 0 3.17 0 6.042C0 11.675 8.128 17.767 9.758 18.93L10 19.104L10.243 18.93C11.873 17.767 20 11.674 20 6.042C20 3.17 17.663 0.833 14.792 0.833Z" fill="#e74c3c"/></svg></button>';if("compact"===v)f=g+'<a href="/product/'+(e.slug||e.id)+'" class="product-card-link">'+y+'<div class="card-content"><h3>'+e.name+"</h3>"+b+"</div></a>"+w;else if("detailed"===v){var C=stripHtmlToText(e.description||""),E='<button class="add-to-cart" onclick="event.stopPropagation(); window.zappyHandleAddToCart('+JSON.stringify(e).replace(/"/g,"&quot;")+')">'+s+"</button>";f=g+'<a href="/product/'+(e.slug||e.id)+'" class="product-card-link">'+y+'<div class="card-content"><h3>'+e.name+"</h3><p>"+C+"</p>"+b+"</div></a>"+E+w}else{var k=stripHtmlToText(e.description||"");f=g+'<a href="/product/'+(e.slug||e.id)+'" class="product-card-link">'+y+'<div class="card-content"><h3>'+e.name+"</h3><p>"+k+"</p>"+b+"</div></a>"+w}return'<div class="product-card '+v+'" data-product-id="'+e.id+'">'+f+"</div>"}).join("")}async function loadCatalogCategories(){const e=document.getElementById("zappy-category-links"),t=document.getElementById("zappy-nav-category-links");if(e||t){var a=window.ZAPPY_WEBSITE_ID;if(a)try{var n=await fetch(buildApiUrlWithLang("/api/ecommerce/storefront/categories?websiteId="+a)),o=await n.json();if(!o.success||!o.data?.length)return;var r=o.data,i={},s=[];function c(e){var t=[];return(i[e]||[]).forEach(function(e){t.push(e),t=t.concat(c(e.id))}),t}function d(e){return"/category/"+(e.slug||e.id)}r.forEach(function(e){e.parent_id?(i[e.parent_id]||(i[e.parent_id]=[]),i[e.parent_id].push(e)):s.push(e)}),s.forEach(function(e){i[e.id]=c(e.id)});var l=s.map(function(e){var t=i[e.id]||[];if(0===t.length)return'<li data-category-id="'+e.id+'" data-category-slug="'+(e.slug||"")+'"><a href="'+d(e)+'">'+e.name+"</a></li>";var a='<li class="zappy-nav-parent" data-category-id="'+e.id+'" data-category-slug="'+(e.slug||"")+'"><a href="'+d(e)+'">'+e.name+"</a></li>";return t.forEach(function(e){a+='<li class="zappy-nav-child" data-category-id="'+e.id+'" data-category-slug="'+(e.slug||"")+'"><a href="'+d(e)+'">'+e.name+"</a></li>"}),a}).join(""),u=s.map(function(e){var t=i[e.id]||[];if(0===t.length)return'<a href="'+d(e)+'" class="catalog-menu-item" data-category-id="'+e.id+'" data-category-slug="'+(e.slug||"")+'">'+e.name+"</a>";var a=t.map(function(e){return'<a href="'+d(e)+'" class="catalog-menu-item" data-category-id="'+e.id+'" data-category-slug="'+(e.slug||"")+'">'+e.name+"</a>"}).join("");return'<div class="catalog-menu-parent" data-category-id="'+e.id+'" data-category-slug="'+(e.slug||"")+'"><a href="'+d(e)+'" class="catalog-menu-item catalog-menu-trigger">'+e.name+' <svg class="catalog-menu-chevron" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></a><div class="sub-menu">'+a+"</div></div>"}).join("");t&&(t.querySelectorAll("li[data-category-id]").forEach(function(e){e.remove()}),t.insertAdjacentHTML("beforeend",l)),e&&(e.querySelectorAll("[data-category-id]").forEach(function(e){e.remove()}),e.insertAdjacentHTML("beforeend",u))}catch(p){console.error("Failed to load categories",p)}}}function handleSubNavbarVisibility(){var e=window.location.pathname,t=new URLSearchParams(window.location.search).get("page");if(t&&(e=t),-1!==(e=e.toLowerCase()).indexOf("/product/")||"/product"===e||-1!==e.indexOf("/cart")||-1!==e.indexOf("/checkout")||-1!==e.indexOf("/order-success")||-1!==e.indexOf("/order")){var a=document.getElementById("zappy-catalog-menu"),n=document.querySelector(".zappy-announcement-bar");a&&a.style.setProperty("display","none","important"),n&&n.style.setProperty("display","none","important"),document.body.classList.add("zappy-focused-page"),"function"==typeof setupFixedHeaders&&setTimeout(setupFixedHeaders,50)}}function initTransparentNavbarScrollEffect(){var e=document.querySelector("nav.navbar, .navbar:not(.zappy-catalog-menu)");if(e){var t=getComputedStyle(e).backgroundColor;if("transparent"===t||"rgba(0, 0, 0, 0)"===t){var a=document.querySelector(".zappy-catalog-menu"),n=(getComputedStyle(document.body).backgroundColor||"rgb(0,0,0)").match(/\d+/g),o=n&&n.length>=3?"rgba("+n[0]+","+n[1]+","+n[2]+",0.85)":"rgba(0,0,0,0.85)";e.style.transition="background 0.3s ease, backdrop-filter 0.3s ease, -webkit-backdrop-filter 0.3s ease, box-shadow 0.3s ease",a&&(a.style.transition="background 0.3s ease, backdrop-filter 0.3s ease, -webkit-backdrop-filter 0.3s ease"),window.addEventListener("scroll",r,{passive:!0}),r()}}function r(){(window.scrollY||window.pageYOffset)>60?(e.style.background=o,e.style.backdropFilter="blur(12px)",e.style.webkitBackdropFilter="blur(12px)",e.style.boxShadow="0 2px 16px rgba(0,0,0,0.12)",a&&(a.style.background=o,a.style.backdropFilter="blur(12px)",a.style.webkitBackdropFilter="blur(12px)")):(e.style.background="transparent",e.style.backdropFilter="none",e.style.webkitBackdropFilter="none",e.style.boxShadow="none",a&&(a.style.background="transparent",a.style.backdropFilter="none",a.style.webkitBackdropFilter="none"))}}async function loadProductDetailPage(){const e=document.getElementById("product-detail");if(!e)return;const t=window.ZAPPY_WEBSITE_ID;if(!t)return;const a={products:"××•×¦×¨×™×",ourProducts:"×”××•×¦×¨×™× ×©×œ× ×•",featuredProducts:"××•×¦×¨×™× ××•××œ×¦×™×",noFeaturedProducts:"×¢×•×“ ×œ× × ×‘×—×¨×• ××•×¦×¨×™× ××•××œ×¦×™×. ×¦×¤×• ×‘×›×œ ×”××•×¦×¨×™× ×©×œ× ×•!",featuredCategories:"×§× ×• ×œ×¤×™ ×§×˜×’×•×¨×™×”",all:"×”×›×œ",featured:"××•××œ×¦×™×",new:"×—×“×©×™×",sale:"××‘×¦×¢×™×",loadingProducts:"×˜×•×¢×Ÿ ××•×¦×¨×™×...",cart:"×¢×’×œ×ª ×§× ×™×•×ª",yourCart:"×¢×’×œ×ª ×”×§× ×™×•×ª ×©×œ×š",emptyCart:"×”×¢×’×œ×” ×¨×™×§×”",total:'×¡×”"×›',proceedToCheckout:"×”××©×š ×œ×ª×©×œ×•×",checkout:"×ª×©×œ×•×",customerInfo:"×¤×¨×˜×™ ×œ×§×•×—",fullName:"×©× ××œ×",email:"××™××™×™×œ",phone:"×˜×œ×¤×•×Ÿ",shippingAddress:"×›×ª×•×‘×ª ×œ××©×œ×•×—",street:"×¨×—×•×‘ ×•××¡×¤×¨",apartment:"×“×™×¨×”, ×§×•××”, ×›× ×™×¡×”",city:"×¢×™×¨",zip:"××™×§×•×“",saveAddressForNextTime:"×©××•×¨ ××ª ×”×›×ª×•×‘×ª ×œ×¤×¢× ×”×‘××”",shippingMethod:"×©×™×˜×ª ××©×œ×•×—",loadingShipping:"×˜×•×¢×Ÿ ×©×™×˜×•×ª ××©×œ×•×—...",payment:"×ª×©×œ×•×",loadingPayment:"×˜×•×¢×Ÿ ××¤×©×¨×•×™×•×ª ×ª×©×œ×•×...",orderSummary:"×¡×™×›×•× ×”×–×× ×”",subtotal:"×¡×›×•× ×‘×™× ×™×™×",vat:'××¢"×',vatIncluded:'×›×•×œ×œ ××¢"×',shipping:"××©×œ×•×—",discount:"×”× ×—×”",totalToPay:'×¡×”"×› ×œ×ª×©×œ×•×',placeOrder:"×‘×¦×¢ ×”×–×× ×”",login:"×”×ª×—×‘×¨×•×ª",customerLogin:"×”×ª×—×‘×¨×•×ª ×œ×§×•×—×•×ª",enterEmail:"×”×–×Ÿ ××ª ×›×ª×•×‘×ª ×”××™××™×™×œ ×©×œ×š ×•× ×©×œ×— ×œ×š ×§×•×“ ×”×ª×—×‘×¨×•×ª",emailAddress:"×›×ª×•×‘×ª ××™××™×™×œ",sendCode:"×©×œ×— ×§×•×“",enterCode:"×”×–×Ÿ ××ª ×”×§×•×“ ×©× ×©×œ×— ×œ××™××™×™×œ ×©×œ×š",verificationCode:"×§×•×“ ××™××•×ª",verify:"×××ª",returnPolicy:"××“×™× ×™×•×ª ×”×—×–×¨×•×ª",addToCart:"×”×•×¡×£ ×œ×¢×’×œ×”",startingAt:"×”×—×œ ×",addedToCart:"×”××•×¦×¨ × ×•×¡×£ ×œ×¢×’×œ×”!",remove:"×”×¡×¨",noProducts:"××™×Ÿ ××•×¦×¨×™× ×œ×”×¦×’×” ×›×¨×’×¢",errorLoading:"×©×’×™××” ×‘×˜×¢×™× ×”",days:"×™××™×",currency:"â‚ª",free:"×—×™× ×",freeAbove:"××©×œ×•×— ×—×™× × ××¢×œ",noShippingMethods:"××™×Ÿ ××¤×©×¨×•×™×•×ª ××©×œ×•×— ×–××™× ×•×ª",viewAllResults:"×”×¦×’ ××ª ×›×œ ×”×ª×•×¦××•×ª",searchProducts:"×—×™×¤×•×© ××•×¦×¨×™×",productDetails:"×¤×¨×˜×™ ×”××•×¦×¨",viewDetails:"×œ×¤×¨×˜×™× × ×•×¡×¤×™×",inStock:"×‘××œ××™",outOfStock:"××–×œ ××”××œ××™",pleaseSelect:"× × ×œ×‘×—×•×¨",sku:'××§"×˜',category:"×§×˜×’×•×¨×™×”",relatedProducts:"××•×¦×¨×™× ×“×•××™×",productNotFound:"×”××•×¦×¨ ×œ× × ××¦×",backToProducts:"×—×–×¨×” ×œ××•×¦×¨×™×",home:"×‘×™×ª",quantity:"×›××•×ª",unitLabels:{piece:"×™×—'",kg:'×§"×’',gram:"×’×¨×",liter:"×œ×™×˜×¨",ml:'×"×œ'},perUnit:"/",couponCode:"×§×•×“ ×§×•×¤×•×Ÿ",enterCouponCode:"×”×–×Ÿ ×§×•×“ ×§×•×¤×•×Ÿ",applyCoupon:"×”×—×œ",removeCoupon:"×”×¡×¨",couponApplied:"×”×§×•×¤×•×Ÿ ×”×•×—×œ ×‘×”×¦×œ×—×”!",invalidCoupon:"×§×•×“ ×§×•×¤×•×Ÿ ×œ× ×ª×§×™×Ÿ",couponExpired:"×”×§×•×¤×•×Ÿ ×¤×’ ×ª×•×§×£",couponMinOrder:"×¡×›×•× ×”×–×× ×” ××™× ×™××œ×™",alreadyHaveAccount:"×›×‘×¨ ×™×© ×œ×š ×—×©×‘×•×Ÿ?",loginHere:"×”×ª×—×‘×¨ ×›××Ÿ",loggedInAs:"××—×•×‘×¨ ×›:",logout:"×”×ª× ×ª×§",haveCouponCode:"×™×© ×œ×™ ×§×•×“ ×§×•×¤×•×Ÿ",agreeToTerms:"×× ×™ ××¡×›×™×/×” ×œ",termsAndConditions:"×ª× ××™ ×”×©×™××•×©",pleaseAcceptTerms:"× × ×œ××©×¨ ××ª ×ª× ××™ ×”×©×™××•×©",nameRequired:"× × ×œ×”×–×™×Ÿ ×©× ××œ×",emailRequired:"× × ×œ×”×–×™×Ÿ ×›×ª×•×‘×ª ××™××™×™×œ",emailInvalid:"×›×ª×•×‘×ª ××™××™×™×œ ×œ× ×ª×§×™× ×”",phoneRequired:"× × ×œ×”×–×™×Ÿ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ",shippingRequired:"× × ×œ×‘×—×•×¨ ×©×™×˜×ª ××©×œ×•×—",streetRequired:"× × ×œ×”×–×™×Ÿ ×¨×—×•×‘ ×•××¡×¤×¨",cityRequired:"× × ×œ×”×–×™×Ÿ ×¢×™×¨",cartEmpty:"×”×¢×’×œ×” ×¨×™×§×”",paymentNotConfigured:"×ª×©×œ×•× ××§×•×•×Ÿ ×œ× ××•×’×“×¨",orderSuccess:"×”×”×–×× ×” ×”×ª×§×‘×œ×”!",thankYouOrder:"×ª×•×“×” ×¢×œ ×”×”×–×× ×”",orderNumber:"××¡×¤×¨ ×”×–×× ×”",orderConfirmation:"××™×©×•×¨ ×”×–×× ×” × ×©×œ×— ×œ××™××™×™×œ ×©×œ×š",orderProcessing:"×”×”×–×× ×” ×©×œ×š ×‘×˜×™×¤×•×œ. × ×¢×“×›×Ÿ ××•×ª×š ×›×©×”××©×œ×•×— ×™×¦× ×œ×“×¨×š.",continueShopping:"×œ×”××©×š ×§× ×™×•×ª",next:"×”×‘×",contactInformation:"×¤×¨×˜×™ ×”×ª×§×©×¨×•×ª",items:"×¤×¨×™×˜×™×",continueToHomePage:"×”××©×š ×œ×“×£ ×”×‘×™×ª",transactionDate:"×ª××¨×™×š ×¢×¡×§×”",paymentMethod:"×××¦×¢×™ ×ª×©×œ×•×",orderDetails:"×¤×¨×˜×™ ×”×”×–×× ×”",loadingOrder:"×˜×•×¢×Ÿ ×¤×¨×˜×™ ×”×–×× ×”...",orderNotFound:"×œ× × ××¦××” ×”×–×× ×”",orderItems:"×¤×¨×™×˜×™× ×‘×”×–×× ×”",paidAmount:"×¡×›×•× ×©×©×•×œ×",myAccount:"×”×—×©×‘×•×Ÿ ×©×œ×™",accountWelcome:"×‘×¨×•×š ×”×‘×",yourOrders:"×”×”×–×× ×•×ª ×©×œ×š",noOrders:"××™×Ÿ ×¢×“×™×™×Ÿ ×”×–×× ×•×ª",orderDate:"×ª××¨×™×š",orderStatus:"×¡×˜×˜×•×¡",orderTotal:'×¡×”"×›',viewOrder:"×¦×¤×” ×‘×”×–×× ×”",statusPending:"×××ª×™×Ÿ ×œ×ª×©×œ×•×",statusPaid:"×©×•×œ×",statusProcessing:"×‘×˜×™×¤×•×œ",statusShipped:"× ×©×œ×—",statusDelivered:"× ××¡×¨",statusCancelled:"×‘×•×˜×œ",notLoggedIn:"×œ× ××—×•×‘×¨",pleaseLogin:"×™×© ×œ×”×ª×—×‘×¨ ×›×“×™ ×œ×¦×¤×•×ª ×‘×—×©×‘×•×Ÿ",personalDetails:"×¤×¨×˜×™× ××™×©×™×™×",editProfile:"×¢×¨×™×›×ª ×¤×¨×•×¤×™×œ",name:"×©×",saveChanges:"×©××•×¨ ×©×™× ×•×™×™×",cancel:"×‘×™×˜×•×œ",addresses:"×›×ª×•×‘×•×ª",addAddress:"×”×•×¡×£ ×›×ª×•×‘×ª",editAddress:"×¢×¨×•×š ×›×ª×•×‘×ª",deleteAddress:"××—×§ ×›×ª×•×‘×ª",setAsDefault:"×”×’×“×¨ ×›×‘×¨×™×¨×ª ××—×“×œ",defaultAddress:"×›×ª×•×‘×ª ×‘×¨×™×¨×ª ××—×“×œ",addressLabel:"×©× ×”×›×ª×•×‘×ª",work:"×¢×‘×•×“×”",other:"××—×¨",noAddresses:"××™×Ÿ ×›×ª×•×‘×•×ª ×©××•×¨×•×ª",confirmDelete:"×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§?",profileUpdated:"×”×¤×¨×•×¤×™×œ ×¢×•×“×›×Ÿ ×‘×”×¦×œ×—×”",addressSaved:"×”×›×ª×•×‘×ª × ×©××¨×” ×‘×”×¦×œ×—×”",addressDeleted:"×”×›×ª×•×‘×ª × ××—×§×”",saving:"×©×•××¨...",saveToFavorites:"×©××•×¨ ×œ××•×¢×“×¤×™×",removeFromFavorites:"×”×¡×¨ ×××•×¢×“×¤×™×",shareProduct:"×©×ª×£ ××•×¦×¨",linkCopied:"×”×§×™×©×•×¨ ×”×•×¢×ª×§!",myFavorites:"×”××•×¢×“×¤×™× ×©×œ×™",noFavorites:"××™×Ÿ ×¢×“×™×™×Ÿ ××•×¦×¨×™× ××•×¢×“×¤×™×",addedToFavorites:"× ×•×¡×£ ×œ××•×¢×“×¤×™×",removedFromFavorites:"×”×•×¡×¨ ××”××•×¢×“×¤×™×",loginToFavorite:"×™×© ×œ×”×ª×—×‘×¨ ×›×“×™ ×œ×©××•×¨ ××•×¢×“×¤×™×",browseFavorites:"×’×œ×• ××ª ×›×œ ×”××•×¦×¨×™× ×©×œ× ×•",selectVariant:"×‘×—×¨ ××¤×©×¨×•×ª",variantUnavailable:"×œ× ×–××™×Ÿ",color:"×¦×‘×¢",size:"××™×“×”",material:"×—×•××¨",style:"×¡×’× ×•×Ÿ",weight:"××©×§×œ",capacity:"×§×™×‘×•×œ×ª",length:"××•×¨×š",inquiryAbout:"×¤× ×™×™×” ×‘× ×•×©×",sendInquiry:"×©×œ×— ×¤× ×™×™×”",callNow:"×”×ª×§×©×¨ ×¢×›×©×™×•",specifications:"××¤×¨×˜ ×˜×›× ×™",businessPhone:"[business_phone]",businessEmail:"[business_email]"};let n=window.location.pathname;const o=new URLSearchParams(window.location.search).get("page");o&&(n=o);const r=n.split("/"),i=r[r.length-1];if(i&&"product"!==i){console.log("Loading product with slug:",i);try{const n=await fetch(buildApiUrlWithLang("/api/ecommerce/storefront/products/"+encodeURIComponent(i)+"?websiteId="+t)),o=await n.json();if(!o.success||!o.data)return void showProductNotFound(e,a);const r=o.data;renderProductDetail(e,r,a),document.title=r.name+" - "+(document.title.split(" - ").pop()||""),loadRelatedProducts(r,a)}catch(t){console.error("Failed to load product",t),showProductNotFound(e,a)}}else showProductNotFound(e,a)}async function loadCategoryPage(){const e=document.getElementById("category-page");if(!e)return;const t=window.ZAPPY_WEBSITE_ID;if(!t)return;const a={products:"××•×¦×¨×™×",ourProducts:"×”××•×¦×¨×™× ×©×œ× ×•",featuredProducts:"××•×¦×¨×™× ××•××œ×¦×™×",noFeaturedProducts:"×¢×•×“ ×œ× × ×‘×—×¨×• ××•×¦×¨×™× ××•××œ×¦×™×. ×¦×¤×• ×‘×›×œ ×”××•×¦×¨×™× ×©×œ× ×•!",featuredCategories:"×§× ×• ×œ×¤×™ ×§×˜×’×•×¨×™×”",all:"×”×›×œ",featured:"××•××œ×¦×™×",new:"×—×“×©×™×",sale:"××‘×¦×¢×™×",loadingProducts:"×˜×•×¢×Ÿ ××•×¦×¨×™×...",cart:"×¢×’×œ×ª ×§× ×™×•×ª",yourCart:"×¢×’×œ×ª ×”×§× ×™×•×ª ×©×œ×š",emptyCart:"×”×¢×’×œ×” ×¨×™×§×”",total:'×¡×”"×›',proceedToCheckout:"×”××©×š ×œ×ª×©×œ×•×",checkout:"×ª×©×œ×•×",customerInfo:"×¤×¨×˜×™ ×œ×§×•×—",fullName:"×©× ××œ×",email:"××™××™×™×œ",phone:"×˜×œ×¤×•×Ÿ",shippingAddress:"×›×ª×•×‘×ª ×œ××©×œ×•×—",street:"×¨×—×•×‘ ×•××¡×¤×¨",apartment:"×“×™×¨×”, ×§×•××”, ×›× ×™×¡×”",city:"×¢×™×¨",zip:"××™×§×•×“",saveAddressForNextTime:"×©××•×¨ ××ª ×”×›×ª×•×‘×ª ×œ×¤×¢× ×”×‘××”",shippingMethod:"×©×™×˜×ª ××©×œ×•×—",loadingShipping:"×˜×•×¢×Ÿ ×©×™×˜×•×ª ××©×œ×•×—...",payment:"×ª×©×œ×•×",loadingPayment:"×˜×•×¢×Ÿ ××¤×©×¨×•×™×•×ª ×ª×©×œ×•×...",orderSummary:"×¡×™×›×•× ×”×–×× ×”",subtotal:"×¡×›×•× ×‘×™× ×™×™×",vat:'××¢"×',vatIncluded:'×›×•×œ×œ ××¢"×',shipping:"××©×œ×•×—",discount:"×”× ×—×”",totalToPay:'×¡×”"×› ×œ×ª×©×œ×•×',placeOrder:"×‘×¦×¢ ×”×–×× ×”",login:"×”×ª×—×‘×¨×•×ª",customerLogin:"×”×ª×—×‘×¨×•×ª ×œ×§×•×—×•×ª",enterEmail:"×”×–×Ÿ ××ª ×›×ª×•×‘×ª ×”××™××™×™×œ ×©×œ×š ×•× ×©×œ×— ×œ×š ×§×•×“ ×”×ª×—×‘×¨×•×ª",emailAddress:"×›×ª×•×‘×ª ××™××™×™×œ",sendCode:"×©×œ×— ×§×•×“",enterCode:"×”×–×Ÿ ××ª ×”×§×•×“ ×©× ×©×œ×— ×œ××™××™×™×œ ×©×œ×š",verificationCode:"×§×•×“ ××™××•×ª",verify:"×××ª",returnPolicy:"××“×™× ×™×•×ª ×”×—×–×¨×•×ª",addToCart:"×”×•×¡×£ ×œ×¢×’×œ×”",startingAt:"×”×—×œ ×",addedToCart:"×”××•×¦×¨ × ×•×¡×£ ×œ×¢×’×œ×”!",remove:"×”×¡×¨",noProducts:"××™×Ÿ ××•×¦×¨×™× ×œ×”×¦×’×” ×›×¨×’×¢",errorLoading:"×©×’×™××” ×‘×˜×¢×™× ×”",days:"×™××™×",currency:"â‚ª",free:"×—×™× ×",freeAbove:"××©×œ×•×— ×—×™× × ××¢×œ",noShippingMethods:"××™×Ÿ ××¤×©×¨×•×™×•×ª ××©×œ×•×— ×–××™× ×•×ª",viewAllResults:"×”×¦×’ ××ª ×›×œ ×”×ª×•×¦××•×ª",searchProducts:"×—×™×¤×•×© ××•×¦×¨×™×",productDetails:"×¤×¨×˜×™ ×”××•×¦×¨",viewDetails:"×œ×¤×¨×˜×™× × ×•×¡×¤×™×",inStock:"×‘××œ××™",outOfStock:"××–×œ ××”××œ××™",pleaseSelect:"× × ×œ×‘×—×•×¨",sku:'××§"×˜',category:"×§×˜×’×•×¨×™×”",relatedProducts:"××•×¦×¨×™× ×“×•××™×",productNotFound:"×”××•×¦×¨ ×œ× × ××¦×",backToProducts:"×—×–×¨×” ×œ××•×¦×¨×™×",home:"×‘×™×ª",quantity:"×›××•×ª",unitLabels:{piece:"×™×—'",kg:'×§"×’',gram:"×’×¨×",liter:"×œ×™×˜×¨",ml:'×"×œ'},perUnit:"/",couponCode:"×§×•×“ ×§×•×¤×•×Ÿ",enterCouponCode:"×”×–×Ÿ ×§×•×“ ×§×•×¤×•×Ÿ",applyCoupon:"×”×—×œ",removeCoupon:"×”×¡×¨",couponApplied:"×”×§×•×¤×•×Ÿ ×”×•×—×œ ×‘×”×¦×œ×—×”!",invalidCoupon:"×§×•×“ ×§×•×¤×•×Ÿ ×œ× ×ª×§×™×Ÿ",couponExpired:"×”×§×•×¤×•×Ÿ ×¤×’ ×ª×•×§×£",couponMinOrder:"×¡×›×•× ×”×–×× ×” ××™× ×™××œ×™",alreadyHaveAccount:"×›×‘×¨ ×™×© ×œ×š ×—×©×‘×•×Ÿ?",loginHere:"×”×ª×—×‘×¨ ×›××Ÿ",loggedInAs:"××—×•×‘×¨ ×›:",logout:"×”×ª× ×ª×§",haveCouponCode:"×™×© ×œ×™ ×§×•×“ ×§×•×¤×•×Ÿ",agreeToTerms:"×× ×™ ××¡×›×™×/×” ×œ",termsAndConditions:"×ª× ××™ ×”×©×™××•×©",pleaseAcceptTerms:"× × ×œ××©×¨ ××ª ×ª× ××™ ×”×©×™××•×©",nameRequired:"× × ×œ×”×–×™×Ÿ ×©× ××œ×",emailRequired:"× × ×œ×”×–×™×Ÿ ×›×ª×•×‘×ª ××™××™×™×œ",emailInvalid:"×›×ª×•×‘×ª ××™××™×™×œ ×œ× ×ª×§×™× ×”",phoneRequired:"× × ×œ×”×–×™×Ÿ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ",shippingRequired:"× × ×œ×‘×—×•×¨ ×©×™×˜×ª ××©×œ×•×—",streetRequired:"× × ×œ×”×–×™×Ÿ ×¨×—×•×‘ ×•××¡×¤×¨",cityRequired:"× × ×œ×”×–×™×Ÿ ×¢×™×¨",cartEmpty:"×”×¢×’×œ×” ×¨×™×§×”",paymentNotConfigured:"×ª×©×œ×•× ××§×•×•×Ÿ ×œ× ××•×’×“×¨",orderSuccess:"×”×”×–×× ×” ×”×ª×§×‘×œ×”!",thankYouOrder:"×ª×•×“×” ×¢×œ ×”×”×–×× ×”",orderNumber:"××¡×¤×¨ ×”×–×× ×”",orderConfirmation:"××™×©×•×¨ ×”×–×× ×” × ×©×œ×— ×œ××™××™×™×œ ×©×œ×š",orderProcessing:"×”×”×–×× ×” ×©×œ×š ×‘×˜×™×¤×•×œ. × ×¢×“×›×Ÿ ××•×ª×š ×›×©×”××©×œ×•×— ×™×¦× ×œ×“×¨×š.",continueShopping:"×œ×”××©×š ×§× ×™×•×ª",next:"×”×‘×",contactInformation:"×¤×¨×˜×™ ×”×ª×§×©×¨×•×ª",items:"×¤×¨×™×˜×™×",continueToHomePage:"×”××©×š ×œ×“×£ ×”×‘×™×ª",transactionDate:"×ª××¨×™×š ×¢×¡×§×”",paymentMethod:"×××¦×¢×™ ×ª×©×œ×•×",orderDetails:"×¤×¨×˜×™ ×”×”×–×× ×”",loadingOrder:"×˜×•×¢×Ÿ ×¤×¨×˜×™ ×”×–×× ×”...",orderNotFound:"×œ× × ××¦××” ×”×–×× ×”",orderItems:"×¤×¨×™×˜×™× ×‘×”×–×× ×”",paidAmount:"×¡×›×•× ×©×©×•×œ×",myAccount:"×”×—×©×‘×•×Ÿ ×©×œ×™",accountWelcome:"×‘×¨×•×š ×”×‘×",yourOrders:"×”×”×–×× ×•×ª ×©×œ×š",noOrders:"××™×Ÿ ×¢×“×™×™×Ÿ ×”×–×× ×•×ª",orderDate:"×ª××¨×™×š",orderStatus:"×¡×˜×˜×•×¡",orderTotal:'×¡×”"×›',viewOrder:"×¦×¤×” ×‘×”×–×× ×”",statusPending:"×××ª×™×Ÿ ×œ×ª×©×œ×•×",statusPaid:"×©×•×œ×",statusProcessing:"×‘×˜×™×¤×•×œ",statusShipped:"× ×©×œ×—",statusDelivered:"× ××¡×¨",statusCancelled:"×‘×•×˜×œ",notLoggedIn:"×œ× ××—×•×‘×¨",pleaseLogin:"×™×© ×œ×”×ª×—×‘×¨ ×›×“×™ ×œ×¦×¤×•×ª ×‘×—×©×‘×•×Ÿ",personalDetails:"×¤×¨×˜×™× ××™×©×™×™×",editProfile:"×¢×¨×™×›×ª ×¤×¨×•×¤×™×œ",name:"×©×",saveChanges:"×©××•×¨ ×©×™× ×•×™×™×",cancel:"×‘×™×˜×•×œ",addresses:"×›×ª×•×‘×•×ª",addAddress:"×”×•×¡×£ ×›×ª×•×‘×ª",editAddress:"×¢×¨×•×š ×›×ª×•×‘×ª",deleteAddress:"××—×§ ×›×ª×•×‘×ª",setAsDefault:"×”×’×“×¨ ×›×‘×¨×™×¨×ª ××—×“×œ",defaultAddress:"×›×ª×•×‘×ª ×‘×¨×™×¨×ª ××—×“×œ",addressLabel:"×©× ×”×›×ª×•×‘×ª",work:"×¢×‘×•×“×”",other:"××—×¨",noAddresses:"××™×Ÿ ×›×ª×•×‘×•×ª ×©××•×¨×•×ª",confirmDelete:"×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§?",profileUpdated:"×”×¤×¨×•×¤×™×œ ×¢×•×“×›×Ÿ ×‘×”×¦×œ×—×”",addressSaved:"×”×›×ª×•×‘×ª × ×©××¨×” ×‘×”×¦×œ×—×”",addressDeleted:"×”×›×ª×•×‘×ª × ××—×§×”",saving:"×©×•××¨...",saveToFavorites:"×©××•×¨ ×œ××•×¢×“×¤×™×",removeFromFavorites:"×”×¡×¨ ×××•×¢×“×¤×™×",shareProduct:"×©×ª×£ ××•×¦×¨",linkCopied:"×”×§×™×©×•×¨ ×”×•×¢×ª×§!",myFavorites:"×”××•×¢×“×¤×™× ×©×œ×™",noFavorites:"××™×Ÿ ×¢×“×™×™×Ÿ ××•×¦×¨×™× ××•×¢×“×¤×™×",addedToFavorites:"× ×•×¡×£ ×œ××•×¢×“×¤×™×",removedFromFavorites:"×”×•×¡×¨ ××”××•×¢×“×¤×™×",loginToFavorite:"×™×© ×œ×”×ª×—×‘×¨ ×›×“×™ ×œ×©××•×¨ ××•×¢×“×¤×™×",browseFavorites:"×’×œ×• ××ª ×›×œ ×”××•×¦×¨×™× ×©×œ× ×•",selectVariant:"×‘×—×¨ ××¤×©×¨×•×ª",variantUnavailable:"×œ× ×–××™×Ÿ",color:"×¦×‘×¢",size:"××™×“×”",material:"×—×•××¨",style:"×¡×’× ×•×Ÿ",weight:"××©×§×œ",capacity:"×§×™×‘×•×œ×ª",length:"××•×¨×š",inquiryAbout:"×¤× ×™×™×” ×‘× ×•×©×",sendInquiry:"×©×œ×— ×¤× ×™×™×”",callNow:"×”×ª×§×©×¨ ×¢×›×©×™×•",specifications:"××¤×¨×˜ ×˜×›× ×™",businessPhone:"[business_phone]",businessEmail:"[business_email]"};let n=window.location.pathname;const o=new URLSearchParams(window.location.search).get("page");o&&(n=o);const r=n.split("/"),i=r[r.length-1];if(i&&"category"!==i){console.log("Loading category with slug:",i);try{let n=null;try{const e=await fetch(buildApiUrlWithLang("/api/ecommerce/storefront/categories/"+encodeURIComponent(i)+"?websiteId="+t));if(e&&e.ok){const t=await e.json();t&&t.success&&t.data&&(n=t.data)}}catch(e){}if(!n){const o=await fetch(buildApiUrlWithLang("/api/ecommerce/storefront/categories?websiteId="+t));if(!o||!o.ok)return void showCategoryNotFound(e,a);const r=await o.json();if(n=(r&&r.success&&Array.isArray(r.data)?r.data:[]).find(function(e){return e&&(e.slug===i||e.id===i)})||null,!n)return void showCategoryNotFound(e,a);try{const e=await fetch(buildApiUrlWithLang("/api/ecommerce/storefront/products?websiteId="+t+"&categoryId="+encodeURIComponent(n.id)));if(e&&e.ok){const t=await e.json(),a=t&&t.success&&Array.isArray(t.data)?t.data:[];n={...n,products:a}}}catch(e){n={...n,products:[]}}}renderCategoryPage(e,n,a),document.title=n.name+" - "+(document.title.split(" - ").pop()||"")}catch(t){console.error("Failed to load category",t),showCategoryNotFound(e,a)}}else showCategoryNotFound(e,a)}function showCategoryNotFound(e,t){e.innerHTML=`\n    <div class="category-not-found">\n      <h2>${t.categoryNotFound||"Category not found"}</h2>\n      <a href="/products" class="btn btn-primary">${t.backToProducts}</a>\n    </div>\n  `}function renderCategoryPage(e,t,a){const n=document.getElementById("category-header"),o=document.getElementById("zappy-category-products"),r="rtl"===document.documentElement.dir||"rtl"===document.body.dir;if(n){const e=t.image?'<div class="category-banner" style="background-image: url(\''+resolveProductImageUrl(t.image)+"')\"></div>":"";n.innerHTML=e+'<div class="category-info"><h1>'+t.name+"</h1>"+(t.description?'<p class="category-description">'+t.description+"</p>":"")+"</div>"}catProductsCache=t.products||[],initCategoryToolbar(r,a),applyCategoryFiltersAndRender(o,a),"function"==typeof _syncCardFavorites&&_syncCardFavorites()}function applyCategoryFiltersAndRender(e,t){if(e||(e=document.getElementById("zappy-category-products")),e){var a=catProductsCache.slice();additionalJsSidebarFiltersConfig.enabled&&(catActiveSidebarFilters.brands&&catActiveSidebarFilters.brands.length>0&&(a=a.filter(function(e){return e.brand&&catActiveSidebarFilters.brands.includes(e.brand)})),catActiveSidebarFilters.tags.length>0&&(a=a.filter(function(e){return e.tags&&e.tags.some(function(e){return catActiveSidebarFilters.tags.includes(e)})})),null!=catActiveSidebarFilters.priceMin&&(a=a.filter(function(e){return parseFloat(e.price)>=catActiveSidebarFilters.priceMin})),null!=catActiveSidebarFilters.priceMax&&(a=a.filter(function(e){return parseFloat(e.price)<=catActiveSidebarFilters.priceMax})),catActiveSidebarFilters.sale&&(a=a.filter(function(e){return e.sale_price&&parseFloat(e.sale_price)<parseFloat(e.price)}))),catCurrentSortKey&&"default"!==catCurrentSortKey&&(a=a.slice().sort(function(e,t){switch(catCurrentSortKey){case"popularity":return(parseInt(t.purchase_count)||0)-(parseInt(e.purchase_count)||0);case"price_asc":return parseFloat(e.price)-parseFloat(t.price);case"price_desc":return parseFloat(t.price)-parseFloat(e.price);case"name_asc":return(e.name||"").localeCompare(t.name||"");case"name_desc":return(t.name||"").localeCompare(e.name||"");case"newest":return new Date(t.created_at)-new Date(e.created_at);default:return 0}}));var n=document.getElementById("category-products-count"),o="rtl"===document.documentElement.dir||"rtl"===document.body.dir;n&&(n.textContent=o?a.length+" ××•×¦×¨×™×":"Showing "+a.length+" products"),0!==a.length?renderProductGrid(e,a,t,!1,catCurrentViewMode):e.innerHTML='<div class="no-products">'+(t.noProducts||"No products found.")+"</div>"}}function initCategoryToolbar(e,t){var a=document.getElementById("category-toolbar");if(a){var n=!1;if(additionalJsSortingConfig.enabled&&additionalJsSortingConfig.options&&additionalJsSortingConfig.options.length>0){n=!0;var o=document.getElementById("cat-sort-control"),r=document.getElementById("cat-sort-select");if(o&&r){o.style.display="";var i={popularity:e?"×¤×•×¤×•×œ×¨×™×•×ª":"Popularity",price_asc:e?"××—×™×¨: × ××•×š ×œ×’×‘×•×”":"Price: Low to High",price_desc:e?"××—×™×¨: ×’×‘×•×” ×œ× ××•×š":"Price: High to Low",name_asc:e?"×©×: ×-×ª":"Name: A to Z",name_desc:e?"×©×: ×ª-×":"Name: Z to A",newest:e?"×—×“×© ×‘×™×•×ª×¨":"Newest First"};["popularity","price_asc","price_desc","name_asc","name_desc","newest"].forEach(function(e){if(additionalJsSortingConfig.options.includes(e)&&i[e]){var t=document.createElement("option");t.value=e,t.textContent=i[e],r.appendChild(t)}}),r.addEventListener("change",function(){catCurrentSortKey=r.value,applyCategoryFiltersAndRender(null,t)})}}if(additionalJsViewToggleEnabled){n=!0;var s=document.getElementById("cat-view-toggle");if(s){s.style.display="";var c=s.querySelectorAll(".view-btn");c.forEach(function(e){e.classList.toggle("active",e.getAttribute("data-view")===catCurrentViewMode),e.addEventListener("click",function(){catCurrentViewMode=e.getAttribute("data-view"),localStorage.setItem("zappy_view_mode_"+(window.ZAPPY_WEBSITE_ID||""),catCurrentViewMode),c.forEach(function(e){e.classList.toggle("active",e.getAttribute("data-view")===catCurrentViewMode)}),applyCategoryFiltersAndRender(null,t)})})}}additionalJsSidebarFiltersConfig.enabled&&additionalJsSidebarFiltersConfig.filters&&additionalJsSidebarFiltersConfig.filters.length>0&&(n=!0,initCategorySidebarFilters(e,t)),n&&(a.style.display="")}}function catBuildPriceRanges(e){if(!e||0===e.length)return[];var t=Math.min.apply(null,e),a=Math.max.apply(null,e);if(t===a)return[];var n,o=a-t;n=o<=50?10:o<=200?25:o<=500?50:o<=1e3?100:o<=5e3?500:1e3;for(var r=Math.floor(t/n)*n,i=[];r<a;){var s=r+n,c=e.filter(function(e){return e>=r&&e<s}).length;r+n>=a&&(c=e.filter(function(e){return e>=r}).length),c>0&&i.push({min:r,max:s,count:c}),r=s}return i}function catFormatPrice(e){return e%1==0?e.toString():e.toFixed(2)}function initCategorySidebarFilters(e,t){var a=document.getElementById("category-sidebar");if(a){var n=(additionalJsSidebarFiltersConfig.filters||[]).filter(function(e){return"category"!==e});if(0!==n.length){var o=e?"â‚ª":"$",r="";if(r+='<div class="sidebar-header"><span class="sidebar-title">'+(e?"×¡×™× ×•×Ÿ":"Filters")+"</span>",r+='<div class="sidebar-header-actions">',r+='<button class="sidebar-clear-btn" id="category-sidebar-clear" title="'+(e?"× ×§×” ×”×›×œ":"Clear all")+'">'+(e?"× ×§×” ×”×›×œ":"Clear all")+"</button>",r+='<button class="sidebar-mobile-close" id="category-sidebar-mobile-close" title="'+(e?"×¡×’×•×¨":"Close")+'">&times;</button>',r+="</div></div>",n.includes("brand")){var i={};catProductsCache.forEach(function(e){e.brand&&(i[e.brand]=(i[e.brand]||0)+1)});var s=Object.keys(i);s.length>0&&(s.sort(),r+='<div class="sidebar-section"><div class="sidebar-section-title">'+(e?"××•×ª×’":"Brand")+"</div>",s.forEach(function(e){r+='<label class="sidebar-item"><input type="checkbox" data-filter="brand" value="'+e+'"> '+e+' <span class="count">('+i[e]+")</span></label>"}),r+="</div>")}if(n.includes("tags")){var c={};catProductsCache.forEach(function(e){e.tags&&e.tags.length&&e.tags.forEach(function(e){c[e]=(c[e]||0)+1})});var d=Object.keys(c);d.length>0&&(d.sort(),r+='<div class="sidebar-section"><div class="sidebar-section-title">'+(e?"×ª×’×™×•×ª":"Tags")+"</div>",d.forEach(function(e){r+='<label class="sidebar-item"><input type="checkbox" data-filter="tag" value="'+e+'"> '+e+' <span class="count">('+c[e]+")</span></label>"}),r+="</div>")}if(n.includes("price")){var l=catBuildPriceRanges(catProductsCache.map(function(e){return parseFloat(e.price)||0}).filter(function(e){return e>0}));l.length>0&&(r+='<div class="sidebar-section"><div class="sidebar-section-title">'+(e?"×˜×•×•×— ××—×™×¨×™×":"Price Range")+"</div>",l.forEach(function(e,t){var a=o+catFormatPrice(e.min)+" â€“ "+o+catFormatPrice(e.max);r+='<label class="sidebar-item"><input type="radio" name="cat-sidebar-price-range" data-filter="price-range" data-min="'+e.min+'" data-max="'+e.max+'" value="'+t+'"> '+a+' <span class="count">('+e.count+")</span></label>"}),r+="</div>")}if(n.includes("sale")){var u=catProductsCache.filter(function(e){return e.sale_price&&parseFloat(e.sale_price)<parseFloat(e.price)}).length;u>0&&(r+='<div class="sidebar-section"><div class="sidebar-section-title">'+(e?"××‘×¦×¢×™×":"On Sale")+"</div>",r+='<label class="sidebar-item"><input type="checkbox" data-filter="sale"> '+(e?"×”×¦×’ ××•×¦×¨×™× ×‘××‘×¦×¢":"Show sale items")+' <span class="count">('+u+")</span></label>",r+="</div>")}a.innerHTML=r,a.style.display="";var p=document.getElementById("cat-sidebar-toggle-btn"),m=document.createElement("div");m.className="sidebar-overlay",m.id="category-sidebar-overlay",a.parentNode.insertBefore(m,a),p&&(p.style.display="",p.addEventListener("click",function(){a.classList.add("open"),m.classList.add("active")})),m.addEventListener("click",y);var g=document.getElementById("category-sidebar-mobile-close");g&&g.addEventListener("click",y),a.querySelectorAll('input[data-filter="brand"]').forEach(function(e){e.addEventListener("change",function(){catActiveSidebarFilters.brands=Array.from(a.querySelectorAll('input[data-filter="brand"]:checked')).map(function(e){return e.value}),applyCategoryFiltersAndRender(null,t)})}),a.querySelectorAll('input[data-filter="tag"]').forEach(function(e){e.addEventListener("change",function(){catActiveSidebarFilters.tags=Array.from(a.querySelectorAll('input[data-filter="tag"]:checked')).map(function(e){return e.value}),applyCategoryFiltersAndRender(null,t)})}),a.querySelectorAll('input[data-filter="sale"]').forEach(function(e){e.addEventListener("change",function(){catActiveSidebarFilters.sale=e.checked,applyCategoryFiltersAndRender(null,t)})}),a.querySelectorAll('input[data-filter="price-range"]').forEach(function(e){e.addEventListener("change",function(){catActiveSidebarFilters.priceMin=parseFloat(e.getAttribute("data-min")),catActiveSidebarFilters.priceMax=parseFloat(e.getAttribute("data-max")),applyCategoryFiltersAndRender(null,t)})});var f=document.getElementById("category-sidebar-clear");f&&f.addEventListener("click",function(){catActiveSidebarFilters={categories:[],brands:[],tags:[],priceMin:null,priceMax:null,sale:!1},a.querySelectorAll('input[type="checkbox"]').forEach(function(e){e.checked=!1}),a.querySelectorAll('input[type="radio"]').forEach(function(e){e.checked=!1}),applyCategoryFiltersAndRender(null,t)})}}function y(){a.classList.remove("open"),m.classList.remove("active")}}function showProductNotFound(e,t){e.innerHTML=`\n    <div class="product-not-found">\n      <h2>${t.productNotFound}</h2>\n      <a href="/products" class="btn btn-primary">${t.backToProducts}</a>\n    </div>\n  `}function renderProductDetail(e,t,a){const n=(t.images||[]).map(function(e){return window.resolveProductImageUrl?window.resolveProductImageUrl(e):e}).filter(Boolean),o=n[0]||"",r=n.length>1,i="out_of_stock"!==t.stock_status,s=t.sale_price&&parseFloat(t.sale_price)<parseFloat(t.price),c=s?parseFloat(t.sale_price):parseFloat(t.price),d=parseFloat(t.price),l=!1!==t.custom_fields?.showPrice,u=t.variants||[],p=u.length>0,m=u.filter(e=>!1!==e.is_active),g=m.map(e=>null!==e.price&&void 0!==e.price?parseFloat(e.price):c).filter(e=>Number.isFinite(e)),f=Array.from(new Set(g)),y=m.length>1&&f.length>1,v=y?Math.min(...f):null,h=getEcomText("startingAt",a.startingAt||"Starting at");let b="";if(p){const e={};u.forEach(t=>{t.attributes&&!1!==t.is_active&&Object.entries(t.attributes).forEach(([t,a])=>{e[t]||(e[t]=new Set),e[t].add(a)})});const t={color:a.color||"Color",size:a.size||"Size",material:a.material||"Material",style:a.style||"Style",weight:a.weight||"Weight",capacity:a.capacity||"Capacity",length:a.length||"Length"};b='<div class="product-variants" id="product-variants">'+(Object.keys(e).length>0?Object.entries(e).map(([e,a])=>{const n=t[e.toLowerCase()]||e.charAt(0).toUpperCase()+e.slice(1),o=Array.from(a).sort((e,t)=>{const a=parseFloat(e),n=parseFloat(t);return isNaN(a)||isNaN(n)?String(e).localeCompare(String(t)):a-n}),r="color"===e.toLowerCase(),i=o.map(t=>{if(r){var a=t;return/^#[0-9A-Fa-f]{3,6}$/.test(t)||(a=t.toLowerCase()),'<button type="button" class="variant-option color-swatch" data-attr="'+e+'" data-value="'+t+'" style="background-color: '+a+';" title="'+t+'"></button>'}return'<button type="button" class="variant-option" data-attr="'+e+'" data-value="'+t+'">'+t+"</button>"}).join("");return'<div class="variant-group" data-group="'+e+'"><label class="variant-group-label">'+n+': <span class="variant-selected-value"></span></label><div class="variant-options">'+i+"</div></div>"}).join(""):(()=>{const e=a.selectVariant||"Select option",t=m.map(t=>{const a=t.name||t.sku||e;return'<button type="button" class="variant-option" data-attr="variant" data-value="'+t.id+'" data-variant-id="'+t.id+'">'+a+"</button>"}).join("");return'<div class="variant-group" data-group="variant"><label class="variant-group-label">'+e+': <span class="variant-selected-value"></span></label><div class="variant-options">'+t+"</div></div>"})())+"</div>"}var w='<nav class="product-breadcrumb">';w+='<a href="/">'+a.home+"</a>",w+='<span class="breadcrumb-separator">â€º</span>',w+='<a href="/products">'+a.products+"</a>",t.category_name&&(w+='<span class="breadcrumb-separator">â€º</span>',t.category_id?w+='<a href="/products?category='+t.category_id+'">'+t.category_name+"</a>":w+='<span class="breadcrumb-current">'+t.category_name+"</span>"),w+='<span class="breadcrumb-separator">â€º</span>',w+='<span class="breadcrumb-current">'+t.name+"</span>",w+="</nav>",e.innerHTML=`\n    ${w}\n    <div class="product-detail-container">\n      <div class="product-gallery">\n        ${o?'<img src="'+o+'" alt="'+t.name+'" class="product-gallery-main" id="product-main-image">':'<div class="product-gallery-main" style="display:flex;align-items:center;justify-content:center;color:#999;font-size:64px;">ğŸ“¦</div>'}\n        ${r?`\n          <div class="product-gallery-thumbs">\n            ${n.map((e,a)=>`\n              <img src="${e}" alt="${t.name}" class="product-gallery-thumb ${0===a?"active":""}" onclick="changeMainImage(this, '${e}')" />\n            `).join("")}\n          </div>\n        `:""}\n      </div>\n      <div class="product-info">\n        <div class="product-title-row">\n          <h1>${t.name}</h1>\n          <div class="product-icon-actions">\n            <button class="icon-btn favorite-btn" id="favorite-btn" onclick="toggleFavorite('${t.id}')" title="${a.saveToFavorites}">\n              <svg class="heart-outline" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"><g clip-path="url(#clip0_fav)"><path d="M14.7917 0.833496C12.705 0.833496 10.8108 2.376 10 4.46183C9.18917 2.37516 7.295 0.833496 5.20833 0.833496C2.33667 0.833496 0 3.17016 0 6.04183C0 11.6752 8.12833 17.7668 9.7575 18.9302L10 19.1035L10.2425 18.9302C11.8725 17.7668 20 11.6743 20 6.04183C20 3.17016 17.6633 0.833496 14.7917 0.833496ZM10 18.0777C5.71583 14.9652 0.833333 10.0185 0.833333 6.04183C0.833333 3.62933 2.79583 1.66683 5.20833 1.66683C7.49833 1.66683 9.58333 4.05016 9.58333 6.66683H10.4167C10.4167 4.05016 12.5017 1.66683 14.7917 1.66683C17.2042 1.66683 19.1667 3.62933 19.1667 6.04183C19.1667 10.0185 14.2842 14.9652 10 18.0777Z" fill="currentColor"/></g><defs><clipPath id="clip0_fav"><rect width="20" height="20" fill="white"/></clipPath></defs></svg>\n              <svg class="heart-filled" style="display:none;" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"><g clip-path="url(#clip1_fav)"><path d="M14.7917 0.833496C12.705 0.833496 10.8108 2.376 10 4.46183C9.18917 2.37516 7.295 0.833496 5.20833 0.833496C2.33667 0.833496 0 3.17016 0 6.04183C0 11.6752 8.12833 17.7668 9.7575 18.9302L10 19.1035L10.2425 18.9302C11.8725 17.7668 20 11.6743 20 6.04183C20 3.17016 17.6633 0.833496 14.7917 0.833496Z" fill="#e74c3c"/></g><defs><clipPath id="clip1_fav"><rect width="20" height="20" fill="white"/></clipPath></defs></svg>\n            </button>\n            <button class="icon-btn share-btn" onclick="shareProduct()" title="${a.shareProduct}">\n              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M15.625 12.25C14.383 12.25 13.3075 12.9318 12.721 13.9338L7.348 11.563C7.59625 11.0935 7.75 10.567 7.75 9.99925C7.75 9.4315 7.59625 8.90575 7.348 8.4355L12.721 6.06475C13.3068 7.06675 14.3822 7.7485 15.625 7.7485C17.4858 7.7485 19 6.23425 19 4.3735C19 2.51275 17.4858 1 15.625 1C13.7642 1 12.25 2.51425 12.25 4.375C12.25 4.72675 12.319 5.05975 12.4195 5.37925L6.91825 7.80625C6.29875 7.08925 5.39425 6.625 4.375 6.625C2.51425 6.625 1 8.13925 1 10C1 11.8608 2.51425 13.375 4.375 13.375C5.395 13.375 6.2995 12.9108 6.91825 12.1938L12.4195 14.6207C12.319 14.9402 12.25 15.2732 12.25 15.625C12.25 17.4858 13.7642 19 15.625 19C17.4858 19 19 17.4858 19 15.625C19 13.7642 17.4858 12.25 15.625 12.25ZM15.625 1.75C17.0725 1.75 18.25 2.9275 18.25 4.375C18.25 5.8225 17.0725 7 15.625 7C14.1775 7 13 5.8225 13 4.375C13 2.9275 14.1775 1.75 15.625 1.75ZM4.375 12.625C2.9275 12.625 1.75 11.4475 1.75 10C1.75 8.5525 2.9275 7.375 4.375 7.375C5.8225 7.375 7 8.5525 7 10C7 11.4475 5.8225 12.625 4.375 12.625ZM15.625 18.25C14.1775 18.25 13 17.0725 13 15.625C13 14.1775 14.1775 13 15.625 13C17.0725 13 18.25 14.1775 18.25 15.625C18.25 17.0725 17.0725 18.25 15.625 18.25Z" fill="currentColor"/></svg>\n            </button>\n          </div>\n        </div>\n        ${t.brand?'<div class="product-brand">'+t.brand+"</div>":""}\n        ${l?`\n        <div class="product-price" id="product-price-display">\n          ${y?h+" "+a.currency+v.toFixed(2):s?a.currency+t.sale_price+' <span class="original-price">'+a.currency+t.price+"</span>":a.currency+t.price}${(()=>{const e=t.quantity_unit||"piece";if("piece"!==e){const n=parseFloat(t.quantity_step)||1,o=t.custom_unit_label||a.unitLabels&&a.unitLabels[e]||e,r=1!==n?n+" ":"";return' <span class="price-per-unit">'+a.perUnit+" "+r+o+"</span>"}return""})()}\n        </div>\n        ${(()=>{if(!t.show_price_per_unit)return"";const e=t.quantity_unit||"piece",n=y?v:t.sale_price&&parseFloat(t.sale_price)<parseFloat(t.price)?parseFloat(t.sale_price):parseFloat(t.price);if(!n)return"";let o,r,i;if("piece"===e){const e=t.piece_unit_type,s=parseFloat(t.piece_unit_value);if(!e||!s)return"";if("gram"===e)o=100,r="100"+(a.unitLabels&&a.unitLabels.gram||"g");else if("ml"===e)o=100,r="100"+(a.unitLabels&&a.unitLabels.ml||"ml");else if("kg"===e)o=1,r=a.unitLabels&&a.unitLabels.kg||"kg";else{if("liter"!==e)return"";o=1,r=a.unitLabels&&a.unitLabels.liter||"L"}i=n/s*o}else{const s=parseFloat(t.quantity_step)||1;if(!s)return"";if("gram"===e)o=100,r="100"+(a.unitLabels&&a.unitLabels.gram||"g");else if("ml"===e)o=100,r="100"+(a.unitLabels&&a.unitLabels.ml||"ml");else if("kg"===e)o=1,r=a.unitLabels&&a.unitLabels.kg||"kg";else if("liter"===e)o=1,r=a.unitLabels&&a.unitLabels.liter||"L";else{if("custom"!==e)return"";o=1,r=t.custom_unit_label||""}i=n/s*o}return'<div class="price-per-unit-info" id="product-price-per-unit">'+a.currency+i.toFixed(2)+" / "+r+"</div>"})()}\n        `:""}\n        ${t.sku?'<div class="product-sku" id="product-sku-display">'+a.sku+": "+t.sku+"</div>":""}\n        ${b}\n        <div class="product-stock ${i?"in-stock":"out-of-stock"}" id="product-stock-display">\n          ${i?'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>'+a.inStock:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>'+a.outOfStock}\n        </div>\n        <div class="product-add-row">\n          ${(()=>{const e=parseFloat(t.quantity_step)||1,n=t.quantity_unit||"piece",o="piece"!==n?" ("+(t.custom_unit_label||a.unitLabels&&a.unitLabels[n]||n)+")":"";return'<div class="product-quantity"><label>'+a.quantity+o+':</label><div class="quantity-selector"><button type="button" onclick="adjustQuantity(-1)">âˆ’</button><input type="number" id="product-quantity" value="'+e+'" min="'+e+'" max="9999" step="'+e+'" data-unit="'+n+'" data-step="'+e+'"><button type="button" onclick="adjustQuantity(1)">+</button></div></div>'})()}\n          <div class="product-actions ">\n            \n            <button class="add-to-cart" id="add-to-cart-btn" onclick="addProductToCart()" ${i?"":'disabled style="opacity:0.5;cursor:not-allowed;"'}>\n              ${a.addToCart}\n            </button>\n            \n          </div>\n        </div>\n        ${t.description?`\n        <div class="product-details-accordion">\n          <div class="product-details-divider"></div>\n          <button type="button" class="product-details-header" onclick="toggleProductDetails(this)">\n            <span>${a.productDetails||"Product Details"}</span>\n            <span class="product-details-toggle">âˆ’</span>\n          </button>\n          <div class="product-details-body">\n            <div class="product-description">${t.description}</div>\n          </div>\n        </div>\n        `:""}\n        ${t.custom_fields?.specifications?.length>0?`\n        <div class="product-details-accordion collapsed">\n          <div class="product-details-divider"></div>\n          <button type="button" class="product-details-header" onclick="toggleProductDetails(this)">\n            <span>${a.specifications||"Specifications"}</span>\n            <span class="product-details-toggle">+</span>\n          </button>\n          <div class="product-details-body">\n            <div class="product-specifications">\n              <table class="specs-table">\n                ${t.custom_fields.specifications.map(e=>`\n                  <tr>\n                    <th>${e.key}</th>\n                    <td>${e.value}</td>\n                  </tr>\n                `).join("")}\n              </table>\n            </div>\n          </div>\n        </div>\n        `:""}\n      </div>\n    </div>\n  `,window.currentProduct=t,window.selectedVariant=null,window.productBasePrice=c,window.productOriginalPrice=d,window.productHasSalePrice=s,window.productHasVariantPriceRange=y,window.productVariantMinPrice=v,window.productShowPricePerUnit=t.show_price_per_unit,window.productTranslations=a,p&&initVariantSelection(t,a),checkFavoriteStatus(t.id)}function changeMainImage(e,t){const a=document.getElementById("product-main-image");a&&(a.src=t),document.querySelectorAll(".product-gallery-thumb").forEach(e=>e.classList.remove("active")),e.classList.add("active")}function _zappyProductToast(e){var t=document.querySelector(".zappy-product-toast");t&&t.remove();var a=document.createElement("div");a.className="zappy-product-toast",a.textContent=e,a.style.cssText="position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#333;color:#fff;padding:12px 24px;border-radius:8px;z-index:10000;font-size:14px;opacity:0;transition:opacity 0.3s;",document.body.appendChild(a),setTimeout(function(){a.style.opacity="1"},10),setTimeout(function(){a.style.opacity="0",setTimeout(function(){a.remove()},300)},3e3)}function toggleFavorite(e){var t=window.ZAPPY_WEBSITE_ID,a="zappy_customer_token_"+t,n=localStorage.getItem(a),o=document.getElementById("favorite-btn");if(o){if(!n){var r="/login",i=window.location.href,s=window.location.pathname+window.location.search;if(i.includes("/api/website/preview")){var c=i.includes("preview-fullscreen")?"preview-fullscreen":"preview",d=new URLSearchParams(window.location.search).get("page")||"/";sessionStorage.setItem("zappy_login_return",d),r="/api/website/"+c+"/"+t+"?page="+encodeURIComponent("/login")}else sessionStorage.setItem("zappy_login_return",s);return _zappyProductToast("×™×© ×œ×”×ª×—×‘×¨ ×›×“×™ ×œ×©××•×¨ ××•×¢×“×¤×™×"),void setTimeout(function(){window.location.href=r},1200)}var l=o.classList.contains("active"),u=window.ZAPPY_API_BASE||"";l?(o.classList.remove("active"),fetch(u+"/api/ecommerce/customers/me/favorites/"+e+"?websiteId="+t,{method:"DELETE",headers:{Authorization:"Bearer "+n}}).then(function(e){e.ok&&_zappyProductToast("×”×•×¡×¨ ××”××•×¢×“×¤×™×")}).catch(function(){o.classList.add("active")})):(o.classList.add("active"),fetch(u+"/api/ecommerce/customers/me/favorites",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify({websiteId:t,productId:e})}).then(function(e){e.ok&&_zappyProductToast("× ×•×¡×£ ×œ××•×¢×“×¤×™×")}).catch(function(){o.classList.remove("active")}))}}function toggleCardFavorite(e,t){var a=window.ZAPPY_WEBSITE_ID,n="zappy_customer_token_"+a,o=localStorage.getItem(n);if(o){var r=e.classList.contains("active"),i=window.ZAPPY_API_BASE||"";r?(e.classList.remove("active"),fetch(i+"/api/ecommerce/customers/me/favorites/"+t+"?websiteId="+a,{method:"DELETE",headers:{Authorization:"Bearer "+o}}).then(function(e){if(e.ok){_zappyProductToast("×”×•×¡×¨ ××”××•×¢×“×¤×™×"),document.querySelectorAll('.card-favorite-btn[data-product-id="'+t+'"]').forEach(function(e){e.classList.remove("active")});var a=document.getElementById("favorite-btn");a&&a.classList.remove("active")}}).catch(function(){e.classList.add("active")})):(e.classList.add("active"),fetch(i+"/api/ecommerce/customers/me/favorites",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o},body:JSON.stringify({websiteId:a,productId:t})}).then(function(e){if(e.ok){_zappyProductToast("× ×•×¡×£ ×œ××•×¢×“×¤×™×"),document.querySelectorAll('.card-favorite-btn[data-product-id="'+t+'"]').forEach(function(e){e.classList.add("active")});var a=document.getElementById("favorite-btn");a&&a.classList.add("active")}}).catch(function(){e.classList.remove("active")}))}else{_zappyProductToast("×™×© ×œ×”×ª×—×‘×¨ ×›×“×™ ×œ×©××•×¨ ××•×¢×“×¤×™×");var s="/login",c=window.location.href;if(c.includes("/api/website/preview")){var d=c.includes("preview-fullscreen");s="/api/website/"+(d?"preview-fullscreen":"preview")+"/"+a+"?page="+encodeURIComponent("/login")}setTimeout(function(){window.location.href=s},1200)}}function _syncCardFavorites(){var e=window.ZAPPY_WEBSITE_ID,t="zappy_customer_token_"+e,a=localStorage.getItem(t);if(a){var n=window.ZAPPY_API_BASE||"";fetch(n+"/api/ecommerce/customers/me/favorites?websiteId="+e,{headers:{Authorization:"Bearer "+a}}).then(function(e){return e.json()}).then(function(e){var t=(e.favorites||e||[]).map(function(e){return e.product_id||e.productId||e.id});document.querySelectorAll(".card-favorite-btn").forEach(function(e){var a=e.getAttribute("data-product-id");-1!==t.indexOf(a)?e.classList.add("active"):e.classList.remove("active")})}).catch(function(){})}}function shareProduct(){var e=window.location.href;if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(e).then(function(){_zappyProductToast("×”×§×™×©×•×¨ ×”×•×¢×ª×§!")});else{var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),_zappyProductToast("×”×§×™×©×•×¨ ×”×•×¢×ª×§!")}}function checkFavoriteStatus(e){var t=window.ZAPPY_WEBSITE_ID,a="zappy_customer_token_"+t,n=localStorage.getItem(a);if(n){var o=document.getElementById("favorite-btn");if(o){var r=window.ZAPPY_API_BASE||"";fetch(r+"/api/ecommerce/customers/me/favorites/"+e+"?websiteId="+t,{headers:{Authorization:"Bearer "+n}}).then(function(e){return e.json()}).then(function(e){e.success&&e.data&&e.data.isFavorited&&o.classList.add("active")}).catch(function(){})}}}function adjustQuantity(e){const t=document.getElementById("product-quantity");if(!t)return;const a=parseFloat(t.dataset.step)||1,n=a,o=parseFloat(t.value)||a,r=Math.max(n,Math.min(9999,o+e*a)),i=(a.toString().split(".")[1]||"").length;t.value=parseFloat(r.toFixed(i))}function toggleProductDetails(e){var t=e.closest(".product-details-accordion");if(t){t.classList.toggle("collapsed");var a=e.querySelector(".product-details-toggle");a&&(a.textContent=t.classList.contains("collapsed")?"+":"âˆ’")}}function initVariantSelection(e,t){const a=e.variants||[];let n={};if(!document.getElementById("zappy-variant-state-css")){var o=document.createElement("style");o.id="zappy-variant-state-css",o.textContent='.variant-option.disabled { opacity: 0.3; position: relative; }.variant-option.disabled:not(.color-swatch)::after { content: ""; position: absolute; top: 50%; left: 4px; right: 4px; height: 1px; background: currentColor; transform: rotate(-12deg); pointer-events: none; }.variant-option.color-swatch.disabled::before { content: ""; position: absolute; top: 50%; left: 2px; right: 2px; height: 1.5px; background: currentColor; transform: rotate(-45deg); pointer-events: none; z-index: 1; }.variant-option.out-of-stock { opacity: 0.6; position: relative; }.variant-option.out-of-stock:not(.color-swatch)::after { content: ""; position: absolute; top: 50%; left: 4px; right: 4px; height: 1px; background: currentColor; transform: rotate(-12deg); pointer-events: none; }.variant-option.color-swatch.out-of-stock::before { content: ""; position: absolute; top: 50%; left: 2px; right: 2px; height: 1.5px; background: currentColor; transform: rotate(-45deg); pointer-events: none; z-index: 1; }',document.head.appendChild(o)}document.querySelectorAll(".variant-options").forEach(function(e){var t=Array.from(e.querySelectorAll(".variant-option"));t.length<2||(t.sort(function(e,t){var a=e.getAttribute("data-value")||"",n=t.getAttribute("data-value")||"",o=parseFloat(a),r=parseFloat(n);return isNaN(o)||isNaN(r)?a.localeCompare(n):o-r}),t.forEach(function(t){e.appendChild(t)}))});const r=document.querySelectorAll(".variant-option");function i(){const e=new Set;return r.forEach(t=>e.add(t.getAttribute("data-attr"))),Array.from(e)}function s(){i().forEach(function(e){var t={};for(var o in n)o!==e&&(t[o]=n[o]);document.querySelectorAll('.variant-option[data-attr="'+e+'"]').forEach(function(n){var o=n.getAttribute("data-value"),r=function(e,t,n){return a.some(a=>{if(!a.attributes||!1===a.is_active)return!1;if(a.attributes.hasOwnProperty(e)&&a.attributes[e]!==t)return!1;for(var o in n)if(o!==e&&a.attributes.hasOwnProperty(o)&&a.attributes[o]!==n[o])return!1;return!0})}(e,o,t),i=r&&function(e,t,n){var o=a.filter(a=>{if(!a.attributes||!1===a.is_active)return!1;if(a.attributes.hasOwnProperty(e)&&a.attributes[e]!==t)return!1;for(var o in n)if(o!==e&&a.attributes.hasOwnProperty(o)&&a.attributes[o]!==n[o])return!1;return!0});return o.length>0&&o.every(e=>"out_of_stock"===e.stock_status)}(e,o,t);r?n.classList.remove("disabled"):(n.classList.add("disabled"),n.classList.remove("selected","out-of-stock")),i?n.classList.add("out-of-stock"):n.classList.remove("out-of-stock")})})}r.forEach(o=>{o.addEventListener("click",function(){const c=this.getAttribute("data-variant-id"),d=this.getAttribute("data-attr"),l=this.getAttribute("data-value");if(c){r.forEach(e=>e.classList.remove("selected")),this.classList.add("selected");return void updateVariantUI(a.find(e=>e.id===c)||null,e,t,{})}document.querySelectorAll('.variant-option[data-attr="'+d+'"]').forEach(e=>e.classList.remove("selected")),this.classList.add("selected"),n[d]=l;var u=document.querySelector('.variant-group[data-group="'+d+'"] .variant-selected-value');u&&(u.textContent=l),s();var p=i(),m=!1;if(p.forEach(function(e){if(e!==d){var t=document.querySelector('.variant-option[data-attr="'+e+'"].selected');if(!t||t.classList.contains("disabled")){var a=document.querySelector('.variant-option[data-attr="'+e+'"]:not(.disabled)');if(a){document.querySelectorAll('.variant-option[data-attr="'+e+'"]').forEach(function(e){e.classList.remove("selected")}),a.classList.add("selected"),n[e]=a.getAttribute("data-value");var o=document.querySelector('.variant-group[data-group="'+e+'"] .variant-selected-value');o&&(o.textContent=a.getAttribute("data-value")),m=!0}else{delete n[e];var r=document.querySelector('.variant-group[data-group="'+e+'"] .variant-selected-value');r&&(r.textContent="")}}}}),m){s(),o.classList.add("selected"),n[d]=l;var g=document.querySelector('.variant-group[data-group="'+d+'"] .variant-selected-value');g&&(g.textContent=l)}updateVariantUI(findMatchingVariant(a,n),e,t,n)})});var c=document.querySelectorAll(".variant-group"),d=Array.from(c);if(d.length>0){var l=d[0].querySelector(".variant-option");l&&!l.getAttribute("data-variant-id")&&l.click();for(var u=1;u<d.length;u++){var p=d[u].querySelector(".variant-option:not(.disabled)");p&&!p.getAttribute("data-variant-id")&&p.click()}}}function findMatchingVariant(e,t){const a=Object.keys(t);return 0===a.length?null:e.find(e=>!(!e.attributes||!1===e.is_active)&&a.every(a=>!e.attributes.hasOwnProperty(a)||e.attributes[a]===t[a]))}function updatePricePerUnitDisplay(e,t,a){const n=document.getElementById("product-price-per-unit");if(!n||!window.productShowPricePerUnit)return;if(!e)return void(n.textContent="");const o=t.quantity_unit||"piece";let r,i,s;if("piece"===o){const o=t.piece_unit_type,c=parseFloat(t.piece_unit_value);if(!o||!c)return void(n.textContent="");if("gram"===o)r=100,i="100"+(a.unitLabels&&a.unitLabels.gram||"g");else if("ml"===o)r=100,i="100"+(a.unitLabels&&a.unitLabels.ml||"ml");else if("kg"===o)r=1,i=a.unitLabels&&a.unitLabels.kg||"kg";else{if("liter"!==o)return void(n.textContent="");r=1,i=a.unitLabels&&a.unitLabels.liter||"L"}s=e/c*r}else{const c=parseFloat(t.quantity_step)||1;if(!c)return void(n.textContent="");if("gram"===o)r=100,i="100"+(a.unitLabels&&a.unitLabels.gram||"g");else if("ml"===o)r=100,i="100"+(a.unitLabels&&a.unitLabels.ml||"ml");else if("kg"===o)r=1,i=a.unitLabels&&a.unitLabels.kg||"kg";else if("liter"===o)r=1,i=a.unitLabels&&a.unitLabels.liter||"L";else{if("custom"!==o)return void(n.textContent="");r=1,i=t.custom_unit_label||""}s=e/c*r}n.textContent=a.currency+s.toFixed(2)+" / "+i}function updateVariantUI(e,t,a,n){const o=document.getElementById("product-price-display"),r=document.getElementById("product-stock-display"),i=document.getElementById("product-sku-display"),s=document.getElementById("add-to-cart-btn"),c=document.getElementById("product-main-image"),d=window.productBasePrice,l=window.productOriginalPrice,u=window.productHasSalePrice,p=window.productHasVariantPriceRange,m=window.productVariantMinPrice,g=getEcomText("startingAt",a.startingAt||"Starting at");if(c&&!window._originalMainImageSrc&&(window._originalMainImageSrc=c.src),e){const n=e.price?parseFloat(e.price):null,p=null!==n?n:d;o&&(null!==n?o.textContent=a.currency+p.toFixed(2):u?o.innerHTML=a.currency+p.toFixed(2)+' <span class="original-price">'+a.currency+l.toFixed(2)+"</span>":o.textContent=a.currency+p.toFixed(2)),updatePricePerUnitDisplay(p,t,a);const m="out_of_stock"!==e.stock_status;if(r&&(r.className="product-stock "+(m?"in-stock":"out-of-stock"),r.innerHTML=m?'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>'+a.inStock:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>'+a.outOfStock),i&&e.sku&&(i.textContent=a.sku+": "+e.sku),s&&(s.disabled=!m,s.style.opacity=m?"1":"0.5",s.style.cursor=m?"pointer":"not-allowed"),c&&e.image){var f=e.image;window.resolveProductImageUrl&&(f=window.resolveProductImageUrl(e.image)),c.src=f}else c&&window._originalMainImageSrc&&(c.src=window._originalMainImageSrc);window.selectedVariant=e}else{c&&window._originalMainImageSrc&&(c.src=window._originalMainImageSrc);var y=!1,v=document.querySelectorAll(".variant-group");if(v.length>0){var h=v.length;y=Object.keys(n).length>=h}if(y)r&&(r.className="product-stock out-of-stock",r.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>'+(a.outOfStock||"Out of Stock")),s&&(s.disabled=!0,s.style.opacity="0.5",s.style.cursor="not-allowed");else{o&&(p&&Number.isFinite(m)?o.textContent=g+" "+a.currency+m.toFixed(2):u?o.innerHTML=a.currency+d.toFixed(2)+' <span class="original-price">'+a.currency+l.toFixed(2)+"</span>":o.textContent=a.currency+d.toFixed(2));const e="out_of_stock"!==t.stock_status;r&&(r.className="product-stock "+(e?"in-stock":"out-of-stock"),r.innerHTML=e?'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>'+a.inStock:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>'+a.outOfStock),s&&(s.disabled=!e,s.style.opacity=e?"1":"0.5",s.style.cursor=e?"pointer":"not-allowed")}updatePricePerUnitDisplay(p&&Number.isFinite(m)?m:d,t,a),window.selectedVariant=null}}function addProductToCart(){const e=window.currentProduct;if(!e)return;const t=document.getElementById("product-quantity"),a=parseFloat(t?.value||1),n=window.selectedVariant,o=window.productTranslations||{};var r=e.variants&&e.variants.length>0;if(n){if("out_of_stock"===n.stock_status)return void alert(o.outOfStock||"This item is out of stock")}else{if(r)return void alert(o.outOfStock||"This combination is unavailable");if("out_of_stock"===e.stock_status)return void alert(o.outOfStock||"This item is out of stock")}const i=e.quantity_unit||"piece",s=parseFloat(e.quantity_step)||1,c=e.custom_unit_label||null,d={...e,quantity:a,quantityUnit:i,quantityStep:s,customUnitLabel:c};if(n){const e=window.productBasePrice,t=n.price?parseFloat(n.price):null,a=null!==t?t:e;d.selectedVariant={id:n.id,name:n.name,sku:n.sku,attributes:n.attributes,price:t},d.variantName=n.name,d.displayPrice=a,d.price=a.toString(),d.sale_price=null,n.sku&&(d.variantSku=n.sku)}window.zappyAddToCart(d)}async function loadRelatedProducts(e,t){const a=document.getElementById("related-products-section"),n=document.getElementById("related-products-grid");if(!a||!n)return;const o=window.ZAPPY_WEBSITE_ID;try{let r=buildApiUrlWithLang("/api/ecommerce/storefront/products?websiteId="+o+"&limit=4");e.category_id&&(r+="&categoryId="+e.category_id);const i=await fetch(r),s=await i.json();if(!s.success||!s.data?.length)return;const c=s.data.filter(t=>t.id!==e.id).slice(0,4);if(0===c.length)return;renderProductGrid(n,c,t),a.style.display="block"}catch(e){console.error("Failed to load related products",e)}}document.addEventListener("DOMContentLoaded",function(){handleSubNavbarVisibility(),initTransparentNavbarScrollEffect(),fetchAdditionalJsSettings(),loadFeaturedProducts(),loadFeaturedCategories(),loadCatalogCategories(),loadProductDetailPage(),loadCategoryPage(),"undefined"!=typeof zappyI18n&&"function"==typeof zappyI18n.onLanguageChange&&(zappyI18n.onLanguageChange(function(e,t){console.log("[E-COMMERCE] Language changed from "+t+" to "+e+", refreshing content..."),fetchAdditionalJsSettings(!0),loadFeaturedProducts(),loadFeaturedCategories(),loadCatalogCategories(),document.getElementById("product-detail")&&loadProductDetailPage(),document.getElementById("category-products")&&loadCategoryPage(),document.getElementById("zappy-product-grid")&&"function"==typeof loadProducts&&loadProducts(),function(){var e=document.getElementById("add-to-cart-btn");e&&(e.textContent=getEcomText("addToCart","Add to Cart"));document.querySelectorAll("button.add-to-cart:not(#add-to-cart-btn)").forEach(function(e){e.textContent=getEcomText("addToCart","Add to Cart")}),document.querySelectorAll(".filter-btn").forEach(function(e){var t=e.getAttribute("data-category");"all"===t?e.textContent=getEcomText("all","All"):"featured"===t?e.textContent=getEcomText("featured","Featured"):"new"===t?e.textContent=getEcomText("new","New"):"sale"===t&&(e.textContent=getEcomText("sale","Sale"))});var t=document.querySelector(".empty-cart p");t&&(t.textContent=getEcomText("emptyCart","Your cart is empty"));var a=document.querySelector(".checkout-btn, #checkout-btn");a&&(a.textContent=getEcomText("proceedToCheckout","Proceed to Checkout"));console.log("[E-COMMERCE] Static UI elements updated for language change")}()}),console.log("[E-COMMERCE] Registered language change callback for content refresh"))}),function(){try{if(window.__zappyPublishedLightboxInit)return;function e(e){try{return String(e||"").replace(/"/g,"&quot;")}catch(e){return""}}function t(t){try{if(!t||!t.id)return;if(0!==t.id.indexOf("zappy-lightbox-toggle-"))return;var a=t.id.replace("zappy-lightbox-toggle-",""),n=document.querySelector('label.zappy-lightbox-trigger[for="'+t.id+'"]');if(!n)return;try{n.contains(t)&&n.parentNode&&n.parentNode.insertBefore(t,n)}catch(c){}var o="zappy-lightbox-"+a,r=document.getElementById(o);if(r&&r.parentNode!==document.body)try{document.body.appendChild(r)}catch(d){}if(!r){var i=null;try{i=n.querySelector("img")}catch(l){}if(!i)try{i=document.querySelector('img[data-element-id="'+a+'"]')}catch(u){}if(!i)return;(r=document.createElement("div")).id=o,r.className="zappy-lightbox",r.setAttribute("data-zappy-image-lightbox","true"),r.style.display="none",r.innerHTML='<label class="zappy-lightbox-backdrop" for="'+t.id+'" aria-label="Close"></label><div class="zappy-lightbox-content"><label class="zappy-lightbox-close" for="'+t.id+'" aria-label="Close">Ã—</label><img class="zappy-lightbox-image" src="'+e(i.currentSrc||i.src||i.getAttribute("src"))+'" alt="'+e(i.getAttribute("alt")||"Image")+'"></div>',document.body.appendChild(r)}function s(){try{var e=n.querySelector("img"),t=r.querySelector("img");e&&t&&(t.src=e.currentSrc||e.src||t.src,t.alt=e.alt||t.alt)}catch(e){}}t.__zappyLbBound||(t.addEventListener("change",function(){t.checked&&s(),r.style.display=t.checked?"flex":"none"}),t.__zappyLbBound=!0),r.__zappyLbBound||(r.addEventListener("click",function(e){try{var a=e.target;if(!a)return;a.classList&&(a.classList.contains("zappy-lightbox-backdrop")||a.classList.contains("zappy-lightbox-close"))&&(e.preventDefault(),t.checked=!1,r.style.display="none")}catch(e){}}),r.__zappyLbBound=!0),n.__zappyLbClick||(n.addEventListener("click",function(e){try{if(document.body&&document.body.classList&&document.body.classList.contains("zappy-edit-mode"))return;if(e&&e.target&&e.target.closest&&e.target.closest("a[href],button,input,select,textarea"))return;e.preventDefault(),e.stopPropagation(),t.checked=!0,s(),r.style.display="flex"}catch(e){}},!0),n.__zappyLbClick=!0)}catch(p){}}function a(){try{!function(){try{var e=document.head||document.querySelector("head");if(!e||e.querySelector('style[data-zappy-image-lightbox="true"]'))return;var t=document.createElement("style");t.setAttribute("data-zappy-image-lightbox","true"),t.textContent='.zappy-lightbox{position:fixed;inset:0;background:rgba(0,0,0,.72);display:none;align-items:center;justify-content:center;z-index:9999;padding:24px;}.zappy-lightbox-content{position:relative;max-width:min(1100px,92vw);max-height:92vh;}.zappy-lightbox-content img{max-width:92vw;max-height:92vh;display:block;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.45);}.zappy-lightbox-close{position:absolute;top:-14px;right:-14px;width:32px;height:32px;border-radius:999px;background:#fff;color:#111;display:flex;align-items:center;justify-content:center;font-size:18px;box-shadow:0 8px 24px rgba(0,0,0,.25);cursor:pointer;}.zappy-lightbox-backdrop{position:absolute;inset:0;display:block;cursor:pointer;}input.zappy-lightbox-toggle{position:absolute;opacity:0;pointer-events:none;}label.zappy-lightbox-trigger{display:contents;}label.zappy-lightbox-trigger{cursor:zoom-in;}label.zappy-lightbox-trigger [data-zappy-zoom-wrapper="true"],label.zappy-lightbox-trigger img{cursor:zoom-in !important;}input.zappy-lightbox-toggle:checked + label.zappy-lightbox-trigger + .zappy-lightbox{display:flex;}',e.appendChild(t)}catch(e){}}();for(var e=document.querySelectorAll('label.zappy-lightbox-trigger[for^="zappy-lightbox-toggle-"]'),a=0;a<e.length;a++){var n=e[a],o=n&&n.getAttribute?n.getAttribute("for"):null;if(o&&!document.getElementById(o)){var r=document.createElement("input");r.type="checkbox",r.id=o,r.className="zappy-lightbox-toggle",r.setAttribute("data-zappy-image-lightbox","true"),n.parentNode&&n.parentNode.insertBefore(r,n)}}for(var i=document.querySelectorAll('input.zappy-lightbox-toggle[id^="zappy-lightbox-toggle-"]'),s=0;s<i.length;s++)t(i[s]);document.__zappyLbEscBound||(document.addEventListener("keydown",function(e){try{if(!e||"Escape"!==e.key)return;var t=document.querySelector('.zappy-lightbox[style*="display: flex"]');if(t){var a=null;try{var n=t.id||"";0===n.indexOf("zappy-lightbox-")&&(a=document.getElementById("zappy-lightbox-toggle-"+n.replace("zappy-lightbox-","")))}catch(e){}a&&(a.checked=!1),t.style.display="none"}}catch(e){}}),document.__zappyLbEscBound=!0)}catch(e){}}window.__zappyPublishedLightboxInit=!0,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a,{once:!0}):a()}catch(n){}}(),function(){try{if(window.__zappyPublishedZoomInit)return;function e(e,t){var a=parseFloat(t.getAttribute("data-zappy-zoom"))||1;if(a>0||(a=1),"full"!==e.getAttribute("data-zappy-zoom-wrapper-width-mode")){var n=e.getBoundingClientRect();if(n&&n.width&&n.height){var o=t.naturalWidth||0,r=t.naturalHeight||0;if(o>0&&r>0){var i=function(e,t){return!isFinite(e)||e<=0||!isFinite(t)||t<=0?{w:100,h:100}:e>=t?{w:e/t*100,h:100}:{w:100,h:t/e*100}}(o/r,n.width/n.height),s=100,c=100;if(a>=1)s=i.w*a,c=i.h*a;else{var d=(a-.5)/.5;isFinite(d)||(d=0),s=100+(d=Math.max(0,Math.min(1,d)))*(i.w-100),c=100+d*(i.h-100)}var l=function(e){var t=50,a=50;try{if("string"==typeof e){var n=e.match(/(-?\d+(?:\.\d+)?)%\s+(-?\d+(?:\.\d+)?)%/);n&&(t=parseFloat(n[1]),a=parseFloat(n[2]))}}catch(e){}return isFinite(t)||(t=50),isFinite(a)||(a=50),{x:Math.max(0,Math.min(100,t)),y:Math.max(0,Math.min(100,a))}}(t.style.objectPosition||window.getComputedStyle(t).objectPosition||"50% 50%"),u=(100-s)*(l.x/100),p=(100-c)*(l.y/100);window.innerWidth<=768?(t.style.setProperty("position","relative","important"),t.style.setProperty("width","100%","important"),t.style.setProperty("height","auto","important"),t.style.setProperty("max-width","100%","important"),t.style.setProperty("display","block","important"),t.style.setProperty("object-fit","cover","important"),t.style.removeProperty("left"),t.style.removeProperty("top")):(t.style.setProperty("position","absolute","important"),t.style.setProperty("left",u+"%","important"),t.style.setProperty("top",p+"%","important"),t.style.setProperty("width",s+"%","important"),t.style.setProperty("height",c+"%","important"),t.style.setProperty("max-width","none","important"),t.style.setProperty("max-height","none","important"),t.style.setProperty("display","block","important"),t.style.setProperty("object-fit",a<1?"fill":"cover","important")),t.style.setProperty("margin","0","important")}}}}function t(){for(var t=document.querySelectorAll('[data-zappy-zoom-wrapper="true"]'),a=0;a<t.length;a++)(function(t){var a=t.querySelector("img");a&&(t.closest&&t.closest(".zappy-carousel-js-init, .zappy-carousel-active")||(a.complete&&a.naturalWidth>0?setTimeout(function(){e(t,a)},0):a.addEventListener("load",function n(){a.removeEventListener("load",n),e(t,a)},{once:!0})))})(t[a])}window.__zappyPublishedZoomInit=!0,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t,{once:!0}):setTimeout(t,50)}catch(a){}}(),function(){try{if(window.__zappyMobileMenuToggleInit)return;function e(){var e=document.querySelector(".mobile-toggle, #mobileToggle"),t=document.querySelector("#navMenu, .nav-menu, .navbar-menu");e&&t&&(e.__zappyMobileToggleBound||(e.__zappyMobileToggleBound=!0,e.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation();var n=e.querySelector(".hamburger-icon"),o=e.querySelector(".close-icon");t.classList.contains("active")||"block"===t.style.display?(t.classList.remove("active"),t.style.display="",n&&n.style.setProperty("display","block","important"),o&&o.style.setProperty("display","none","important"),document.body.style.overflow=""):(t.classList.add("active"),t.style.display="block",n&&n.style.setProperty("display","none","important"),o&&o.style.setProperty("display","block","important"),document.body.style.overflow="hidden")},!0),document.addEventListener("click",function(a){if(t.classList.contains("active")&&!e.contains(a.target)&&!t.contains(a.target)){t.classList.remove("active"),t.style.display="";var n=e.querySelector(".hamburger-icon"),o=e.querySelector(".close-icon");n&&n.style.setProperty("display","block","important"),o&&o.style.setProperty("display","none","important"),document.body.style.overflow=""}}),document.addEventListener("keydown",function(a){if("Escape"===a.key&&t.classList.contains("active")){t.classList.remove("active"),t.style.display="";var n=e.querySelector(".hamburger-icon"),o=e.querySelector(".close-icon");n&&n.style.setProperty("display","block","important"),o&&o.style.setProperty("display","none","important"),document.body.style.overflow=""}}),t.querySelectorAll("a").forEach(function(a){a.addEventListener("click",function(){t.classList.remove("active"),t.style.display="";var a=e.querySelector(".hamburger-icon"),n=e.querySelector(".close-icon");a&&a.style.setProperty("display","block","important"),n&&n.style.setProperty("display","none","important"),document.body.style.overflow=""})})))}window.__zappyMobileMenuToggleInit=!0,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}catch(t){}}(),function(){try{if(window.__zappyFaqToggleInit)return;function e(){var e=document.querySelectorAll('[class*="faq-item"], .accordion-item');e.length&&e.forEach(function(e){var t=e.querySelector('[class*="faq-question"], [class*="faq-header"], .accordion-header, .accordion-toggle');t&&(t.__zappyFaqBound||(t.__zappyFaqBound=!0,t.addEventListener("click",function(a){a.preventDefault();var n=e.parentElement;n&&n.querySelectorAll('[class*="faq-item"], .accordion-item').forEach(function(t){if(t!==e&&t.classList.contains("active")){t.classList.remove("active");var a=t.querySelector('[class*="faq-question"], [class*="faq-header"], .accordion-header');a&&a.setAttribute("aria-expanded","false")}});var o=e.classList.toggle("active");t.setAttribute("aria-expanded",o?"true":"false")})))})}window.__zappyFaqToggleInit=!0,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e,{once:!0}):e()}catch(t){}}(),function(){try{if(window.__zappyGridCenteringInit)return;function e(){for(var e=document.querySelectorAll('[data-zappy-explicit-columns="true"], [data-zappy-auto-grid="true"]'),t=0;t<e.length;t++)try{var a=e[t];if("true"===a.getAttribute("data-zappy-grid-centered"))continue;for(var n=[],o=0;o<a.children.length;o++){var r=a.children[o];if(r&&r.tagName){var i=r.tagName.toLowerCase();"script"!==i&&"style"!==i&&n.push(r)}}var s=n.length;if(0===s)continue;var c=window.getComputedStyle(a);if("grid"!==c.display)continue;var d=(c.gridTemplateColumns||"").trim();if(!d||"none"===d)continue;var l=d.split(" ").filter(function(e){return e&&parseFloat(e)>0}),u=l.length;if(u<=1)continue;var p=s%u;if(0===p)continue;var m=parseFloat(l[0])||0,g=parseFloat(c.columnGap);isNaN(g)&&(g=parseFloat(c.gap)||0);for(var f=(u-p)*(m+g)/2,y=c.direction||"ltr",v=a;v&&"ltr"===y;){if(v.getAttribute&&v.getAttribute("dir")){y=v.getAttribute("dir");break}if(v.style&&v.style.direction){y=v.style.direction;break}v=v.parentElement}for(var h="rtl"===y?-f:f,b=s-p,w=[],C=b;C<s;C++){var E=n[C];w.push(E.style.transition),E.style.transition="none";var k=E.style.transform||"",L=k?k+" translateX("+h+"px)":"translateX("+h+"px)";E.style.transform=L}a.offsetHeight;for(var x=b;x<s;x++)n[x].style.transition=w[x-b];a.setAttribute("data-zappy-grid-centered","true")}catch(e){}}window.__zappyGridCenteringInit=!0,"complete"===document.readyState?e():window.addEventListener("load",e)}catch(t){}}(),function(){try{if(window.__zappyVariantFixInit)return;if(window.__zappyVariantFixInit=!0,!document.getElementById("zappy-variant-fix-css")){var e=document.createElement("style");e.id="zappy-variant-fix-css",e.textContent=".variant-option.disabled{opacity:0.4!important;cursor:pointer!important;text-decoration:line-through!important}.variant-option.disabled::after,.variant-option.disabled::before{content:none!important}.variant-option.color-swatch.disabled{text-decoration:none!important}.variant-option.out-of-stock{opacity:0.4!important;cursor:pointer!important;text-decoration:line-through!important}.variant-option.out-of-stock::after,.variant-option.out-of-stock::before{content:none!important}.variant-option.color-swatch.out-of-stock{text-decoration:none!important}",document.head.appendChild(e)}var t={},a=null,n={},o=!1;function r(){o||("function"==typeof window.initVariantSelection&&(o=!0),window.initVariantSelection=function(e,t){if(e&&e.variants&&e.variants.length>0){a=e;var o=t||{};if(!o.pleaseSelect){var r="rtl"===document.documentElement.getAttribute("dir")||"rtl"===document.body.getAttribute("dir");o.pleaseSelect=r?"× × ×œ×‘×—×•×¨":"Please select"}n=o}})}function i(){return a?(a.variants||[]).filter(function(e){return!1!==e.is_active}):[]}function s(){var e=[],t={};return document.querySelectorAll(".variant-option").forEach(function(a){var n=a.getAttribute("data-attr");n&&!t[n]&&(t[n]=!0,e.push(n))}),e}function c(e){return i().filter(function(t){if(!t.attributes)return!1;for(var a in e)if(e.hasOwnProperty(a)&&t.attributes[a]!==e[a])return!1;return!0})}function d(e){return"out_of_stock"===e.stock_status||null!=e.stock_quantity&&e.stock_quantity<=0}function l(){0!==i().length&&document.querySelectorAll(".variant-option").forEach(function(e){var a=e.getAttribute("data-attr"),n=e.getAttribute("data-value"),o={};for(var r in t)t.hasOwnProperty(r)&&r!==a&&(o[r]=t[r]);o[a]=n;var i=c(o);e.classList.remove("disabled","out-of-stock"),e.disabled=!1,0===i.length?e.classList.add("disabled"):i.every(function(e){return d(e)})&&(e.classList.add("disabled"),e.classList.add("out-of-stock"))})}function u(){var e=n,o=a;if(o){var r=s(),i=r.every(function(e){return t.hasOwnProperty(e)}),l=document.getElementById("product-stock-display"),u=document.getElementById("add-to-cart-btn");if(r.forEach(function(e){var a=document.querySelector('.variant-group[data-group="'+e+'"] .variant-selected-value');a&&(a.textContent=t[e]||"")}),i){var p=c(t);if(p.length>0){var m=p[0];if(window.selectedVariant=m,d(m)?(l&&(l.className="product-stock out-of-stock",l.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>'+(e.outOfStock||"Out of Stock")),u&&(u.disabled=!0,u.style.opacity="0.5",u.style.cursor="not-allowed")):(l&&(l.className="product-stock in-stock",l.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>'+(e.inStock||"In Stock")),u&&(u.disabled=!1,u.style.opacity="",u.style.cursor="")),w=document.getElementById("product-price-display")){var g=o.currency||e.currency||String.fromCharCode(8362),f=window.productBasePrice||parseFloat(o.price)||0,y=window.productOriginalPrice||parseFloat(o.compare_at_price||o.original_price||0),v=window.productHasSalePrice,h=null!=m.price?parseFloat(m.price):f,b=g+h.toFixed(2);null!=m.price?y&&y>h&&(b+=' <span class="original-price">'+g+y.toFixed(2)+"</span>"):v&&y>h&&(b+=' <span class="original-price">'+g+y.toFixed(2)+"</span>"),w.innerHTML=b}if("function"==typeof updatePricePerUnitDisplay)updatePricePerUnitDisplay(null!=m.price?parseFloat(m.price):window.productBasePrice||parseFloat(o.price)||0,o,e)}}else{var w;if(window.selectedVariant=null,l&&(l.className="product-stock in-stock",l.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg>'+(e.inStock||"In Stock")),u&&(u.disabled=!1,u.style.opacity="",u.style.cursor=""),w=document.getElementById("product-price-display")){g=o.currency||e.currency||String.fromCharCode(8362),f=window.productBasePrice||parseFloat(o.price)||0,y=window.productOriginalPrice||parseFloat(o.compare_at_price||o.original_price||0),v=window.productHasSalePrice;var C=window.productHasVariantPriceRange,E=window.productVariantMinPrice;if(C&&null!=E&&isFinite(E)){var k="function"==typeof getEcomText?getEcomText("startingAt",e.startingAt||"Starting at"):e.startingAt||"Starting at";w.textContent=k+" "+g+E.toFixed(2)}else v&&y>f?w.innerHTML=g+f.toFixed(2)+' <span class="original-price">'+g+y.toFixed(2)+"</span>":w.textContent=g+f.toFixed(2)}if("function"==typeof updatePricePerUnitDisplay){var L=window.productHasVariantPriceRange,x=window.productVariantMinPrice,S=window.productBasePrice||parseFloat(o.price)||0;updatePricePerUnitDisplay(L&&null!=x&&isFinite(x)?x:S,o,e)}}}}function p(){r();var e=a||window.currentProduct,o=n||window.productTranslations||{};if(e&&e.variants&&0!==e.variants.length&&0!==document.querySelectorAll(".variant-option").length&&!window._zappyVariantFixed){if(window._zappyVariantFixed=!0,a=e,!o.pleaseSelect){var i="rtl"===document.documentElement.getAttribute("dir")||"rtl"===document.body.getAttribute("dir");o.pleaseSelect=i?"× × ×œ×‘×—×•×¨":"Please select"}n=o;var p=document.getElementById("zappy-variant-state-css");p&&p.remove(),document.querySelectorAll(".variant-option").forEach(function(e){e.style.display="",e.disabled=!1}),document.querySelectorAll(".variant-options").forEach(function(e){var t=Array.from(e.querySelectorAll(".variant-option"));t.length<2||(t.sort(function(e,t){var a=e.getAttribute("data-value")||"",n=t.getAttribute("data-value")||"",o=parseFloat(a),r=parseFloat(n);return isNaN(o)||isNaN(r)?a.localeCompare(n):o-r}),t.forEach(function(t){e.appendChild(t)}))});var m=window.addProductToCart;window.addProductToCart=function(){for(var e=s(),a=0;a<e.length;a++)if(!t.hasOwnProperty(e[a])){var n=document.querySelector('.variant-group[data-group="'+e[a]+'"]'),r=n?n.querySelector(".variant-group-label"):null,i=r?r.textContent.replace(/[:\s]+$/,"").trim():e[a],l=document.getElementById("product-stock-display");return l&&(l.className="product-stock out-of-stock",l.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>'+(o.pleaseSelect||"Please select")+" "+i),void(n&&(n.style.transition="background 0.3s",n.style.background="rgba(255,0,0,0.05)",n.style.borderRadius="8px",setTimeout(function(){n.style.background=""},2e3)))}var u=c(t);u.length>0&&u.every(function(e){return d(e)})||m&&m.apply(this,arguments)},t={},document.querySelectorAll(".variant-option").forEach(function(e){e.classList.remove("selected","disabled","out-of-stock"),e.disabled=!1}),l(),u()}}r(),document.addEventListener("click",function(e){var n=e.target.closest?e.target.closest(".variant-option"):null;if(n&&a&&0!==i().length){e.preventDefault(),e.stopImmediatePropagation();var o,r=n.getAttribute("data-attr"),s=n.getAttribute("data-value");if(r&&s)if(t[r]!==s)document.querySelectorAll('.variant-option[data-attr="'+r+'"]').forEach(function(e){e.classList.remove("selected")}),t[r]=s,n.classList.add("selected"),Object.keys(t).length>1&&(o=t,i().some(function(e){if(!e.attributes)return!1;for(var t in o)if(o.hasOwnProperty(t)&&e.attributes[t]!==o[t])return!1;return!0})||(document.querySelectorAll(".variant-option").forEach(function(e){e.classList.remove("selected")}),(t={})[r]=s,n.classList.add("selected"))),l(),u()}},!0),document.addEventListener("click",function(e){if((e.target.closest?e.target.closest('.add-to-cart-btn,.add-to-cart,#add-to-cart-btn,[onclick*="addProductToCart"]'):null)&&a&&0!==i().length){for(var o=n||{},r=s(),l=0;l<r.length;l++)if(!t.hasOwnProperty(r[l])){e.preventDefault(),e.stopImmediatePropagation();var u=document.querySelector('.variant-group[data-group="'+r[l]+'"]'),p=u?u.querySelector(".variant-group-label"):null,m=p?p.textContent.replace(/[:\s]+$/,"").trim():r[l],g=document.getElementById("product-stock-display");return g&&(g.className="product-stock out-of-stock",g.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg>'+(o.pleaseSelect||"Please select")+" "+m),void(u&&(u.style.transition="background 0.3s",u.style.background="rgba(255,0,0,0.05)",u.style.borderRadius="8px",setTimeout(function(){u.style.background=""},2e3)))}var f=c(t);return f.length>0&&f.every(function(e){return d(e)})?(e.preventDefault(),void e.stopImmediatePropagation()):void 0}},!0),"complete"===document.readyState?setTimeout(p,100):window.addEventListener("load",function(){setTimeout(p,100)}),setTimeout(p,2e3)}catch(m){}}(),function(){if(!document.getElementById("zappy-terms-checkbox-css")){var e=document.createElement("style");e.id="zappy-terms-checkbox-css",e.textContent=".terms-checkbox-wrapper{margin:16px 0;padding:12px;background:var(--surface-color,var(--surface,#f9fafb));border-radius:8px}.terms-checkbox-label{display:flex!important;align-items:center!important;gap:10px!important;cursor:pointer;font-size:14px;color:var(--text-color,var(--text,#374151))}.terms-checkbox{width:18px;height:18px;cursor:pointer;accent-color:var(--primary-color,var(--primary,#ff0083));flex-shrink:0}.terms-link{color:var(--primary-color,var(--primary,#ff0083));text-decoration:underline;font-weight:500}",document.head.appendChild(e)}}(),function(){function e(e){e&&e.querySelectorAll(".cart-item-attr").forEach(function(e){if(!e.querySelector(".cart-item-color-swatch")){var t=e.querySelector(".cart-item-attr-label");if(t){var a=(t.textContent||"").replace(/[:\s]+$/,"").toLowerCase();if(-1!==["color","colour","×¦×‘×¢","Ù„ÙˆÙ†","farbe","couleur","colore"].indexOf(a)){var n=(e.textContent||"").replace(t.textContent||"","").trim();if(n){var o=/^#[0-9A-Fa-f]{3,6}$/.test(n)?n:n.toLowerCase(),r=document.createElement("span");r.className="cart-item-color-swatch",r.title=n,r.style.cssText="display:inline-block;width:14px;height:14px;border-radius:50%;background-color:"+o+";border:1px solid rgba(0,0,0,0.15);vertical-align:middle;margin-inline-start:4px;",e.textContent="",e.appendChild(t.cloneNode(!0)),e.appendChild(document.createTextNode(" ")),e.appendChild(r)}}}}})}function t(){var t=document.getElementById("cart-drawer")||document.getElementById("cart-drawer-items");t&&(e(t),new MutationObserver(function(){e(t)}).observe(t,{childList:!0,subtree:!0}))}"complete"===document.readyState?setTimeout(t,200):window.addEventListener("load",function(){setTimeout(t,200)});var a=new MutationObserver(function(){document.getElementById("cart-drawer")&&(t(),a.disconnect())});document.body?a.observe(document.body,{childList:!0,subtree:!0}):document.addEventListener("DOMContentLoaded",function(){a.observe(document.body,{childList:!0,subtree:!0})})}();